!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("THREE")):"function"==typeof define&&define.amd?define(["THREE"],e):"object"==typeof exports?exports.ZapparAFrame=e(require("THREE")):t.ZapparAFrame=e(t.THREE)}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=14)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(17),a=n(2);let i;function o(){return i||(i=r.initialize()),i}e.z=o,e.cameraDefaultDeviceID=function(t){return o().camera_default_device_id(t||!1)},e.invert=function(t){let e=a.mat4.create();return a.mat4.invert(e,t),e},e.projectionMatrixFromCameraModel=function(t,e,n){return o().projection_matrix_from_camera_model(t,e,n)},e.drawPlane=function(t,e,n,r,a){o().draw_plane(t,e,n,r,a)}},function(e,n){e.exports=t},function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return r})),n.d(e,"mat2",(function(){return a})),n.d(e,"mat2d",(function(){return i})),n.d(e,"mat3",(function(){return o})),n.d(e,"mat4",(function(){return s})),n.d(e,"quat",(function(){return f})),n.d(e,"quat2",(function(){return _})),n.d(e,"vec2",(function(){return l})),n.d(e,"vec3",(function(){return u})),n.d(e,"vec4",(function(){return c}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return d})),n.d(r,"ARRAY_TYPE",(function(){return h})),n.d(r,"RANDOM",(function(){return p})),n.d(r,"setMatrixArrayType",(function(){return m})),n.d(r,"toRadian",(function(){return g})),n.d(r,"equals",(function(){return y}));var a={};n.r(a),n.d(a,"create",(function(){return v})),n.d(a,"clone",(function(){return w})),n.d(a,"copy",(function(){return M})),n.d(a,"identity",(function(){return A})),n.d(a,"fromValues",(function(){return x})),n.d(a,"set",(function(){return k})),n.d(a,"transpose",(function(){return T})),n.d(a,"invert",(function(){return E})),n.d(a,"adjoint",(function(){return z})),n.d(a,"determinant",(function(){return R})),n.d(a,"multiply",(function(){return F})),n.d(a,"rotate",(function(){return S})),n.d(a,"scale",(function(){return C})),n.d(a,"fromRotation",(function(){return L})),n.d(a,"fromScaling",(function(){return O})),n.d(a,"str",(function(){return P})),n.d(a,"frob",(function(){return I})),n.d(a,"LDU",(function(){return D})),n.d(a,"add",(function(){return B})),n.d(a,"subtract",(function(){return U})),n.d(a,"exactEquals",(function(){return V})),n.d(a,"equals",(function(){return j})),n.d(a,"multiplyScalar",(function(){return q})),n.d(a,"multiplyScalarAndAdd",(function(){return N})),n.d(a,"mul",(function(){return G})),n.d(a,"sub",(function(){return W}));var i={};n.r(i),n.d(i,"create",(function(){return H})),n.d(i,"clone",(function(){return Y})),n.d(i,"copy",(function(){return X})),n.d(i,"identity",(function(){return Z})),n.d(i,"fromValues",(function(){return K})),n.d(i,"set",(function(){return Q})),n.d(i,"invert",(function(){return $})),n.d(i,"determinant",(function(){return J})),n.d(i,"multiply",(function(){return tt})),n.d(i,"rotate",(function(){return et})),n.d(i,"scale",(function(){return nt})),n.d(i,"translate",(function(){return rt})),n.d(i,"fromRotation",(function(){return at})),n.d(i,"fromScaling",(function(){return it})),n.d(i,"fromTranslation",(function(){return ot})),n.d(i,"str",(function(){return st})),n.d(i,"frob",(function(){return ut})),n.d(i,"add",(function(){return ct})),n.d(i,"subtract",(function(){return ft})),n.d(i,"multiplyScalar",(function(){return _t})),n.d(i,"multiplyScalarAndAdd",(function(){return lt})),n.d(i,"exactEquals",(function(){return dt})),n.d(i,"equals",(function(){return ht})),n.d(i,"mul",(function(){return pt})),n.d(i,"sub",(function(){return mt}));var o={};n.r(o),n.d(o,"create",(function(){return bt})),n.d(o,"fromMat4",(function(){return gt})),n.d(o,"clone",(function(){return yt})),n.d(o,"copy",(function(){return vt})),n.d(o,"fromValues",(function(){return wt})),n.d(o,"set",(function(){return Mt})),n.d(o,"identity",(function(){return At})),n.d(o,"transpose",(function(){return xt})),n.d(o,"invert",(function(){return kt})),n.d(o,"adjoint",(function(){return Tt})),n.d(o,"determinant",(function(){return Et})),n.d(o,"multiply",(function(){return zt})),n.d(o,"translate",(function(){return Rt})),n.d(o,"rotate",(function(){return Ft})),n.d(o,"scale",(function(){return St})),n.d(o,"fromTranslation",(function(){return Ct})),n.d(o,"fromRotation",(function(){return Lt})),n.d(o,"fromScaling",(function(){return Ot})),n.d(o,"fromMat2d",(function(){return Pt})),n.d(o,"fromQuat",(function(){return It})),n.d(o,"normalFromMat4",(function(){return Dt})),n.d(o,"projection",(function(){return Bt})),n.d(o,"str",(function(){return Ut})),n.d(o,"frob",(function(){return Vt})),n.d(o,"add",(function(){return jt})),n.d(o,"subtract",(function(){return qt})),n.d(o,"multiplyScalar",(function(){return Nt})),n.d(o,"multiplyScalarAndAdd",(function(){return Gt})),n.d(o,"exactEquals",(function(){return Wt})),n.d(o,"equals",(function(){return Ht})),n.d(o,"mul",(function(){return Yt})),n.d(o,"sub",(function(){return Xt}));var s={};n.r(s),n.d(s,"create",(function(){return Zt})),n.d(s,"clone",(function(){return Kt})),n.d(s,"copy",(function(){return Qt})),n.d(s,"fromValues",(function(){return $t})),n.d(s,"set",(function(){return Jt})),n.d(s,"identity",(function(){return te})),n.d(s,"transpose",(function(){return ee})),n.d(s,"invert",(function(){return ne})),n.d(s,"adjoint",(function(){return re})),n.d(s,"determinant",(function(){return ae})),n.d(s,"multiply",(function(){return ie})),n.d(s,"translate",(function(){return oe})),n.d(s,"scale",(function(){return se})),n.d(s,"rotate",(function(){return ue})),n.d(s,"rotateX",(function(){return ce})),n.d(s,"rotateY",(function(){return fe})),n.d(s,"rotateZ",(function(){return _e})),n.d(s,"fromTranslation",(function(){return le})),n.d(s,"fromScaling",(function(){return de})),n.d(s,"fromRotation",(function(){return he})),n.d(s,"fromXRotation",(function(){return pe})),n.d(s,"fromYRotation",(function(){return me})),n.d(s,"fromZRotation",(function(){return be})),n.d(s,"fromRotationTranslation",(function(){return ge})),n.d(s,"fromQuat2",(function(){return ye})),n.d(s,"getTranslation",(function(){return ve})),n.d(s,"getScaling",(function(){return we})),n.d(s,"getRotation",(function(){return Me})),n.d(s,"fromRotationTranslationScale",(function(){return Ae})),n.d(s,"fromRotationTranslationScaleOrigin",(function(){return xe})),n.d(s,"fromQuat",(function(){return ke})),n.d(s,"frustum",(function(){return Te})),n.d(s,"perspective",(function(){return Ee})),n.d(s,"perspectiveFromFieldOfView",(function(){return ze})),n.d(s,"ortho",(function(){return Re})),n.d(s,"lookAt",(function(){return Fe})),n.d(s,"targetTo",(function(){return Se})),n.d(s,"str",(function(){return Ce})),n.d(s,"frob",(function(){return Le})),n.d(s,"add",(function(){return Oe})),n.d(s,"subtract",(function(){return Pe})),n.d(s,"multiplyScalar",(function(){return Ie})),n.d(s,"multiplyScalarAndAdd",(function(){return De})),n.d(s,"exactEquals",(function(){return Be})),n.d(s,"equals",(function(){return Ue})),n.d(s,"mul",(function(){return Ve})),n.d(s,"sub",(function(){return je}));var u={};n.r(u),n.d(u,"create",(function(){return qe})),n.d(u,"clone",(function(){return Ne})),n.d(u,"length",(function(){return Ge})),n.d(u,"fromValues",(function(){return We})),n.d(u,"copy",(function(){return He})),n.d(u,"set",(function(){return Ye})),n.d(u,"add",(function(){return Xe})),n.d(u,"subtract",(function(){return Ze})),n.d(u,"multiply",(function(){return Ke})),n.d(u,"divide",(function(){return Qe})),n.d(u,"ceil",(function(){return $e})),n.d(u,"floor",(function(){return Je})),n.d(u,"min",(function(){return tn})),n.d(u,"max",(function(){return en})),n.d(u,"round",(function(){return nn})),n.d(u,"scale",(function(){return rn})),n.d(u,"scaleAndAdd",(function(){return an})),n.d(u,"distance",(function(){return on})),n.d(u,"squaredDistance",(function(){return sn})),n.d(u,"squaredLength",(function(){return un})),n.d(u,"negate",(function(){return cn})),n.d(u,"inverse",(function(){return fn})),n.d(u,"normalize",(function(){return _n})),n.d(u,"dot",(function(){return ln})),n.d(u,"cross",(function(){return dn})),n.d(u,"lerp",(function(){return hn})),n.d(u,"hermite",(function(){return pn})),n.d(u,"bezier",(function(){return mn})),n.d(u,"random",(function(){return bn})),n.d(u,"transformMat4",(function(){return gn})),n.d(u,"transformMat3",(function(){return yn})),n.d(u,"transformQuat",(function(){return vn})),n.d(u,"rotateX",(function(){return wn})),n.d(u,"rotateY",(function(){return Mn})),n.d(u,"rotateZ",(function(){return An})),n.d(u,"angle",(function(){return xn})),n.d(u,"zero",(function(){return kn})),n.d(u,"str",(function(){return Tn})),n.d(u,"exactEquals",(function(){return En})),n.d(u,"equals",(function(){return zn})),n.d(u,"sub",(function(){return Fn})),n.d(u,"mul",(function(){return Sn})),n.d(u,"div",(function(){return Cn})),n.d(u,"dist",(function(){return Ln})),n.d(u,"sqrDist",(function(){return On})),n.d(u,"len",(function(){return Pn})),n.d(u,"sqrLen",(function(){return In})),n.d(u,"forEach",(function(){return Dn}));var c={};n.r(c),n.d(c,"create",(function(){return Bn})),n.d(c,"clone",(function(){return Un})),n.d(c,"fromValues",(function(){return Vn})),n.d(c,"copy",(function(){return jn})),n.d(c,"set",(function(){return qn})),n.d(c,"add",(function(){return Nn})),n.d(c,"subtract",(function(){return Gn})),n.d(c,"multiply",(function(){return Wn})),n.d(c,"divide",(function(){return Hn})),n.d(c,"ceil",(function(){return Yn})),n.d(c,"floor",(function(){return Xn})),n.d(c,"min",(function(){return Zn})),n.d(c,"max",(function(){return Kn})),n.d(c,"round",(function(){return Qn})),n.d(c,"scale",(function(){return $n})),n.d(c,"scaleAndAdd",(function(){return Jn})),n.d(c,"distance",(function(){return tr})),n.d(c,"squaredDistance",(function(){return er})),n.d(c,"length",(function(){return nr})),n.d(c,"squaredLength",(function(){return rr})),n.d(c,"negate",(function(){return ar})),n.d(c,"inverse",(function(){return ir})),n.d(c,"normalize",(function(){return or})),n.d(c,"dot",(function(){return sr})),n.d(c,"cross",(function(){return ur})),n.d(c,"lerp",(function(){return cr})),n.d(c,"random",(function(){return fr})),n.d(c,"transformMat4",(function(){return _r})),n.d(c,"transformQuat",(function(){return lr})),n.d(c,"zero",(function(){return dr})),n.d(c,"str",(function(){return hr})),n.d(c,"exactEquals",(function(){return pr})),n.d(c,"equals",(function(){return mr})),n.d(c,"sub",(function(){return br})),n.d(c,"mul",(function(){return gr})),n.d(c,"div",(function(){return yr})),n.d(c,"dist",(function(){return vr})),n.d(c,"sqrDist",(function(){return wr})),n.d(c,"len",(function(){return Mr})),n.d(c,"sqrLen",(function(){return Ar})),n.d(c,"forEach",(function(){return xr}));var f={};n.r(f),n.d(f,"create",(function(){return kr})),n.d(f,"identity",(function(){return Tr})),n.d(f,"setAxisAngle",(function(){return Er})),n.d(f,"getAxisAngle",(function(){return zr})),n.d(f,"getAngle",(function(){return Rr})),n.d(f,"multiply",(function(){return Fr})),n.d(f,"rotateX",(function(){return Sr})),n.d(f,"rotateY",(function(){return Cr})),n.d(f,"rotateZ",(function(){return Lr})),n.d(f,"calculateW",(function(){return Or})),n.d(f,"exp",(function(){return Pr})),n.d(f,"ln",(function(){return Ir})),n.d(f,"pow",(function(){return Dr})),n.d(f,"slerp",(function(){return Br})),n.d(f,"random",(function(){return Ur})),n.d(f,"invert",(function(){return Vr})),n.d(f,"conjugate",(function(){return jr})),n.d(f,"fromMat3",(function(){return qr})),n.d(f,"fromEuler",(function(){return Nr})),n.d(f,"str",(function(){return Gr})),n.d(f,"clone",(function(){return Qr})),n.d(f,"fromValues",(function(){return $r})),n.d(f,"copy",(function(){return Jr})),n.d(f,"set",(function(){return ta})),n.d(f,"add",(function(){return ea})),n.d(f,"mul",(function(){return na})),n.d(f,"scale",(function(){return ra})),n.d(f,"dot",(function(){return aa})),n.d(f,"lerp",(function(){return ia})),n.d(f,"length",(function(){return oa})),n.d(f,"len",(function(){return sa})),n.d(f,"squaredLength",(function(){return ua})),n.d(f,"sqrLen",(function(){return ca})),n.d(f,"normalize",(function(){return fa})),n.d(f,"exactEquals",(function(){return _a})),n.d(f,"equals",(function(){return la})),n.d(f,"rotationTo",(function(){return da})),n.d(f,"sqlerp",(function(){return ha})),n.d(f,"setAxes",(function(){return pa}));var _={};n.r(_),n.d(_,"create",(function(){return ma})),n.d(_,"clone",(function(){return ba})),n.d(_,"fromValues",(function(){return ga})),n.d(_,"fromRotationTranslationValues",(function(){return ya})),n.d(_,"fromRotationTranslation",(function(){return va})),n.d(_,"fromTranslation",(function(){return wa})),n.d(_,"fromRotation",(function(){return Ma})),n.d(_,"fromMat4",(function(){return Aa})),n.d(_,"copy",(function(){return xa})),n.d(_,"identity",(function(){return ka})),n.d(_,"set",(function(){return Ta})),n.d(_,"getReal",(function(){return Ea})),n.d(_,"getDual",(function(){return za})),n.d(_,"setReal",(function(){return Ra})),n.d(_,"setDual",(function(){return Fa})),n.d(_,"getTranslation",(function(){return Sa})),n.d(_,"translate",(function(){return Ca})),n.d(_,"rotateX",(function(){return La})),n.d(_,"rotateY",(function(){return Oa})),n.d(_,"rotateZ",(function(){return Pa})),n.d(_,"rotateByQuatAppend",(function(){return Ia})),n.d(_,"rotateByQuatPrepend",(function(){return Da})),n.d(_,"rotateAroundAxis",(function(){return Ba})),n.d(_,"add",(function(){return Ua})),n.d(_,"multiply",(function(){return Va})),n.d(_,"mul",(function(){return ja})),n.d(_,"scale",(function(){return qa})),n.d(_,"dot",(function(){return Na})),n.d(_,"lerp",(function(){return Ga})),n.d(_,"invert",(function(){return Wa})),n.d(_,"conjugate",(function(){return Ha})),n.d(_,"length",(function(){return Ya})),n.d(_,"len",(function(){return Xa})),n.d(_,"squaredLength",(function(){return Za})),n.d(_,"sqrLen",(function(){return Ka})),n.d(_,"normalize",(function(){return Qa})),n.d(_,"str",(function(){return $a})),n.d(_,"exactEquals",(function(){return Ja})),n.d(_,"equals",(function(){return ti}));var l={};n.r(l),n.d(l,"create",(function(){return ei})),n.d(l,"clone",(function(){return ni})),n.d(l,"fromValues",(function(){return ri})),n.d(l,"copy",(function(){return ai})),n.d(l,"set",(function(){return ii})),n.d(l,"add",(function(){return oi})),n.d(l,"subtract",(function(){return si})),n.d(l,"multiply",(function(){return ui})),n.d(l,"divide",(function(){return ci})),n.d(l,"ceil",(function(){return fi})),n.d(l,"floor",(function(){return _i})),n.d(l,"min",(function(){return li})),n.d(l,"max",(function(){return di})),n.d(l,"round",(function(){return hi})),n.d(l,"scale",(function(){return pi})),n.d(l,"scaleAndAdd",(function(){return mi})),n.d(l,"distance",(function(){return bi})),n.d(l,"squaredDistance",(function(){return gi})),n.d(l,"length",(function(){return yi})),n.d(l,"squaredLength",(function(){return vi})),n.d(l,"negate",(function(){return wi})),n.d(l,"inverse",(function(){return Mi})),n.d(l,"normalize",(function(){return Ai})),n.d(l,"dot",(function(){return xi})),n.d(l,"cross",(function(){return ki})),n.d(l,"lerp",(function(){return Ti})),n.d(l,"random",(function(){return Ei})),n.d(l,"transformMat2",(function(){return zi})),n.d(l,"transformMat2d",(function(){return Ri})),n.d(l,"transformMat3",(function(){return Fi})),n.d(l,"transformMat4",(function(){return Si})),n.d(l,"rotate",(function(){return Ci})),n.d(l,"angle",(function(){return Li})),n.d(l,"zero",(function(){return Oi})),n.d(l,"str",(function(){return Pi})),n.d(l,"exactEquals",(function(){return Ii})),n.d(l,"equals",(function(){return Di})),n.d(l,"len",(function(){return Bi})),n.d(l,"sub",(function(){return Ui})),n.d(l,"mul",(function(){return Vi})),n.d(l,"div",(function(){return ji})),n.d(l,"dist",(function(){return qi})),n.d(l,"sqrDist",(function(){return Ni})),n.d(l,"sqrLen",(function(){return Gi})),n.d(l,"forEach",(function(){return Wi}));var d=1e-6,h="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;function m(t){h=t}var b=Math.PI/180;function g(t){return t*b}function y(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function v(){var t=new h(4);return h!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function w(t){var e=new h(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function M(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function A(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function x(t,e,n,r){var a=new h(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function k(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function T(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function E(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*i-a*r;return o?(o=1/o,t[0]=i*o,t[1]=-r*o,t[2]=-a*o,t[3]=n*o,t):null}function z(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function R(t){return t[0]*t[3]-t[2]*t[1]}function F(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=r*c+i*f,t[3]=a*c+o*f,t}function S(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=a*u+o*s,t[2]=r*-s+i*u,t[3]=a*-s+o*u,t}function C(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=a*s,t[2]=i*u,t[3]=o*u,t}function L(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function O(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function P(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function I(t){return Math.hypot(t[0],t[1],t[2],t[3])}function D(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function B(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function U(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function j(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=d*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))}function q(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function N(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var G=F,W=U;function H(){var t=new h(6);return h!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Y(t){var e=new h(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function X(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function K(t,e,n,r,a,i){var o=new h(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=a,o[5]=i,o}function Q(t,e,n,r,a,i,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t}function $(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=n*i-r*a;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-a*u,t[3]=n*u,t[4]=(a*s-i*o)*u,t[5]=(r*o-n*s)*u,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=n[0],f=n[1],_=n[2],l=n[3],d=n[4],h=n[5];return t[0]=r*c+i*f,t[1]=a*c+o*f,t[2]=r*_+i*l,t[3]=a*_+o*l,t[4]=r*d+i*h+s,t[5]=a*d+o*h+u,t}function et(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+i*c,t[1]=a*f+o*c,t[2]=r*-c+i*f,t[3]=a*-c+o*f,t[4]=s,t[5]=u,t}function nt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=a*c,t[2]=i*f,t[3]=o*f,t[4]=s,t[5]=u,t}function rt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=r*c+i*f+s,t[5]=a*c+o*f+u,t}function at(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function it(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ft(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function _t(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function lt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function ht(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=e[0],c=e[1],f=e[2],_=e[3],l=e[4],h=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-f)<=d*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-_)<=d*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-l)<=d*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-h)<=d*Math.max(1,Math.abs(s),Math.abs(h))}var pt=tt,mt=ft;function bt(){var t=new h(9);return h!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function yt(t){var e=new h(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wt(t,e,n,r,a,i,o,s,u){var c=new h(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=a,c[5]=i,c[6]=o,c[7]=s,c[8]=u,c}function Mt(t,e,n,r,a,i,o,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t}function At(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function xt(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function kt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],_=f*o-s*c,l=-f*i+s*u,d=c*i-o*u,h=n*_+r*l+a*d;return h?(h=1/h,t[0]=_*h,t[1]=(-f*r+a*c)*h,t[2]=(s*r-a*o)*h,t[3]=l*h,t[4]=(f*n-a*u)*h,t[5]=(-s*n+a*i)*h,t[6]=d*h,t[7]=(-c*n+r*u)*h,t[8]=(o*n-r*i)*h,t):null}function Tt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=o*f-s*c,t[1]=a*c-r*f,t[2]=r*s-a*o,t[3]=s*u-i*f,t[4]=n*f-a*u,t[5]=a*i-n*s,t[6]=i*c-o*u,t[7]=r*u-n*c,t[8]=n*o-r*i,t}function Et(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*(c*i-o*u)+n*(-c*a+o*s)+r*(u*a-i*s)}function zt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=e[8],l=n[0],d=n[1],h=n[2],p=n[3],m=n[4],b=n[5],g=n[6],y=n[7],v=n[8];return t[0]=l*r+d*o+h*c,t[1]=l*a+d*s+h*f,t[2]=l*i+d*u+h*_,t[3]=p*r+m*o+b*c,t[4]=p*a+m*s+b*f,t[5]=p*i+m*u+b*_,t[6]=g*r+y*o+v*c,t[7]=g*a+y*s+v*f,t[8]=g*i+y*u+v*_,t}function Rt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=e[8],l=n[0],d=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=l*r+d*o+c,t[7]=l*a+d*s+f,t[8]=l*i+d*u+_,t}function Ft(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=e[8],l=Math.sin(n),d=Math.cos(n);return t[0]=d*r+l*o,t[1]=d*a+l*s,t[2]=d*i+l*u,t[3]=d*o-l*r,t[4]=d*s-l*a,t[5]=d*u-l*i,t[6]=c,t[7]=f,t[8]=_,t}function St(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ct(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Lt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Pt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function It(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,u=a+a,c=n*o,f=r*o,_=r*s,l=a*o,d=a*s,h=a*u,p=i*o,m=i*s,b=i*u;return t[0]=1-_-h,t[3]=f-b,t[6]=l+m,t[1]=f+b,t[4]=1-c-h,t[7]=d-p,t[2]=l-m,t[5]=d+p,t[8]=1-c-_,t}function Dt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],_=e[9],l=e[10],d=e[11],h=e[12],p=e[13],m=e[14],b=e[15],g=n*s-r*o,y=n*u-a*o,v=n*c-i*o,w=r*u-a*s,M=r*c-i*s,A=a*c-i*u,x=f*p-_*h,k=f*m-l*h,T=f*b-d*h,E=_*m-l*p,z=_*b-d*p,R=l*b-d*m,F=g*R-y*z+v*E+w*T-M*k+A*x;return F?(F=1/F,t[0]=(s*R-u*z+c*E)*F,t[1]=(u*T-o*R-c*k)*F,t[2]=(o*z-s*T+c*x)*F,t[3]=(a*z-r*R-i*E)*F,t[4]=(n*R-a*T+i*k)*F,t[5]=(r*T-n*z-i*x)*F,t[6]=(p*A-m*M+b*w)*F,t[7]=(m*v-h*A-b*y)*F,t[8]=(h*M-p*v+b*g)*F,t):null}function Bt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ut(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Vt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function jt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function qt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Gt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Wt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Ht(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],_=e[0],l=e[1],h=e[2],p=e[3],m=e[4],b=e[5],g=e[6],y=e[7],v=e[8];return Math.abs(n-_)<=d*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-h)<=d*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-p)<=d*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-b)<=d*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-g)<=d*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-y)<=d*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-v)<=d*Math.max(1,Math.abs(f),Math.abs(v))}var Yt=zt,Xt=qt;function Zt(){var t=new h(16);return h!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Kt(t){var e=new h(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t,e,n,r,a,i,o,s,u,c,f,_,l,d,p,m){var b=new h(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=a,b[5]=i,b[6]=o,b[7]=s,b[8]=u,b[9]=c,b[10]=f,b[11]=_,b[12]=l,b[13]=d,b[14]=p,b[15]=m,b}function Jt(t,e,n,r,a,i,o,s,u,c,f,_,l,d,h,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=_,t[11]=l,t[12]=d,t[13]=h,t[14]=p,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],i=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],_=e[9],l=e[10],d=e[11],h=e[12],p=e[13],m=e[14],b=e[15],g=n*s-r*o,y=n*u-a*o,v=n*c-i*o,w=r*u-a*s,M=r*c-i*s,A=a*c-i*u,x=f*p-_*h,k=f*m-l*h,T=f*b-d*h,E=_*m-l*p,z=_*b-d*p,R=l*b-d*m,F=g*R-y*z+v*E+w*T-M*k+A*x;return F?(F=1/F,t[0]=(s*R-u*z+c*E)*F,t[1]=(a*z-r*R-i*E)*F,t[2]=(p*A-m*M+b*w)*F,t[3]=(l*M-_*A-d*w)*F,t[4]=(u*T-o*R-c*k)*F,t[5]=(n*R-a*T+i*k)*F,t[6]=(m*v-h*A-b*y)*F,t[7]=(f*A-l*v+d*y)*F,t[8]=(o*z-s*T+c*x)*F,t[9]=(r*T-n*z-i*x)*F,t[10]=(h*M-p*v+b*g)*F,t[11]=(_*v-f*M-d*g)*F,t[12]=(s*k-o*E-u*x)*F,t[13]=(n*E-r*k+a*x)*F,t[14]=(p*y-h*w-m*g)*F,t[15]=(f*w-_*y+l*g)*F,t):null}function re(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],_=e[9],l=e[10],d=e[11],h=e[12],p=e[13],m=e[14],b=e[15];return t[0]=s*(l*b-d*m)-_*(u*b-c*m)+p*(u*d-c*l),t[1]=-(r*(l*b-d*m)-_*(a*b-i*m)+p*(a*d-i*l)),t[2]=r*(u*b-c*m)-s*(a*b-i*m)+p*(a*c-i*u),t[3]=-(r*(u*d-c*l)-s*(a*d-i*l)+_*(a*c-i*u)),t[4]=-(o*(l*b-d*m)-f*(u*b-c*m)+h*(u*d-c*l)),t[5]=n*(l*b-d*m)-f*(a*b-i*m)+h*(a*d-i*l),t[6]=-(n*(u*b-c*m)-o*(a*b-i*m)+h*(a*c-i*u)),t[7]=n*(u*d-c*l)-o*(a*d-i*l)+f*(a*c-i*u),t[8]=o*(_*b-d*p)-f*(s*b-c*p)+h*(s*d-c*_),t[9]=-(n*(_*b-d*p)-f*(r*b-i*p)+h*(r*d-i*_)),t[10]=n*(s*b-c*p)-o*(r*b-i*p)+h*(r*c-i*s),t[11]=-(n*(s*d-c*_)-o*(r*d-i*_)+f*(r*c-i*s)),t[12]=-(o*(_*m-l*p)-f*(s*m-u*p)+h*(s*l-u*_)),t[13]=n*(_*m-l*p)-f*(r*m-a*p)+h*(r*l-a*_),t[14]=-(n*(s*m-u*p)-o*(r*m-a*p)+h*(r*u-a*s)),t[15]=n*(s*l-u*_)-o*(r*l-a*_)+f*(r*u-a*s),t}function ae(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],c=t[8],f=t[9],_=t[10],l=t[11],d=t[12],h=t[13],p=t[14],m=t[15];return(e*o-n*i)*(_*m-l*p)-(e*s-r*i)*(f*m-l*h)+(e*u-a*i)*(f*p-_*h)+(n*s-r*o)*(c*m-l*d)-(n*u-a*o)*(c*p-_*d)+(r*u-a*s)*(c*h-f*d)}function ie(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],b=e[14],g=e[15],y=n[0],v=n[1],w=n[2],M=n[3];return t[0]=y*r+v*s+w*_+M*p,t[1]=y*a+v*u+w*l+M*m,t[2]=y*i+v*c+w*d+M*b,t[3]=y*o+v*f+w*h+M*g,y=n[4],v=n[5],w=n[6],M=n[7],t[4]=y*r+v*s+w*_+M*p,t[5]=y*a+v*u+w*l+M*m,t[6]=y*i+v*c+w*d+M*b,t[7]=y*o+v*f+w*h+M*g,y=n[8],v=n[9],w=n[10],M=n[11],t[8]=y*r+v*s+w*_+M*p,t[9]=y*a+v*u+w*l+M*m,t[10]=y*i+v*c+w*d+M*b,t[11]=y*o+v*f+w*h+M*g,y=n[12],v=n[13],w=n[14],M=n[15],t[12]=y*r+v*s+w*_+M*p,t[13]=y*a+v*u+w*l+M*m,t[14]=y*i+v*c+w*d+M*b,t[15]=y*o+v*f+w*h+M*g,t}function oe(t,e,n){var r,a,i,o,s,u,c,f,_,l,d,h,p=n[0],m=n[1],b=n[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*b+e[12],t[13]=e[1]*p+e[5]*m+e[9]*b+e[13],t[14]=e[2]*p+e[6]*m+e[10]*b+e[14],t[15]=e[3]*p+e[7]*m+e[11]*b+e[15]):(r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=e[8],l=e[9],d=e[10],h=e[11],t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=_,t[9]=l,t[10]=d,t[11]=h,t[12]=r*p+s*m+_*b+e[12],t[13]=a*p+u*m+l*b+e[13],t[14]=i*p+c*m+d*b+e[14],t[15]=o*p+f*m+h*b+e[15]),t}function se(t,e,n){var r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,r){var a,i,o,s,u,c,f,_,l,h,p,m,b,g,y,v,w,M,A,x,k,T,E,z,R=r[0],F=r[1],S=r[2],C=Math.hypot(R,F,S);return C<d?null:(R*=C=1/C,F*=C,S*=C,a=Math.sin(n),o=1-(i=Math.cos(n)),s=e[0],u=e[1],c=e[2],f=e[3],_=e[4],l=e[5],h=e[6],p=e[7],m=e[8],b=e[9],g=e[10],y=e[11],v=R*R*o+i,w=F*R*o+S*a,M=S*R*o-F*a,A=R*F*o-S*a,x=F*F*o+i,k=S*F*o+R*a,T=R*S*o+F*a,E=F*S*o-R*a,z=S*S*o+i,t[0]=s*v+_*w+m*M,t[1]=u*v+l*w+b*M,t[2]=c*v+h*w+g*M,t[3]=f*v+p*w+y*M,t[4]=s*A+_*x+m*k,t[5]=u*A+l*x+b*k,t[6]=c*A+h*x+g*k,t[7]=f*A+p*x+y*k,t[8]=s*T+_*E+m*z,t[9]=u*T+l*E+b*z,t[10]=c*T+h*E+g*z,t[11]=f*T+p*E+y*z,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[4],o=e[5],s=e[6],u=e[7],c=e[8],f=e[9],_=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+c*r,t[5]=o*a+f*r,t[6]=s*a+_*r,t[7]=u*a+l*r,t[8]=c*a-i*r,t[9]=f*a-o*r,t[10]=_*a-s*r,t[11]=l*a-u*r,t}function fe(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],u=e[3],c=e[8],f=e[9],_=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-c*r,t[1]=o*a-f*r,t[2]=s*a-_*r,t[3]=u*a-l*r,t[8]=i*r+c*a,t[9]=o*r+f*a,t[10]=s*r+_*a,t[11]=u*r+l*a,t}function _e(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],u=e[3],c=e[4],f=e[5],_=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+c*r,t[1]=o*a+f*r,t[2]=s*a+_*r,t[3]=u*a+l*r,t[4]=c*a-i*r,t[5]=f*a-o*r,t[6]=_*a-s*r,t[7]=l*a-u*r,t}function le(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function he(t,e,n){var r,a,i,o=n[0],s=n[1],u=n[2],c=Math.hypot(o,s,u);return c<d?null:(o*=c=1/c,s*=c,u*=c,r=Math.sin(e),i=1-(a=Math.cos(e)),t[0]=o*o*i+a,t[1]=s*o*i+u*r,t[2]=u*o*i-s*r,t[3]=0,t[4]=o*s*i-u*r,t[5]=s*s*i+a,t[6]=u*s*i+o*r,t[7]=0,t[8]=o*u*i+s*r,t[9]=s*u*i-o*r,t[10]=u*u*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function pe(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function be(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=r+r,u=a+a,c=i+i,f=r*s,_=r*u,l=r*c,d=a*u,h=a*c,p=i*c,m=o*s,b=o*u,g=o*c;return t[0]=1-(d+p),t[1]=_+g,t[2]=l-b,t[3]=0,t[4]=_-g,t[5]=1-(f+p),t[6]=h+m,t[7]=0,t[8]=l+b,t[9]=h-m,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ye(t,e){var n=new h(3),r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=r*r+a*a+i*i+o*o;return _>0?(n[0]=2*(s*o+f*r+u*i-c*a)/_,n[1]=2*(u*o+f*a+c*r-s*i)/_,n[2]=2*(c*o+f*i+s*a-u*r)/_):(n[0]=2*(s*o+f*r+u*i-c*a),n[1]=2*(u*o+f*a+c*r-s*i),n[2]=2*(c*o+f*i+s*a-u*r)),ge(t,e,n),t}function ve(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function we(t,e){var n=e[0],r=e[1],a=e[2],i=e[4],o=e[5],s=e[6],u=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(i,o,s),t[2]=Math.hypot(u,c,f),t}function Me(t,e){var n=new h(3);we(n,e);var r=1/n[0],a=1/n[1],i=1/n[2],o=e[0]*r,s=e[1]*a,u=e[2]*i,c=e[4]*r,f=e[5]*a,_=e[6]*i,l=e[8]*r,d=e[9]*a,p=e[10]*i,m=o+f+p,b=0;return m>0?(b=2*Math.sqrt(m+1),t[3]=.25*b,t[0]=(_-d)/b,t[1]=(l-u)/b,t[2]=(s-c)/b):o>f&&o>p?(b=2*Math.sqrt(1+o-f-p),t[3]=(_-d)/b,t[0]=.25*b,t[1]=(s+c)/b,t[2]=(l+u)/b):f>p?(b=2*Math.sqrt(1+f-o-p),t[3]=(l-u)/b,t[0]=(s+c)/b,t[1]=.25*b,t[2]=(_+d)/b):(b=2*Math.sqrt(1+p-o-f),t[3]=(s-c)/b,t[0]=(l+u)/b,t[1]=(_+d)/b,t[2]=.25*b),t}function Ae(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3],u=a+a,c=i+i,f=o+o,_=a*u,l=a*c,d=a*f,h=i*c,p=i*f,m=o*f,b=s*u,g=s*c,y=s*f,v=r[0],w=r[1],M=r[2];return t[0]=(1-(h+m))*v,t[1]=(l+y)*v,t[2]=(d-g)*v,t[3]=0,t[4]=(l-y)*w,t[5]=(1-(_+m))*w,t[6]=(p+b)*w,t[7]=0,t[8]=(d+g)*M,t[9]=(p-b)*M,t[10]=(1-(_+h))*M,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function xe(t,e,n,r,a){var i=e[0],o=e[1],s=e[2],u=e[3],c=i+i,f=o+o,_=s+s,l=i*c,d=i*f,h=i*_,p=o*f,m=o*_,b=s*_,g=u*c,y=u*f,v=u*_,w=r[0],M=r[1],A=r[2],x=a[0],k=a[1],T=a[2],E=(1-(p+b))*w,z=(d+v)*w,R=(h-y)*w,F=(d-v)*M,S=(1-(l+b))*M,C=(m+g)*M,L=(h+y)*A,O=(m-g)*A,P=(1-(l+p))*A;return t[0]=E,t[1]=z,t[2]=R,t[3]=0,t[4]=F,t[5]=S,t[6]=C,t[7]=0,t[8]=L,t[9]=O,t[10]=P,t[11]=0,t[12]=n[0]+x-(E*x+F*k+L*T),t[13]=n[1]+k-(z*x+S*k+O*T),t[14]=n[2]+T-(R*x+C*k+P*T),t[15]=1,t}function ke(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,u=a+a,c=n*o,f=r*o,_=r*s,l=a*o,d=a*s,h=a*u,p=i*o,m=i*s,b=i*u;return t[0]=1-_-h,t[1]=f+b,t[2]=l-m,t[3]=0,t[4]=f-b,t[5]=1-c-h,t[6]=d+p,t[7]=0,t[8]=l+m,t[9]=d-p,t[10]=1-c-_,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Te(t,e,n,r,a,i,o){var s=1/(n-e),u=1/(a-r),c=1/(i-o);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(a+r)*u,t[10]=(o+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*c,t[15]=0,t}function Ee(t,e,n,r,a){var i,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=(a+r)*i,t[14]=2*a*r*i):(t[10]=-1,t[14]=-2*r),t}function ze(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(a+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(a-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Re(t,e,n,r,a,i,o){var s=1/(e-n),u=1/(r-a),c=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*u,t[14]=(o+i)*c,t[15]=1,t}function Fe(t,e,n,r){var a,i,o,s,u,c,f,_,l,h,p=e[0],m=e[1],b=e[2],g=r[0],y=r[1],v=r[2],w=n[0],M=n[1],A=n[2];return Math.abs(p-w)<d&&Math.abs(m-M)<d&&Math.abs(b-A)<d?te(t):(f=p-w,_=m-M,l=b-A,a=y*(l*=h=1/Math.hypot(f,_,l))-v*(_*=h),i=v*(f*=h)-g*l,o=g*_-y*f,(h=Math.hypot(a,i,o))?(a*=h=1/h,i*=h,o*=h):(a=0,i=0,o=0),s=_*o-l*i,u=l*a-f*o,c=f*i-_*a,(h=Math.hypot(s,u,c))?(s*=h=1/h,u*=h,c*=h):(s=0,u=0,c=0),t[0]=a,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=u,t[6]=_,t[7]=0,t[8]=o,t[9]=c,t[10]=l,t[11]=0,t[12]=-(a*p+i*m+o*b),t[13]=-(s*p+u*m+c*b),t[14]=-(f*p+_*m+l*b),t[15]=1,t)}function Se(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=r[0],u=r[1],c=r[2],f=a-n[0],_=i-n[1],l=o-n[2],d=f*f+_*_+l*l;d>0&&(f*=d=1/Math.sqrt(d),_*=d,l*=d);var h=u*l-c*_,p=c*f-s*l,m=s*_-u*f;return(d=h*h+p*p+m*m)>0&&(h*=d=1/Math.sqrt(d),p*=d,m*=d),t[0]=h,t[1]=p,t[2]=m,t[3]=0,t[4]=_*m-l*p,t[5]=l*h-f*m,t[6]=f*p-_*h,t[7]=0,t[8]=f,t[9]=_,t[10]=l,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function Ce(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Le(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Oe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Pe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ie(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function De(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Be(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ue(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],_=t[9],l=t[10],h=t[11],p=t[12],m=t[13],b=t[14],g=t[15],y=e[0],v=e[1],w=e[2],M=e[3],A=e[4],x=e[5],k=e[6],T=e[7],E=e[8],z=e[9],R=e[10],F=e[11],S=e[12],C=e[13],L=e[14],O=e[15];return Math.abs(n-y)<=d*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-v)<=d*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(a-w)<=d*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(i-M)<=d*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-A)<=d*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(s-x)<=d*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-k)<=d*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-T)<=d*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-E)<=d*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(_-z)<=d*Math.max(1,Math.abs(_),Math.abs(z))&&Math.abs(l-R)<=d*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(h-F)<=d*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(p-S)<=d*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(m-C)<=d*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(b-L)<=d*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(g-O)<=d*Math.max(1,Math.abs(g),Math.abs(O))}var Ve=ie,je=Pe;function qe(){var t=new h(3);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ne(t){var e=new h(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ge(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function We(t,e,n){var r=new h(3);return r[0]=t,r[1]=e,r[2]=n,r}function He(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ye(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Xe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ze(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ke(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Qe(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Je(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function an(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function on(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function sn(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function un(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function _n(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dn(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],u=n[2];return t[0]=a*u-i*s,t[1]=i*o-r*u,t[2]=r*s-a*o,t}function hn(t,e,n,r){var a=e[0],i=e[1],o=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t}function pn(t,e,n,r,a,i){var o=i*i,s=o*(2*i-3)+1,u=o*(i-2)+i,c=o*(i-1),f=o*(3-2*i);return t[0]=e[0]*s+n[0]*u+r[0]*c+a[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+a[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+a[2]*f,t}function mn(t,e,n,r,a,i){var o=1-i,s=o*o,u=i*i,c=s*o,f=3*i*s,_=3*u*o,l=u*i;return t[0]=e[0]*c+n[0]*f+r[0]*_+a[0]*l,t[1]=e[1]*c+n[1]*f+r[1]*_+a[1]*l,t[2]=e[2]*c+n[2]*f+r[2]*_+a[2]*l,t}function bn(t,e){e=e||1;var n=2*p()*Math.PI,r=2*p()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function gn(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,t}function yn(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function vn(t,e,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],u=e[1],c=e[2],f=a*c-i*u,_=i*s-r*c,l=r*u-a*s,d=a*l-i*_,h=i*f-r*l,p=r*_-a*f,m=2*o;return f*=m,_*=m,l*=m,d*=2,h*=2,p*=2,t[0]=s+f+d,t[1]=u+_+h,t[2]=c+l+p,t}function wn(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Mn(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function An(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function xn(t,e){var n=We(t[0],t[1],t[2]),r=We(e[0],e[1],e[2]);_n(n,n),_n(r,r);var a=ln(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)}function kn(t){return t[0]=0,t[1]=0,t[2]=0,t}function Tn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function En(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function zn(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=d*Math.max(1,Math.abs(a),Math.abs(s))}var Rn,Fn=Ze,Sn=Ke,Cn=Qe,Ln=on,On=sn,Pn=Ge,In=un,Dn=(Rn=qe(),function(t,e,n,r,a,i){var o,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,o=n;o<s;o+=e)Rn[0]=t[o],Rn[1]=t[o+1],Rn[2]=t[o+2],a(Rn,Rn,i),t[o]=Rn[0],t[o+1]=Rn[1],t[o+2]=Rn[2];return t});function Bn(){var t=new h(4);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Un(t){var e=new h(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Vn(t,e,n,r){var a=new h(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function jn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function qn(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function Nn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Gn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Wn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Hn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Yn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Xn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Zn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Kn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Qn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function $n(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Jn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,a,i)}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+a*a+i*i}function nr(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.hypot(e,n,r,a)}function rr(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function ar(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ir(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function or(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=i*o,t}function sr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ur(t,e,n,r){var a=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],_=e[1],l=e[2],d=e[3];return t[0]=_*c-l*u+d*s,t[1]=-f*c+l*o-d*i,t[2]=f*u-_*o+d*a,t[3]=-f*s+_*i-l*a,t}function cr(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t}function fr(t,e){var n,r,a,i,o,s;e=e||1;do{o=(n=2*p()-1)*n+(r=2*p()-1)*r}while(o>=1);do{s=(a=2*p()-1)*a+(i=2*p()-1)*i}while(s>=1);var u=Math.sqrt((1-o)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*a*u,t[3]=e*i*u,t}function _r(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,t}function lr(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*i-u*a,_=c*a+u*r-o*i,l=c*i+o*a-s*r,d=-o*r-s*a-u*i;return t[0]=f*c+d*-o+_*-u-l*-s,t[1]=_*c+d*-s+l*-o-f*-u,t[2]=l*c+d*-u+f*-s-_*-o,t[3]=e[3],t}function dr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function hr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function pr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mr(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=d*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))}var br=Gn,gr=Wn,yr=Hn,vr=tr,wr=er,Mr=nr,Ar=rr,xr=function(){var t=Bn();return function(e,n,r,a,i,o){var s,u;for(n||(n=4),r||(r=0),u=a?Math.min(a*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function kr(){var t=new h(4);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Tr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Er(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function zr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Rr(t,e){var n=aa(t,e);return Math.acos(2*n*n-1)}function Fr(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+o*s+a*c-i*u,t[1]=a*f+o*u+i*s-r*c,t[2]=i*f+o*c+r*u-a*s,t[3]=o*f-r*s-a*u-i*c,t}function Sr(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=i*u-a*s,t[3]=o*u-r*s,t}function Cr(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-i*s,t[1]=a*u+o*s,t[2]=i*u+r*s,t[3]=o*u-a*s,t}function Lr(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=a*u-r*s,t[2]=i*u+o*s,t[3]=o*u-i*s,t}function Or(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t}function Pr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=Math.sqrt(n*n+r*r+a*a),s=Math.exp(i),u=o>0?s*Math.sin(o)/o:0;return t[0]=n*u,t[1]=r*u,t[2]=a*u,t[3]=s*Math.cos(o),t}function Ir(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=Math.sqrt(n*n+r*r+a*a),s=o>0?Math.atan2(o,i)/o:0;return t[0]=n*s,t[1]=r*s,t[2]=a*s,t[3]=.5*Math.log(n*n+r*r+a*a+i*i),t}function Dr(t,e,n){return Ir(t,e),ra(t,t,n),Pr(t,t),t}function Br(t,e,n,r){var a,i,o,s,u,c=e[0],f=e[1],_=e[2],l=e[3],h=n[0],p=n[1],m=n[2],b=n[3];return(i=c*h+f*p+_*m+l*b)<0&&(i=-i,h=-h,p=-p,m=-m,b=-b),1-i>d?(a=Math.acos(i),o=Math.sin(a),s=Math.sin((1-r)*a)/o,u=Math.sin(r*a)/o):(s=1-r,u=r),t[0]=s*c+u*h,t[1]=s*f+u*p,t[2]=s*_+u*m,t[3]=s*l+u*b,t}function Ur(t){var e=p(),n=p(),r=p(),a=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*n),t[1]=a*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Vr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-a*s,t[3]=i*s,t}function jr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function qr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*o+o]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[o]=(e[3*o+a]+e[3*a+o])*n}return t}function Nr(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var i=Math.sin(e),o=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=i*u*f-o*s*c,t[1]=o*s*f+i*u*c,t[2]=o*u*c-i*s*f,t[3]=o*u*f+i*s*c,t}function Gr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Wr,Hr,Yr,Xr,Zr,Kr,Qr=Un,$r=Vn,Jr=jn,ta=qn,ea=Nn,na=Fr,ra=$n,aa=sr,ia=cr,oa=nr,sa=oa,ua=rr,ca=ua,fa=or,_a=pr,la=mr,da=(Wr=qe(),Hr=We(1,0,0),Yr=We(0,1,0),function(t,e,n){var r=ln(e,n);return r<-.999999?(dn(Wr,Hr,e),Pn(Wr)<1e-6&&dn(Wr,Yr,e),_n(Wr,Wr),Er(t,Wr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(dn(Wr,e,n),t[0]=Wr[0],t[1]=Wr[1],t[2]=Wr[2],t[3]=1+r,fa(t,t))}),ha=(Xr=kr(),Zr=kr(),function(t,e,n,r,a,i){return Br(Xr,e,a,i),Br(Zr,n,r,i),Br(t,Xr,Zr,2*i*(1-i)),t}),pa=(Kr=bt(),function(t,e,n,r){return Kr[0]=n[0],Kr[3]=n[1],Kr[6]=n[2],Kr[1]=r[0],Kr[4]=r[1],Kr[7]=r[2],Kr[2]=-e[0],Kr[5]=-e[1],Kr[8]=-e[2],fa(t,qr(t,Kr))});function ma(){var t=new h(8);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function ba(t){var e=new h(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function ga(t,e,n,r,a,i,o,s){var u=new h(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u[6]=o,u[7]=s,u}function ya(t,e,n,r,a,i,o){var s=new h(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*a,c=.5*i,f=.5*o;return s[4]=u*r+c*n-f*e,s[5]=c*r+f*t-u*n,s[6]=f*r+u*e-c*t,s[7]=-u*t-c*e-f*n,s}function va(t,e,n){var r=.5*n[0],a=.5*n[1],i=.5*n[2],o=e[0],s=e[1],u=e[2],c=e[3];return t[0]=o,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+a*u-i*s,t[5]=a*c+i*o-r*u,t[6]=i*c+r*s-a*o,t[7]=-r*o-a*s-i*u,t}function wa(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Ma(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Aa(t,e){var n=kr();Me(n,e);var r=new h(3);return ve(r,e),va(t,n,r),t}function xa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function ka(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ta(t,e,n,r,a,i,o,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t}var Ea=Jr;function za(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Ra=Jr;function Fa(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Sa(t,e){var n=e[4],r=e[5],a=e[6],i=e[7],o=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+i*o+r*u-a*s),t[1]=2*(r*c+i*s+a*o-n*u),t[2]=2*(a*c+i*u+n*s-r*o),t}function Ca(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],f=e[4],_=e[5],l=e[6],d=e[7];return t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=o*s+a*c-i*u+f,t[5]=o*u+i*s-r*c+_,t[6]=o*c+r*u-a*s+l,t[7]=-r*s-a*u-i*c+d,t}function La(t,e,n){var r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=s*o+f*r+u*i-c*a,l=u*o+f*a+c*r-s*i,d=c*o+f*i+s*a-u*r,h=f*o-s*r-u*a-c*i;return Sr(t,e,n),r=t[0],a=t[1],i=t[2],o=t[3],t[4]=_*o+h*r+l*i-d*a,t[5]=l*o+h*a+d*r-_*i,t[6]=d*o+h*i+_*a-l*r,t[7]=h*o-_*r-l*a-d*i,t}function Oa(t,e,n){var r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=s*o+f*r+u*i-c*a,l=u*o+f*a+c*r-s*i,d=c*o+f*i+s*a-u*r,h=f*o-s*r-u*a-c*i;return Cr(t,e,n),r=t[0],a=t[1],i=t[2],o=t[3],t[4]=_*o+h*r+l*i-d*a,t[5]=l*o+h*a+d*r-_*i,t[6]=d*o+h*i+_*a-l*r,t[7]=h*o-_*r-l*a-d*i,t}function Pa(t,e,n){var r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],_=s*o+f*r+u*i-c*a,l=u*o+f*a+c*r-s*i,d=c*o+f*i+s*a-u*r,h=f*o-s*r-u*a-c*i;return Lr(t,e,n),r=t[0],a=t[1],i=t[2],o=t[3],t[4]=_*o+h*r+l*i-d*a,t[5]=l*o+h*a+d*r-_*i,t[6]=d*o+h*i+_*a-l*r,t[7]=h*o-_*r-l*a-d*i,t}function Ia(t,e,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],u=e[1],c=e[2],f=e[3];return t[0]=s*o+f*r+u*i-c*a,t[1]=u*o+f*a+c*r-s*i,t[2]=c*o+f*i+s*a-u*r,t[3]=f*o-s*r-u*a-c*i,s=e[4],u=e[5],c=e[6],f=e[7],t[4]=s*o+f*r+u*i-c*a,t[5]=u*o+f*a+c*r-s*i,t[6]=c*o+f*i+s*a-u*r,t[7]=f*o-s*r-u*a-c*i,t}function Da(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+o*s+a*c-i*u,t[1]=a*f+o*u+i*s-r*c,t[2]=i*f+o*c+r*u-a*s,t[3]=o*f-r*s-a*u-i*c,s=n[4],u=n[5],c=n[6],f=n[7],t[4]=r*f+o*s+a*c-i*u,t[5]=a*f+o*u+i*s-r*c,t[6]=i*f+o*c+r*u-a*s,t[7]=o*f-r*s-a*u-i*c,t}function Ba(t,e,n,r){if(Math.abs(r)<d)return xa(t,e);var a=Math.hypot(n[0],n[1],n[2]);r*=.5;var i=Math.sin(r),o=i*n[0]/a,s=i*n[1]/a,u=i*n[2]/a,c=Math.cos(r),f=e[0],_=e[1],l=e[2],h=e[3];t[0]=f*c+h*o+_*u-l*s,t[1]=_*c+h*s+l*o-f*u,t[2]=l*c+h*u+f*s-_*o,t[3]=h*c-f*o-_*s-l*u;var p=e[4],m=e[5],b=e[6],g=e[7];return t[4]=p*c+g*o+m*u-b*s,t[5]=m*c+g*s+b*o-p*u,t[6]=b*c+g*u+p*s-m*o,t[7]=g*c-p*o-m*s-b*u,t}function Ua(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Va(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[4],u=n[5],c=n[6],f=n[7],_=e[4],l=e[5],d=e[6],h=e[7],p=n[0],m=n[1],b=n[2],g=n[3];return t[0]=r*g+o*p+a*b-i*m,t[1]=a*g+o*m+i*p-r*b,t[2]=i*g+o*b+r*m-a*p,t[3]=o*g-r*p-a*m-i*b,t[4]=r*f+o*s+a*c-i*u+_*g+h*p+l*b-d*m,t[5]=a*f+o*u+i*s-r*c+l*g+h*m+d*p-_*b,t[6]=i*f+o*c+r*u-a*s+d*g+h*b+_*m-l*p,t[7]=o*f-r*s-a*u-i*c+h*g-_*p-l*m-d*b,t}var ja=Va;function qa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Na=aa;function Ga(t,e,n,r){var a=1-r;return Na(e,n)<0&&(r=-r),t[0]=e[0]*a+n[0]*r,t[1]=e[1]*a+n[1]*r,t[2]=e[2]*a+n[2]*r,t[3]=e[3]*a+n[3]*r,t[4]=e[4]*a+n[4]*r,t[5]=e[5]*a+n[5]*r,t[6]=e[6]*a+n[6]*r,t[7]=e[7]*a+n[7]*r,t}function Wa(t,e){var n=Za(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Ha(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Ya=oa,Xa=Ya,Za=ua,Ka=Za;function Qa(t,e){var n=Za(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,a=e[1]/n,i=e[2]/n,o=e[3]/n,s=e[4],u=e[5],c=e[6],f=e[7],_=r*s+a*u+i*c+o*f;t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=(s-r*_)/n,t[5]=(u-a*_)/n,t[6]=(c-i*_)/n,t[7]=(f-o*_)/n}return t}function $a(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Ja(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ti(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=e[0],_=e[1],l=e[2],h=e[3],p=e[4],m=e[5],b=e[6],g=e[7];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-_)<=d*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(a-l)<=d*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=d*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-b)<=d*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-g)<=d*Math.max(1,Math.abs(c),Math.abs(g))}function ei(){var t=new h(2);return h!=Float32Array&&(t[0]=0,t[1]=0),t}function ni(t){var e=new h(2);return e[0]=t[0],e[1]=t[1],e}function ri(t,e){var n=new h(2);return n[0]=t,n[1]=e,n}function ai(t,e){return t[0]=e[0],t[1]=e[1],t}function ii(t,e,n){return t[0]=e,t[1]=n,t}function oi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function si(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function ui(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function ci(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function fi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function _i(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function li(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function di(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function hi(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function pi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function mi(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function bi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function gi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function yi(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function vi(t){var e=t[0],n=t[1];return e*e+n*n}function wi(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Mi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Ai(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function xi(t,e){return t[0]*e[0]+t[1]*e[1]}function ki(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Ti(t,e,n,r){var a=e[0],i=e[1];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t}function Ei(t,e){e=e||1;var n=2*p()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function zi(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t}function Ri(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t}function Fi(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t}function Si(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t}function Ci(t,e,n,r){var a=e[0]-n[0],i=e[1]-n[1],o=Math.sin(r),s=Math.cos(r);return t[0]=a*s-i*o+n[0],t[1]=a*o+i*s+n[1],t}function Li(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=a*a+i*i;s>0&&(s=1/Math.sqrt(s));var u=(n*a+r*i)*o*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function Oi(t){return t[0]=0,t[1]=0,t}function Pi(t){return"vec2("+t[0]+", "+t[1]+")"}function Ii(t,e){return t[0]===e[0]&&t[1]===e[1]}function Di(t,e){var n=t[0],r=t[1],a=e[0],i=e[1];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))}var Bi=yi,Ui=si,Vi=ui,ji=ci,qi=bi,Ni=gi,Gi=vi,Wi=function(){var t=ei();return function(e,n,r,a,i,o){var s,u;for(n||(n=2),r||(r=0),u=a?Math.min(a*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],i(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6);e.Camera=r.Camera,e.CameraPoseMode=r.CameraPoseMode,e.CameraMirrorMode=r.CameraMirrorMode;var a=n(46);e.ImageAnchorGroup=a.ImageAnchorGroup;var i=n(47);e.ImageTrackerLoader=i.ImageTrackerLoader;var o=n(48);e.InstantWorldAnchorGroup=o.InstantWorldAnchorGroup;var s=n(49);e.FaceAnchorGroup=s.FaceAnchorGroup;var u=n(50);e.FaceTrackerLoader=u.FaceTrackerLoader;var c=n(51);e.FaceBufferGeometry=c.FaceBufferGeometry;var f=n(52);e.FaceMeshLoader=f.FaceMeshLoader;var _=n(8);e.ImageTracker=_.ImageTracker,e.InstantWorldTracker=_.InstantWorldTracker,e.BarcodeFinder=_.BarcodeFinder,e.FaceTracker=_.FaceTracker,e.CameraSource=_.CameraSource,e.HTMLElementSource=_.HTMLElementSource,e.onFrameUpdate=_.onFrameUpdate,e.glContextSet=_.glContextSet;var l=n(4);e.FaceMesh=l.FaceMesh,e.permissionDenied=l.permissionDenied,e.permissionGranted=l.permissionGranted,e.permissionRequest=l.permissionRequest,e.permissionDeniedUI=l.permissionDeniedUI,e.permissionRequestUI=l.permissionRequestUI},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16);e.ImageTracker=r.ImageTracker;var a=n(38);e.InstantWorldTracker=a.InstantWorldTracker;var i=n(39);e.BarcodeFinder=i.BarcodeFinder;var o=n(40);e.FaceTracker=o.FaceTracker;var s=n(41);e.FaceMesh=s.FaceMesh;var u=n(42);e.CameraSource=u.CameraSource;var c=n(43);e.HTMLElementSource=c.HTMLElementSource;var f=n(44);e.Pipeline=f.Pipeline;var _=n(45);e.permissionDeniedUI=_.permissionDeniedUI,e.permissionGranted=_.permissionGranted,e.permissionDenied=_.permissionDenied,e.permissionRequest=_.permissionRequest,e.permissionRequestUI=_.permissionRequestUI,e.Permission=_.Permission;var l=n(0);e.cameraDefaultDeviceID=l.cameraDefaultDeviceID,e.invert=l.invert,e.drawPlane=l.drawPlane,e.projectionMatrixFromCameraModel=l.projectionMatrixFromCameraModel},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compileShader=function(t,e,n){let r=t.createShader(e);if(!r)throw new Error("Unable to create shader");t.shaderSource(r,n),t.compileShader(r);let a=t.getShaderInfoLog(r);if(a&&a.length>0)throw new Error("Shader compile error: "+a);return r},e.linkProgram=function(t,e){t.linkProgram(e);let n=t.getProgramInfoLog(e);if(n&&n.length>0)throw new Error("Unable to link: "+n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=n(4),i=n(8);var o,s;!function(t){t[t.Default=0]="Default",t[t.Attitude=1]="Attitude",t[t.AnchorOrigin=2]="AnchorOrigin"}(o=e.CameraPoseMode||(e.CameraPoseMode={})),function(t){t[t.None=0]="None",t[t.Poses=1]="Poses",t[t.CSS=2]="CSS"}(s=e.CameraMirrorMode||(e.CameraMirrorMode={}));class u extends r.Camera{constructor(t){super(),this.backgroundTexture=new r.Texture,this.poseMode=o.Default,this.rearCameraMirrorMode=s.None,this.userCameraMirrorMode=s.Poses,this._currentMirrorMode=s.None,this.isPerspectiveCamera=!0,this._cameraRunningRear=null,this._hasSetCSSScaleX=!1,this.pipeline=t||i.getDefaultPipeline(),this.rawPose=this.pipeline.cameraPoseDefault(),this.rearCameraSource=new i.CameraSource(a.cameraDefaultDeviceID(),this.pipeline),this.userCameraSource=new i.CameraSource(a.cameraDefaultDeviceID(!0),this.pipeline),this.matrixAutoUpdate=!1,window.addEventListener("blur",()=>this._pause()),window.addEventListener("focus",()=>this._resume())}_pause(){this.userCameraSource.pause(),this.rearCameraSource.pause()}_resume(){null!==this._cameraRunningRear&&(this._cameraRunningRear?this.rearCameraSource.start():this.userCameraSource.start())}start(t){t?this.userCameraSource.start():this.rearCameraSource.start(),this._cameraRunningRear=!t}setPoseModeAnchorOrigin(t){this.poseAnchorOrigin=t,this.poseMode=o.AnchorOrigin}get currentMirrorMode(){return this._currentMirrorMode}updateFrame(t){t.state.reset(),this.pipeline.processGL(),t.getContext().viewport(0,0,t.domElement.width,t.domElement.height),t.state.reset(),this.pipeline.frameUpdate(),this._currentMirrorMode=this.pipeline.cameraFrameUserFacing()?this.userCameraMirrorMode:this.rearCameraMirrorMode,this._currentMirrorMode!==s.CSS&&this._hasSetCSSScaleX?(t.domElement.style.transform="",this._hasSetCSSScaleX=!1):this._currentMirrorMode!==s.CSS||this._hasSetCSSScaleX||(t.domElement.style.transform="scaleX(-1)",this._hasSetCSSScaleX=!0);let e=this.pipeline.cameraModel(),n=a.projectionMatrixFromCameraModel(e,t.domElement.width,t.domElement.height);switch(this.projectionMatrix.fromArray(n),this.projectionMatrixInverse.getInverse(this.projectionMatrix),this.poseMode){case o.Default:this.rawPose=this.pipeline.cameraPoseDefault();break;case o.Attitude:this.rawPose=this.pipeline.cameraPoseWithAttitude(this._currentMirrorMode===s.Poses);break;case o.AnchorOrigin:this.rawPose=this.poseAnchorOrigin?this._getOriginPose():this.pipeline.cameraPoseDefault()}this._updateBackgroundTexture(t)}updateMatrixWorld(t){this.matrix.fromArray(this.rawPose),super.updateMatrixWorld(t)}_getOriginPose(){return this.poseAnchorOrigin?this.pipeline.cameraPoseWithOrigin(this.poseAnchorOrigin.poseCameraRelative(this._currentMirrorMode===s.Poses)):this.pipeline.cameraPoseDefault()}_updateBackgroundTexture(t){this.pipeline.cameraFrameUploadGL();let e=this.pipeline.cameraFrameTextureGL();if(!e)return;let n=t.properties.get(this.backgroundTexture);n.__webglTexture=e,n.__webglInit=!0;let a=new r.Matrix4;a.fromArray(this.pipeline.cameraFrameTextureMatrix(t.domElement.width,t.domElement.height,this._currentMirrorMode===s.Poses));let i=new r.Matrix3;i.setFromMatrix4(a),i.elements[6]=a.elements[12],i.elements[7]=a.elements[13],i.elements[8]=1,this.backgroundTexture.matrixAutoUpdate=!1,this.backgroundTexture.matrix=i}}e.Camera=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Event=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(){for(var t=0,e=this._funcs.length;t<e;t++)this._funcs[t]()}};e.Event1=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t){for(var e=0,n=this._funcs.length;e<n;e++)this._funcs[e](t)}};e.Event2=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e){for(var n=0,r=this._funcs.length;n<r;n++)this._funcs[n](t,e)}};e.Event3=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e,n){for(var r=0,a=this._funcs.length;r<a;r++)this._funcs[r](t,e,n)}};e.Event5=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e,n,r,a){for(var i=0,o=this._funcs.length;i<o;i++)this._funcs[i](t,e,n,r,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),a=new r.Pipeline;e.getDefaultPipeline=function(){return a};class i extends r.ImageTracker{constructor(t,e){super(e||a,t)}}e.ImageTracker=i;class o extends r.BarcodeFinder{constructor(t){super(t||a)}}e.BarcodeFinder=o;class s extends r.FaceTracker{constructor(t){super(t||a)}}e.FaceTracker=s;class u extends r.InstantWorldTracker{constructor(t){super(t||a)}}e.InstantWorldTracker=u;class c extends r.CameraSource{constructor(t,e){super(e||a,t)}}e.CameraSource=c;class f extends r.HTMLElementSource{constructor(t,e){super(e||a,t)}}e.HTMLElementSource=f,e.glContextSet=function(t){a.glContextSet(t)},e.onFrameUpdate=a.onFrameUpdate},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(2);function a(t){if(window.screen.orientation)switch(window.screen.orientation.type){case"portrait-primary":return t?90:270;case"landscape-secondary":return 180;case"portrait-secondary":return t?270:90;default:return 0}else if(void 0!==window.orientation)switch(window.orientation){case 0:return t?90:270;case 90:return 0;case 180:return t?270:90;case-90:return 180}return 0}e.projectionMatrix=function(t,e,n,i=.01,o=100){let s=2*t[2],u=2*t[3],c=r.mat4.create();r.mat4.frustum(c,i*(-.5-t[2])/t[0],i*(s-.5-t[2])/t[0],i*(u-.5-t[3])/t[1],i*(-.5-t[3])/t[1],i,o),c[4]*=-1,c[5]*=-1,c[6]*=-1,c[7]*=-1;let f=r.mat4.create();r.mat4.fromScaling(f,[.5*s,.5*u,1]),r.mat4.multiply(c,f,c),r.mat4.fromRotation(f,a(!1)*Math.PI/180,[0,0,1]),r.mat4.multiply(c,f,c);let _=r.vec3.create();_[0]=s,_[1]=u,_[2]=0,r.vec3.transformMat4(_,_,f);let l=Math.abs(_[0]),d=Math.abs(_[1]),h=1;return h=l/e>d/n?n/d:e/l,r.mat4.fromScaling(f,[h,h,1]),r.mat4.multiply(c,f,c),r.mat4.fromScaling(f,[2/e,2/n,1]),r.mat4.multiply(c,f,c),r.mat4.fromRotation(f,a(!1)*Math.PI/-180,[0,0,1]),r.mat4.multiply(c,c,f),c},e.cameraRotationForScreenOrientation=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(31),a=n(2),i=n(9),o=n(32),s=n(33);let u=new Map;class c{constructor(t,e,n){this._client=t,this._impl=e,this._mgr=n,this.pendingMessages=[],this.cameraTokens=new Map,this.nextCameraToken=1,this.tokensInFlight=0,this.videoTextures=[],this.cameraPixelArrays=[]}static create(t,e){let n=t.pipeline_create();return u.set(n,new c(t,n,e)),n}static get(t){return u.get(t)}frameUpdate(t){for(let e of this.pendingMessages)t.processMessages(e),this._mgr.postOutgoingMessage({t:"buf",p:this._impl,d:e},[e]);this.pendingMessages=[];let e=this._client.pipeline_camera_frame_user_data(this._impl);if(e)for(let t of this.cameraTokens)t[0]<e&&(this.videoTextures.push(t[1].texture),this.cameraTokens.delete(t[0]))}cameraTokenReturn(t,e){this.cameraPixelArrays.push(e),this.tokensInFlight--}getVideoTexture(){return this.videoTextures.pop()}destroy(){this._client.pipeline_destroy(this._impl),u.delete(this._impl)}getCurrentCameraInfo(){let t=this._client.pipeline_camera_frame_user_data(this._impl);if(t)return this.cameraTokens.get(t)}cameraFrameDrawGL(t,e,n){if(!this.glContext)return;let a=this.getCurrentCameraInfo();a&&(this._cameraDraw||(this._cameraDraw=new r.CameraDraw(this.glContext)),this._cameraDraw.drawCameraFrame(t,e,a,!0===n))}glContextSet(t,e){if(this.glContext)console.log("Warning - gl_context_set already called on this pipeline");else{this.glContext=t,e=e||[];for(let n=0;n<4;n++){let r=e[n]||t.createTexture();r&&(t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.videoTextures.push(r))}t.bindTexture(t.TEXTURE_2D,null),delete this._cameraDraw,delete this._faceDraw,delete this._faceProjectDraw}}drawFace(t,e,n,r){if(!this.glContext)return;this._faceDraw||(this._faceDraw=new o.FaceDraw(this.glContext));let i=a.mat4.create();a.mat4.multiply(i,t,e),a.mat4.multiply(i,i,n),this._faceDraw.drawFace(i,r)}drawFaceProject(t,e,n,r,a,i){this.glContext&&(this._faceProjectDraw||(this._faceProjectDraw=new s.FaceDrawProject(this.glContext)),this._faceProjectDraw.drawFace(t,e,n,r,a,i))}cameraFrameTexture(){var t;return null===(t=this.getCurrentCameraInfo())||void 0===t?void 0:t.texture}cameraFrameTextureMatrix(t,e,n){let i=this.getCurrentCameraInfo();return i?r.cameraFrameTextureMatrix(i.dataWidth,i.dataHeight,t,e,i.uvTransform,n):a.mat4.create()}cameraFrameUserFacing(){var t;return(null===(t=this.getCurrentCameraInfo())||void 0===t?void 0:t.userFacing)||!1}cameraPoseWithAttitude(t){let e=f(this.getCurrentCameraInfo(),this._client.pipeline_camera_frame_camera_attitude(this._impl));if(t){let t=a.mat4.create();a.mat4.fromScaling(t,[-1,1,1]),a.mat4.multiply(e,t,e),a.mat4.multiply(e,e,t)}return a.mat4.invert(e,e),e}processGL(){if(!this.glContext)return void console.log("No GL context for camera frames - please call gl_context_set");if(!this.currentCameraSource)return;if(this.tokensInFlight>0)return void this.currentCameraSource.getFrame(!0);let t=this.currentCameraSource.getFrame(!1);if(!t)return;let e=this.nextCameraToken++;this.cameraTokens.set(e,t);let n={d:t.data,p:this._impl,width:t.dataWidth,height:t.dataHeight,token:e,userFacing:t.userFacing,t:"cameraFrameC2S"};this.tokensInFlight++,this._mgr.postOutgoingMessage(n,[t.data])}motionAccelerometerSubmit(t,e,n,r){this._client.pipeline_motion_accelerometer_submit(this._impl,t,e,n,r)}motionRotationRateSubmit(t,e,n,r){this._client.pipeline_motion_rotation_rate_submit(this._impl,t,e,n,r)}motionAttitudeSubmit(t,e,n,r){this._client.pipeline_motion_attitude_submit(this._impl,t,e,n,r)}}function f(t,e){let n=!1;n=!!t&&t.userFacing;let r=a.mat4.create();return a.mat4.fromRotation(r,i.cameraRotationForScreenOrientation(n)*Math.PI/180,[0,0,1]),a.mat4.multiply(r,r,e),r}e.Pipeline=c,e.applyScreenCounterRotation=f},function(t,e,n){var r;
/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(a,i){"use strict";var o="model",s="name",u="type",c="vendor",f="version",_="mobile",l="tablet",d="smarttv",h={extend:function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2==0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(t,e){for(var n,r,a,i,o,s,u=0;u<e.length&&!o;){var c=e[u],f=e[u+1];for(n=r=0;n<c.length&&!o;)if(o=c[n++].exec(t))for(a=0;a<f.length;a++)s=o[++r],"object"==typeof(i=f[a])&&i.length>0?2==i.length?"function"==typeof i[1]?this[i[0]]=i[1].call(this,s):this[i[0]]=i[1]:3==i.length?"function"!=typeof i[1]||i[1].exec&&i[1].test?this[i[0]]=s?s.replace(i[1],i[2]):void 0:this[i[0]]=s?i[1].call(this,s,i[2]):void 0:4==i.length&&(this[i[0]]=s?i[3].call(this,s.replace(i[1],i[2])):void 0):this[i]=s||void 0;u+=2}},str:function(t,e){for(var n in e)if("object"==typeof e[n]&&e[n].length>0){for(var r=0;r<e[n].length;r++)if(h.has(e[n][r],t))return"?"===n?void 0:n}else if(h.has(e[n],t))return"?"===n?void 0:n;return t}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,f],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,f],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],f],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],f],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],f],[/(Avast)\/([\w\.]+)/i],[[s,"Avast Secure Browser"],f],[/(AVG)\/([\w\.]+)/i],[[s,"AVG Secure Browser"],f],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],f],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],f],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],f],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],f],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],f],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],f],[/(qqbrowserlite)\/([\w\.]+)/i],[s,f],[/(QQ)\/([\d\.]+)/i],[s,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,f],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[s,f],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,f],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,f],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,f],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],f],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[f,p.str,m.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[o,c,[u,l]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[c,"Apple"],[u,l]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[c,"Apple"],[u,d]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,o,[u,l]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[o,[c,"Amazon"],[u,l]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[o,p.str,m.device.amazon.model],[c,"Amazon"],[u,_]],[/android.+aft([bms])\sbuild/i],[o,[c,"Amazon"],[u,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,c,[u,_]],[/\((ip[honed|\s\w*]+);/i],[o,[c,"Apple"],[u,_]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,o,[u,_]],[/\(bb10;\s(\w+)/i],[o,[c,"BlackBerry"],[u,_]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[o,[c,"Asus"],[u,l]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[o,"Xperia Tablet"],[u,l]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[o,[c,"Sony"],[u,_]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,o,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[c,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[c,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[c,p.str,m.device.sprint.vendor],[o,p.str,m.device.sprint.model],[u,_]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[o,/_/g," "],[u,_]],[/(nexus\s9)/i],[o,[c,"HTC"],[u,l]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[o,[c,"Huawei"],[u,_]],[/android.+(bah2?-a?[lw]\d{2})/i],[o,[c,"Huawei"],[u,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,o,[u,_]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[c,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[c,"Microsoft"],[u,_]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[c,"Motorola"],[u,_]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[c,"Motorola"],[u,l]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,h.trim],[o,h.trim],[u,d]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[c,"Samsung"],[u,d]],[/\(dtv[\);].+(aquos)/i],[o,[c,"Sharp"],[u,d]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],o,[u,l]],[/smart-tv.+(samsung)/i],[c,[u,d],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],o,[u,_]],[/sie-(\w*)/i],[o,[c,"Siemens"],[u,_]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],o,[u,_]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[o,[c,"Acer"],[u,l]],[/android.+([vl]k\-?\d{3})\s+build/i],[o,[c,"LG"],[u,l]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],o,[u,l]],[/(lg) netcast\.tv/i],[c,o,[u,d]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[o,[c,"LG"],[u,_]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[c,o,[u,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[c,"Lenovo"],[u,l]],[/(lenovo)[_\s-]?([\w-]+)/i],[c,o,[u,_]],[/linux;.+((jolla));/i],[c,o,[u,_]],[/((pebble))app\/[\d\.]+\s/i],[c,o,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,o,[u,_]],[/crkey/i],[[o,"Chromecast"],[c,"Google"],[u,d]],[/android.+;\s(glass)\s\d/i],[o,[c,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[o,[c,"Google"],[u,l]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[o,[c,"Google"],[u,_]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[c,"Xiaomi"],[u,_]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[c,"Xiaomi"],[u,l]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[o,[c,"Meizu"],[u,_]],[/(mz)-([\w-]{2,})/i],[[c,"Meizu"],o,[u,_]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[o,[c,"OnePlus"],[u,_]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[o,[c,"RCA"],[u,l]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[o,[c,"Dell"],[u,l]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[o,[c,"Verizon"],[u,l]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],o,[u,l]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[o,[c,"NuVision"],[u,l]],[/android.+;\s(k88)\sbuild/i],[o,[c,"ZTE"],[u,l]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[o,[c,"Swiss"],[u,_]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[o,[c,"Swiss"],[u,l]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[o,[c,"Zeki"],[u,l]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],o,[u,l]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[o,[c,"Insignia"],[u,l]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[o,[c,"NextBook"],[u,l]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],o,[u,_]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],o,[u,_]],[/android.+;\s(PH-1)\s/i],[o,[c,"Essential"],[u,_]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[o,[c,"Envizen"],[u,l]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,o,[u,l]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[o,[c,"MachSpeed"],[u,l]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,o,[u,l]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[o,[c,"Rotor"],[u,l]],[/android.+(KS(.+))\s+build/i],[o,[c,"Amazon"],[u,l]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,o,[u,l]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,h.lowerize],c,o],[/[\s\/\(](smart-?tv)[;\)]/i],[[u,d]],[/(android[\w\.\s\-]{0,9});.+build/i],[o,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,f],[/rv\:([\w\.]{1,9}).+(gecko)/i],[f,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[f,p.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[f,p.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],f],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],f],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,f],[/(haiku)\s(\w+)/i],[s,f],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,f]]},g=function(t,e){if("object"==typeof t&&(e=t,t=void 0),!(this instanceof g))return new g(t,e).getResult();var n=t||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),r=e?h.extend(b,e):b;return this.getBrowser=function(){var t={name:void 0,version:void 0};return p.rgx.call(t,n,r.browser),t.major=h.major(t.version),t},this.getCPU=function(){var t={architecture:void 0};return p.rgx.call(t,n,r.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(t,n,r.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return p.rgx.call(t,n,r.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return p.rgx.call(t,n,r.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(t){return n=t,this},this};g.VERSION="0.7.21",g.BROWSER={NAME:s,MAJOR:"major",VERSION:f},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:o,VENDOR:c,TYPE:u,CONSOLE:"console",MOBILE:_,SMARTTV:d,TABLET:l,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:s,VERSION:f},g.OS={NAME:s,VERSION:f},void 0!==e?(void 0!==t&&t.exports&&(e=t.exports=g),e.UAParser=g):void 0===(r=function(){return g}.call(e,n,e,t))||(t.exports=r);var y=a&&(a.jQuery||a.Zepto);if(y&&!y.ua){var v=new g;y.ua=v.getResult(),y.ua.get=function(){return v.getUA()},y.ua.set=function(t){v.setUA(t);var e=v.getResult();for(var n in e)y.ua[n]=e[n]}}}("object"==typeof window?window:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(10),a=n(35),i=n(13),o=n(5),s=n(2);let u=1,c=new Map;class f extends a.Source{constructor(t,e){super(),this._video=t,this._pipeline=e,this._isPaused=!0,this._hadFrames=!1,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._isUploadFrame=!0,this._computedTransformRotation=-1,this._computedFrontCameraRotation=!1,this._cameraUvTransform=s.mat4.create(),this._cameraVertexTransform=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this._framebufferWidth=0,this._framebufferHeight=0,this._framebufferId=null,this._renderTexture=null;let n=this._video;this._video instanceof HTMLVideoElement?n.addEventListener("loadedmetadata",()=>{this._hadFrames=!0}):this._hadFrames=!0}static createVideoElementSource(t,e){let n=u++;return c.set(n,new f(e,t)),n}static getVideoElementSource(t){return c.get(t)}destroy(){this.pause()}pause(){this._isPaused=!0;let t=r.Pipeline.get(this._pipeline);t&&t.currentCameraSource===this&&(t.currentCameraSource=void 0)}start(){var t;this._isPaused=!1;let e=r.Pipeline.get(this._pipeline);e&&e.currentCameraSource!==this&&(null===(t=e.currentCameraSource)||void 0===t||t.pause(),e.currentCameraSource=this)}getFrame(t){let e=r.Pipeline.get(this._pipeline);if(!e)return;let n=e.glContext;if(n)try{return this._processFrame(n,this._cameraToScreenRotation,t)}catch(t){console.log("Unable to process frame")}}_processFrame(t,e,n){let a=r.Pipeline.get(this._pipeline);if(a){if(this._isUploadFrame)return this._currentVideoTexture||(this._currentVideoTexture=a.getVideoTexture()),this._uploadFrame(e,this._isUserFacing),void(this._isUploadFrame=!this._isUploadFrame);if(!n)return this._isUploadFrame=!this._isUploadFrame,this._readFrame(a,t)}}_uploadFrame(t,e){if(!this._currentVideoTexture)return;let n=r.Pipeline.get(this._pipeline);if(!n)return;let a=n.glContext;if(!a)return;a.disable(a.SCISSOR_TEST),a.disable(a.DEPTH_TEST),a.disable(a.BLEND),a.disable(a.CULL_FACE),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1),a.bindTexture(a.TEXTURE_2D,this._currentVideoTexture);const o=a.RGB,s=a.RGB,u=a.UNSIGNED_BYTE;a.texImage2D(a.TEXTURE_2D,0,o,s,u,this._video);let c=0,f=0;this._video instanceof HTMLVideoElement?(c=this._video.videoWidth,f=this._video.videoHeight):(c=this._video.width,f=this._video.height),f>c&&(f=[c,c=f][0]),this._updateTransforms(t,e);let _=this._getFramebuffer(a,i.profile.dataWidth/4,i.profile.dataHeight),l=this._getVertexBuffer(a),d=this._getIndexBuffer(a),h=this._getGreyscaleShader(a);a.bindFramebuffer(a.FRAMEBUFFER,_),a.viewport(0,0,this._framebufferWidth,this._framebufferHeight),a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.bindBuffer(a.ARRAY_BUFFER,l),a.vertexAttribPointer(h.aVertexPositionLoc,2,a.FLOAT,!1,16,0),a.enableVertexAttribArray(h.aVertexPositionLoc),a.vertexAttribPointer(h.aTextureCoordLoc,2,a.FLOAT,!1,16,8),a.enableVertexAttribArray(h.aTextureCoordLoc),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),a.useProgram(h.program),a.uniform1f(h.uTexWidthLoc,i.profile.dataWidth),a.uniformMatrix4fv(h.uUvTransformLoc,!1,this._cameraUvTransform),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this._currentVideoTexture),a.uniform1i(h.uSamplerLoc,0),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0),a.disableVertexAttribArray(h.aVertexPositionLoc),a.disableVertexAttribArray(h.aTextureCoordLoc),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindBuffer(a.ARRAY_BUFFER,null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null),a.useProgram(null),a.bindTexture(a.TEXTURE_2D,null)}_readFrame(t,e){if(!this._currentVideoTexture)throw new Error("No video texture");let n=this._currentVideoTexture;this._currentVideoTexture=void 0;let r=i.profile.dataWidth*i.profile.dataHeight,a=t.cameraPixelArrays.pop();for(;a&&a.byteLength!==r;)a=t.cameraPixelArrays.pop();a||(console.log("Allocating new pixel buffer"),a=new ArrayBuffer(r));let o=new Uint8Array(a),s=this._getFramebuffer(e,i.profile.dataWidth/4,i.profile.dataHeight);return e.bindFramebuffer(e.FRAMEBUFFER,s),e.readPixels(0,0,this._framebufferWidth,this._framebufferHeight,e.RGBA,e.UNSIGNED_BYTE,o),e.bindFramebuffer(e.FRAMEBUFFER,null),{uvTransform:this._cameraUvTransform,data:a,texture:n,dataWidth:i.profile.dataWidth,dataHeight:i.profile.dataHeight,userFacing:this._computedFrontCameraRotation}}_updateTransforms(t,e){t==this._computedTransformRotation&&e==this._computedFrontCameraRotation||(this._computedTransformRotation=t,this._computedFrontCameraRotation=e,this._cameraUvTransform=this._getCameraUvTransform(),this._cameraVertexTransform=this._getCameraVertexTransform())}_getCameraUvTransform(){switch(this._computedTransformRotation){case 270:return new Float32Array([0,1,0,0,-1,0,0,0,0,0,1,0,1,0,0,1]);case 180:return new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,1,1,0,1]);case 90:return new Float32Array([0,-1,0,0,1,0,0,0,0,0,1,0,0,1,0,1])}return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}_getCameraVertexTransform(){let t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];if(!this._computedFrontCameraRotation)return t;switch(this._computedTransformRotation){case 0:case 90:case 180:t[0]=-1;break;case 270:t[5]=-1}return t}_getFramebuffer(t,e,n){if(this._framebufferWidth===e&&this._framebufferHeight===n&&this._framebufferId)return this._framebufferId;if(this._framebufferId&&(t.deleteFramebuffer(this._framebufferId),this._framebufferId=null),this._renderTexture&&(t.deleteTexture(this._renderTexture),this._renderTexture=null),this._framebufferId=t.createFramebuffer(),!this._framebufferId)throw new Error("Unable to create framebuffer");if(t.bindFramebuffer(t.FRAMEBUFFER,this._framebufferId),this._renderTexture=t.createTexture(),!this._renderTexture)throw new Error("Unable to create render texture");t.bindTexture(t.TEXTURE_2D,this._renderTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._renderTexture,0);let r=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r!=t.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer not complete: "+r.toString());return console.log("Framebuffer complete!"),this._framebufferWidth=e,this._framebufferHeight=n,console.log("Set up greyscale conversion framebuffer: %i x %i\n",this._framebufferWidth,this._framebufferHeight),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this._framebufferId}_getVertexBuffer(t){if(this._vertexBuffer)return this._vertexBuffer;if(this._vertexBuffer=t.createBuffer(),!this._vertexBuffer)throw new Error("Unable to create vertex buffer");t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer);let e=new Float32Array([-1,-1,0,0,-1,1,0,1,1,1,1,1,1,-1,1,0]);return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),this._vertexBuffer}_getIndexBuffer(t){if(this._indexBuffer)return this._indexBuffer;if(this._indexBuffer=t.createBuffer(),!this._indexBuffer)throw new Error("Unable to create index buffer");t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);let e=new Uint16Array([0,1,2,0,2,3]);return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW),this._indexBuffer}_getGreyscaleShader(t){if(this._greyscaleShader)return this._greyscaleShader;let e=t.createProgram();if(!e)throw new Error("Unable to create program");let n=o.compileShader(t,t.VERTEX_SHADER,_),r=o.compileShader(t,t.FRAGMENT_SHADER,l);t.attachShader(e,n),t.attachShader(e,r),o.linkProgram(t,e);let a=t.getUniformLocation(e,"uTexWidth");if(!a)throw new Error("Unable to get uniform location uTexWidth");let i=t.getUniformLocation(e,"uUvTransform");if(!i)throw new Error("Unable to get uniform location uUvTransform");let s=t.getUniformLocation(e,"uSampler");if(!s)throw new Error("Unable to get uniform location uSampler");return this._greyscaleShader={program:e,aVertexPositionLoc:t.getAttribLocation(e,"aVertexPosition"),aTextureCoordLoc:t.getAttribLocation(e,"aTextureCoord"),uTexWidthLoc:a,uUvTransformLoc:i,uSamplerLoc:s},this._greyscaleShader}}e.HTMLElementSource=f;let _="\n    attribute vec4 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    varying highp vec2 vTextureCoord1;\n    varying highp vec2 vTextureCoord2;\n    varying highp vec2 vTextureCoord3;\n    varying highp vec2 vTextureCoord4;\n\n    uniform float uTexWidth;\n\tuniform mat4 uUvTransform;\n\n    void main(void) {\n      highp vec2 offset1 = vec2(1.5 / uTexWidth, 0);\n      highp vec2 offset2 = vec2(0.5 / uTexWidth, 0);\n\n      gl_Position = aVertexPosition;\n      vTextureCoord1 = (uUvTransform * vec4(aTextureCoord - offset1, 0, 1)).xy;\n      vTextureCoord2 = (uUvTransform * vec4(aTextureCoord - offset2, 0, 1)).xy;\n      vTextureCoord3 = (uUvTransform * vec4(aTextureCoord + offset2, 0, 1)).xy;\n      vTextureCoord4 = (uUvTransform * vec4(aTextureCoord + offset1, 0, 1)).xy;\n    }\n",l="\n  varying highp vec2 vTextureCoord1;\n  varying highp vec2 vTextureCoord2;\n  varying highp vec2 vTextureCoord3;\n  varying highp vec2 vTextureCoord4;\n\n  uniform sampler2D uSampler;\n\n  const lowp vec3 colorWeights = vec3(77.0 / 256.0, 150.0 / 256.0, 29.0 / 256.0);\n\n  void main(void) {\n    lowp vec4 outpx;\n\n    outpx.r = dot(colorWeights, texture2D(uSampler, vTextureCoord1).xyz);\n    outpx.g = dot(colorWeights, texture2D(uSampler, vTextureCoord2).xyz);\n    outpx.b = dot(colorWeights, texture2D(uSampler, vTextureCoord3).xyz);\n    outpx.a = dot(colorWeights, texture2D(uSampler, vTextureCoord4).xyz);\n\n    gl_FragColor = outpx;\n  }\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(11);!function(t){t[t.OBJECT_URL=0]="OBJECT_URL",t[t.SRC_OBJECT=1]="SRC_OBJECT"}(e.EmbeddedVideoImplementation||(e.EmbeddedVideoImplementation={})),e.profile={deviceMotionMutliplier:-1,blacklisted:!1,showGyroPermissionsWarningIfNecessary:!1,showSafariPermissionsResetIfNecessary:!1,requestHighFrameRate:!1,videoWidth:640,videoHeight:480,dataWidth:320,dataHeight:240,videoElementInDOM:!1},window.zeeProfile=e.profile;let a=new r.UAParser;switch(a.getBrowser().name){case"Chrome":break;case"Safari":e.profile.deviceMotionMutliplier=1;break;case"Mobile Safari":e.profile.deviceMotionMutliplier=1;let t=a.getOS().version;if(t){let n=t.split(".");if(n.length>=2){const t=parseInt(n[0]),r=parseInt(n[1]);(t<11||11===t&&r<3)&&(e.profile.blacklisted=!0),(t<12||12===t&&r<2)&&(e.profile.videoElementInDOM=!0),(12===t&&r>=2||t>=13)&&(e.profile.showGyroPermissionsWarningIfNecessary=!0),t>=13&&(e.profile.showSafariPermissionsResetIfNecessary=!0),(t>=12&&r>1||t>=13)&&navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().frameRate&&(e.profile.requestHighFrameRate=!0,e.profile.videoHeight=360,e.profile.dataHeight=180)}}console.log(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(15);e.camera=r;const a=n(53);e.instant_tracker=a;const i=n(54);e.image_tracker=i;const o=n(55);e.face_tracker=o;const s=n(56);e.face_mesh=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);AFRAME.registerSystem("zappar-camera",{init:function(){this.camera=new r.Camera,this._callbacks=new Set},emitCallbacks:function(){for(let t of this._callbacks)t()},registerForCallbacks:function(t){this._callbacks.add(t)},unregisterForCallbacks:function(t){this._callbacks.delete(t)}});const a=AFRAME.registerComponent("zappar-camera",{schema:{userFacing:{type:"boolean",default:!1},userCameraMirrorMode:{type:"string",default:"poses"},rearCameraMirrorMode:{type:"string",default:"no-mirror"},poseMode:{type:"string",default:"default"},poseAnchorOrigin:{type:"selector"}},update:function(t){let e=this.system.camera;switch(t.userFacing!==this.data.userFacing&&this.system.camera.start(this.data.userFacing),this.data.poseMode){case"attitude":e.poseMode=r.CameraPoseMode.Attitude;break;case"anchor-origin":e.poseMode=r.CameraPoseMode.AnchorOrigin;break;default:e.poseMode=r.CameraPoseMode.Default}switch(this.data.userCameraMirrorMode){case"poses":e.userCameraMirrorMode=r.CameraMirrorMode.Poses;break;case"css":e.userCameraMirrorMode=r.CameraMirrorMode.CSS;break;case"no-mirror":e.userCameraMirrorMode=r.CameraMirrorMode.None;break;default:e.userCameraMirrorMode=r.CameraMirrorMode.Poses}switch(this.data.rearCameraMirrorMode){case"poses":e.rearCameraMirrorMode=r.CameraMirrorMode.Poses;break;case"css":e.rearCameraMirrorMode=r.CameraMirrorMode.CSS;break;case"no-mirror":default:e.rearCameraMirrorMode=r.CameraMirrorMode.None}},init:function(){let t=document.querySelector("a-scene");t.setAttribute("vr-mode-ui","enabled: false");let e=t.object3D,n=t.renderer;r.glContextSet(n.getContext()),e.background=this.system.camera.backgroundTexture},tick:function(){let t=this.system.camera,e=document.querySelector("a-scene").renderer;if(this.data&&this.data.poseAnchorOrigin&&this.data.poseAnchorOrigin.components){let e=this.data.poseAnchorOrigin.components;e["zappar-face"]?t.poseAnchorOrigin=e["zappar-face"].trackerGroup.currentAnchor:e["zappar-image"]?t.poseAnchorOrigin=e["zappar-image"].trackerGroup.currentAnchor:e["zappar-instant"]&&(t.poseAnchorOrigin=e["zappar-instant"].trackerGroup.currentAnchor)}this.system.camera.updateFrame(e),this.el.object3DMap.camera.matrixAutoUpdate=!1,this.el.object3DMap.camera.projectionMatrix=t.projectionMatrix,this.el.object3DMap.camera.projectionMatrixInverse=t.projectionMatrixInverse,this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.matrix.fromArray(t.rawPose),this.system.emitCallbacks()}});e.default=a},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(7),i=n(0);e.ImageTracker=class{constructor(t,e){this._pipeline=t,this.onVisible=new a.Event1,this.onNotVisible=new a.Event1,this.onNewAnchor=new a.Event1,this.visible=new Set,this.anchors=new Map,this._visibleLastFrame=new Set,this._frameUpdate=()=>{let t=new Set,e=this.visible;this.visible=this._visibleLastFrame,this._visibleLastFrame=e,this.visible.clear();let n=this._z.image_tracker_anchor_count(this._impl);for(let e=0;e<n;e++){let n=this._z.image_tracker_anchor_id(this._impl,e),r=this.anchors.get(n),i=!1;r||(r={onVisible:new a.Event,onNotVisible:new a.Event,id:n,poseCameraRelative:t=>this._z.image_tracker_anchor_pose_camera_relative(this._impl,e,!0===t),pose:(t,n)=>this._z.image_tracker_anchor_pose(this._impl,e,t,!0===n),visible:!0},i=!0,this.anchors.set(n,r),t.add(r)),r.visible=!0,this.visible.add(r)}for(let e of t)this.onNewAnchor.emit(e);for(let t of this.visible)this._visibleLastFrame.has(t)?this._visibleLastFrame.delete(t):(this.onVisible.emit(t),t.onVisible.emit());for(let t of this._visibleLastFrame)this.onNotVisible.emit(t),t.onNotVisible.emit()},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=i.z(),this._impl=this._z.image_tracker_create(this._pipeline._getImpl()),e&&this.loadTarget(e)}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this.anchors.clear(),this.visible.clear(),this._z.image_tracker_destroy(this._impl)}loadTarget(t){return r(this,void 0,void 0,(function*(){"string"==typeof t&&(t=yield(yield fetch(t)).arrayBuffer()),this._z.image_tracker_target_load_from_memory(this._impl,t)}))}get enabled(){return this._z.image_tracker_enabled(this._impl)}set enabled(t){this._z.image_tracker_enabled_set(this._impl,t)}}},function(t,e,n){"use strict";if(Object.defineProperty(e,"__esModule",{value:!0}),document.currentScript){const t=new URL(document.currentScript.src);let e=t.toString();if(t.pathname){let t=e.split("/");t.pop(),e=t.join("/")+"/"}console.log("Current script: ",e),n.p=e+n.p}const r=n(18);e.initialize=function(){return r.initialize()}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(19),i=n(22),o=n(9),s=n(2),u=n(23),c=n(29),f=n(30),_=n(10),l=n(34),d=n(12);let h;e.initialize=function(){if(h)return h;u.launchWorker();let t=new a.zappar_client(t=>{u.messageManager.postOutgoingMessage({t:"zappar",d:t},[t])});return u.messageManager.onIncomingMessage.bind(e=>{var n,r;switch(e.t){case"zappar":null===(n=_.Pipeline.get(e.p))||void 0===n||n.pendingMessages.push(e.d);break;case"buf":t.serializer.bufferReturn(e.d);break;case"cameraFrameRecycleS2C":let a=e;null===(r=_.Pipeline.get(a.p))||void 0===r||r.cameraTokenReturn(a.token,a.d)}}),h=Object.assign(Object.assign({},t.impl),{camera_default_device_id:t=>t?l.CameraSource.USER_DEFAULT_DEVICE_ID:l.CameraSource.DEFAULT_DEVICE_ID,camera_source_create:(t,e)=>l.CameraSource.create(t,e),camera_source_destroy:t=>{var e;return null===(e=l.CameraSource.get(t))||void 0===e?void 0:e.destroy()},camera_source_pause:t=>{var e;return null===(e=l.CameraSource.get(t))||void 0===e?void 0:e.pause()},camera_source_start:t=>{var e;return null===(e=l.CameraSource.get(t))||void 0===e?void 0:e.start()},pipeline_create:()=>_.Pipeline.create(t.impl,u.messageManager),pipeline_frame_update:e=>{var n;return null===(n=_.Pipeline.get(e))||void 0===n?void 0:n.frameUpdate(t)},pipeline_camera_frame_draw_gl:(t,e,n,r)=>{var a;null===(a=_.Pipeline.get(t))||void 0===a||a.cameraFrameDrawGL(e,n,r)},draw_plane:(t,e,n,r,a)=>{i.drawPlane(t,e,n,r,a)},pipeline_draw_face:(t,e,n,r,a)=>{var i;let o=f.getFaceMesh(a);if(!o)return console.log("Warning: attempting to call draw_face on a destroyed zappar_face_mesh_t"),new Uint16Array;null===(i=_.Pipeline.get(t))||void 0===i||i.drawFace(e,n,r,o)},pipeline_draw_face_project:(t,e,n,r,a,i,o)=>{var s;null===(s=_.Pipeline.get(t))||void 0===s||s.drawFaceProject(e,n,r,a,i,o)},projection_matrix_from_camera_model:o.projectionMatrix,pipeline_process_gl:t=>{var e;return null===(e=_.Pipeline.get(t))||void 0===e?void 0:e.processGL()},pipeline_gl_context_set:(t,e,n)=>{var r;return null===(r=_.Pipeline.get(t))||void 0===r?void 0:r.glContextSet(e,n)},pipeline_camera_frame_upload_gl:()=>{},pipeline_camera_frame_texture_gl:t=>{var e;return null===(e=_.Pipeline.get(t))||void 0===e?void 0:e.cameraFrameTexture()},pipeline_camera_frame_texture_matrix:(t,e,n,r)=>{var a;return(null===(a=_.Pipeline.get(t))||void 0===a?void 0:a.cameraFrameTextureMatrix(e,n,r))||s.mat4.create()},pipeline_camera_frame_user_facing:t=>{var e;return(null===(e=_.Pipeline.get(t))||void 0===e?void 0:e.cameraFrameUserFacing())||!1},pipeline_camera_pose_default:()=>s.mat4.create(),pipeline_camera_pose_with_attitude:(t,e)=>{var n;return(null===(n=_.Pipeline.get(t))||void 0===n?void 0:n.cameraPoseWithAttitude(e))||s.mat4.create()},pipeline_camera_pose_with_origin:(t,e)=>{let n=s.mat4.create();return s.mat4.invert(n,e),n},instant_world_tracker_anchor_pose_camera_relative:(e,n)=>{let r=_.applyScreenCounterRotation(void 0,t.impl.instant_world_tracker_anchor_pose_raw(e));if(n){let t=s.mat4.create();s.mat4.fromScaling(t,[-1,1,1]),s.mat4.multiply(r,t,r),s.mat4.multiply(r,r,t)}return r},instant_world_tracker_anchor_pose:(e,n,r)=>{let a=_.applyScreenCounterRotation(void 0,t.impl.instant_world_tracker_anchor_pose_raw(e));if(r){let t=s.mat4.create();s.mat4.fromScaling(t,[-1,1,1]),s.mat4.multiply(a,t,a),s.mat4.multiply(a,a,t)}return s.mat4.multiply(a,n,a),a},image_tracker_anchor_pose_camera_relative:(e,n,r)=>{let a=_.applyScreenCounterRotation(void 0,t.impl.image_tracker_anchor_pose_raw(e,n));if(r){let t=s.mat4.create();s.mat4.fromScaling(t,[-1,1,1]),s.mat4.multiply(a,t,a),s.mat4.multiply(a,a,t)}return a},image_tracker_anchor_pose:(e,n,r,a)=>{let i=_.applyScreenCounterRotation(void 0,t.impl.image_tracker_anchor_pose_raw(e,n));if(a){let t=s.mat4.create();s.mat4.fromScaling(t,[-1,1,1]),s.mat4.multiply(i,t,i),s.mat4.multiply(i,i,t)}return s.mat4.multiply(i,r,i),i},face_tracker_anchor_pose_camera_relative:(e,n,r)=>{let a=_.applyScreenCounterRotation(void 0,t.impl.face_tracker_anchor_pose_raw(e,n));if(r){let t=s.mat4.create();s.mat4.fromScaling(t,[-1,1,1]),s.mat4.multiply(a,t,a),s.mat4.multiply(a,a,t)}return a},face_tracker_anchor_pose:(e,n,r,a)=>{let i=_.applyScreenCounterRotation(void 0,t.impl.face_tracker_anchor_pose_raw(e,n));if(a){let t=s.mat4.create();s.mat4.fromScaling(t,[-1,1,1]),s.mat4.multiply(i,t,i),s.mat4.multiply(i,i,t)}return s.mat4.multiply(i,r,i),i},face_tracker_model_load_default:t=>r(this,void 0,void 0,(function*(){yield function(t){var e;return r(this,void 0,void 0,(function*(){let r=n(37).default,a=yield fetch(r),i=yield a.arrayBuffer();null===(e=h)||void 0===e||e.face_tracker_model_load_from_memory(t,i)}))}(t)})),face_mesh_create:()=>f.createFaceMesh(),face_mesh_destroy:t=>{f.destroyFaceMesh(t)},face_mesh_indices:t=>{let e=f.getFaceMesh(t);return e?e.getIndices():(console.log("Warning: attempting to call face_mesh_indices on a destroyed zappar_face_mesh_t"),new Uint16Array)},face_mesh_indices_size:t=>{let e=f.getFaceMesh(t);return e?e.getIndices().length:(console.log("Warning: attempting to call face_mesh_indices_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_uvs:t=>{let e=f.getFaceMesh(t);return e?e.getUVs():(console.log("Warning: attempting to call face_mesh_uvs on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_uvs_size:t=>{let e=f.getFaceMesh(t);return e?e.getUVs().length:(console.log("Warning: attempting to call face_mesh_uvs_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_vertices:t=>{let e=f.getFaceMesh(t);return e?e.getVertices():(console.log("Warning: attempting to call face_mesh_vertices on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_vertices_size:t=>{let e=f.getFaceMesh(t);return e?e.getVertices().length:(console.log("Warning: attempting to call face_mesh_vertices_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_normals:t=>{let e=f.getFaceMesh(t);return e?e.getNormals():(console.log("Warning: attempting to call face_mesh_normals on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_normals_size:t=>{let e=f.getFaceMesh(t);return e?e.getNormals().length:(console.log("Warning: attempting to call face_mesh_normals_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_load_from_memory:(t,e)=>{let n=f.getFaceMesh(t);n?n.loadFromMemory(e):console.log("Warning: attempting to call face_mesh_load_from_memory on a destroyed zappar_face_mesh_t")},face_mesh_update:(t,e,n,r)=>{let a=f.getFaceMesh(t);a?a.update(e,n,r):console.log("Warning: attempting to call face_mesh_update on a destroyed zappar_face_mesh_t")},face_mesh_load_default:t=>r(this,void 0,void 0,(function*(){let e=f.getFaceMesh(t);if(!e)return void console.log("Warning: attempting to call face_mesh_load_default on a destroyed zappar_face_mesh_t");let r=n(36).default,a=yield fetch(r);e.loadFromMemory(yield a.arrayBuffer())})),face_mesh_loaded_version:t=>{let e=f.getFaceMesh(t);return e?e.getModelVersion():(console.log("Warning: attempting to call face_mesh_load_default on a destroyed zappar_face_mesh_t"),-1)},html_element_source_create:(t,e)=>d.HTMLElementSource.createVideoElementSource(t,e),html_element_source_start:t=>{var e;return null===(e=d.HTMLElementSource.getVideoElementSource(t))||void 0===e?void 0:e.start()},html_element_source_pause:t=>{var e;return null===(e=d.HTMLElementSource.getVideoElementSource(t))||void 0===e?void 0:e.pause()},html_element_source_destroy:t=>{var e;return null===(e=d.HTMLElementSource.getVideoElementSource(t))||void 0===e?void 0:e.destroy()},permission_granted_all:c.permissionGrantedAll,permission_granted_camera:c.permissionGrantedCamera,permission_granted_motion:c.permissionGrantedMotion,permission_denied_any:c.permissionDeniedAny,permission_denied_camera:c.permissionDeniedCamera,permission_denied_motion:c.permissionDeniedMotion,permission_request_motion:c.permissionRequestMotion,permission_request_camera:c.permissionRequestCamera,permission_request_all:c.permissionRequestAll,permission_request_ui:c.permissionRequestUI,permission_request_ui_promise:c.permissionRequestUI,permission_denied_ui:c.permissionDeniedUI}),h}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(20),a=n(21);e.zappar_client=class{constructor(t){this._messageSender=t,this._globalState={},this.serializer=new r.MessageSerializer(t=>{this._messageSender(t)}),this.deserializer=new a.MessageDeserializer,this._latestId=1,this._pipeline_state_by_instance=new Map,this._camera_source_state_by_instance=new Map,this._image_tracker_state_by_instance=new Map,this._face_tracker_state_by_instance=new Map,this._face_mesh_state_by_instance=new Map,this._barcode_finder_state_by_instance=new Map,this._instant_world_tracker_state_by_instance=new Map,this.impl={pipeline_create:()=>{let t=this._latestId++,e={current_frame_user_data:0,camera_model:new Float32Array([380,380,160,120,0,0]),camera_pose:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),camera_frame_camera_attitude:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),frame_number:0};return this._pipeline_state_by_instance.set(t,e),this.serializer.sendMessage(26,e=>{e.type(t)}),t},pipeline_destroy:t=>{if(!this._pipeline_state_by_instance.get(t))throw new Error("This object has been destroyed");this._pipeline_state_by_instance.delete(t),this.serializer.sendMessage(27,e=>{e.type(t)})},pipeline_frame_update:t=>{if(!this._pipeline_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(9,e=>{e.type(t)})},pipeline_frame_number:t=>{let e=this._pipeline_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.frame_number},pipeline_camera_model:t=>{let e=this._pipeline_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.camera_model},pipeline_camera_frame_user_data:t=>{let e=this._pipeline_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.current_frame_user_data},pipeline_camera_frame_submit:(t,e,n,r,a,i)=>{if(!this._pipeline_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(8,o=>{o.type(t),o.dataWithLength(e),o.int(n),o.int(r),o.int(a),o.matrix4x4(i)})},pipeline_camera_frame_camera_attitude:t=>{let e=this._pipeline_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.camera_frame_camera_attitude},pipeline_motion_accelerometer_submit:(t,e,n,r,a)=>{if(!this._pipeline_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(10,i=>{i.type(t),i.timestamp(e),i.float(n),i.float(r),i.float(a)})},pipeline_motion_rotation_rate_submit:(t,e,n,r,a)=>{if(!this._pipeline_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(11,i=>{i.type(t),i.timestamp(e),i.float(n),i.float(r),i.float(a)})},pipeline_motion_attitude_submit:(t,e,n,r,a)=>{if(!this._pipeline_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(12,i=>{i.type(t),i.timestamp(e),i.float(n),i.float(r),i.float(a)})},camera_source_create:(t,e)=>{let n=this._latestId++;return this._camera_source_state_by_instance.set(n,{}),this.serializer.sendMessage(28,r=>{r.type(n),r.type(t),r.string(e)}),n},camera_source_destroy:t=>{if(!this._camera_source_state_by_instance.get(t))throw new Error("This object has been destroyed");this._camera_source_state_by_instance.delete(t),this.serializer.sendMessage(29,e=>{e.type(t)})},image_tracker_create:t=>{let e=this._latestId++;return this._image_tracker_state_by_instance.set(e,{enabled:!0,target_loaded_version:-1,anchor_count:0,anchor_id:[],anchor_pose:[]}),this.serializer.sendMessage(2,n=>{n.type(e),n.type(t)}),e},image_tracker_destroy:t=>{if(!this._image_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this._image_tracker_state_by_instance.delete(t),this.serializer.sendMessage(13,e=>{e.type(t)})},image_tracker_target_load_from_memory:(t,e)=>{if(!this._image_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(4,n=>{n.type(t),n.dataWithLength(e)})},image_tracker_target_loaded_version:t=>{let e=this._image_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.target_loaded_version},image_tracker_enabled:t=>{let e=this._image_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.enabled},image_tracker_enabled_set:(t,e)=>{if(!this._image_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(3,n=>{n.type(t),n.bool(e)})},image_tracker_anchor_count:t=>{let e=this._image_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.anchor_count},image_tracker_anchor_id:(t,e)=>{let n=this._image_tracker_state_by_instance.get(t);if(!n)throw new Error("This object has been destroyed");return n.anchor_id[e]},image_tracker_anchor_pose_raw:(t,e)=>{let n=this._image_tracker_state_by_instance.get(t);if(!n)throw new Error("This object has been destroyed");return n.anchor_pose[e]},face_tracker_create:t=>{let e=this._latestId++;return this._face_tracker_state_by_instance.set(e,{enabled:!0,model_loaded:-1,max_faces:1,anchor_count:0,anchor_id:[],anchor_pose:[],anchor_identity_coefficients:[],anchor_expression_coefficients:[]}),this.serializer.sendMessage(19,n=>{n.type(e),n.type(t)}),e},face_tracker_destroy:t=>{if(!this._face_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this._face_tracker_state_by_instance.delete(t),this.serializer.sendMessage(20,e=>{e.type(t)})},face_tracker_model_load_from_memory:(t,e)=>{if(!this._face_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(21,n=>{n.type(t),n.dataWithLength(e)})},face_tracker_model_loaded_version:t=>{let e=this._face_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.model_loaded},face_tracker_enabled_set:(t,e)=>{if(!this._face_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(22,n=>{n.type(t),n.bool(e)})},face_tracker_enabled:t=>{let e=this._face_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.enabled},face_tracker_max_faces_set:(t,e)=>{if(!this._face_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(23,n=>{n.type(t),n.int(e)})},face_tracker_max_faces:t=>{let e=this._face_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.max_faces},face_tracker_anchor_count:t=>{let e=this._face_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.anchor_count},face_tracker_anchor_id:(t,e)=>{let n=this._face_tracker_state_by_instance.get(t);if(!n)throw new Error("This object has been destroyed");return n.anchor_id[e]},face_tracker_anchor_pose_raw:(t,e)=>{let n=this._face_tracker_state_by_instance.get(t);if(!n)throw new Error("This object has been destroyed");return n.anchor_pose[e]},face_tracker_anchor_identity_coefficients:(t,e)=>{let n=this._face_tracker_state_by_instance.get(t);if(!n)throw new Error("This object has been destroyed");return n.anchor_identity_coefficients[e]},face_tracker_anchor_expression_coefficients:(t,e)=>{let n=this._face_tracker_state_by_instance.get(t);if(!n)throw new Error("This object has been destroyed");return n.anchor_expression_coefficients[e]},face_mesh_create:()=>{let t=this._latestId++;return this._face_mesh_state_by_instance.set(t,{}),this.serializer.sendMessage(24,e=>{e.type(t)}),t},face_mesh_destroy:t=>{if(!this._face_mesh_state_by_instance.get(t))throw new Error("This object has been destroyed");this._face_mesh_state_by_instance.delete(t),this.serializer.sendMessage(25,e=>{e.type(t)})},barcode_finder_create:t=>{let e=this._latestId++;return this._barcode_finder_state_by_instance.set(e,{enabled:!0,number_found:0,found_text:[],found_format:[],formats:131071}),this.serializer.sendMessage(15,n=>{n.type(e),n.type(t)}),e},barcode_finder_destroy:t=>{if(!this._barcode_finder_state_by_instance.get(t))throw new Error("This object has been destroyed");this._barcode_finder_state_by_instance.delete(t),this.serializer.sendMessage(16,e=>{e.type(t)})},barcode_finder_enabled_set:(t,e)=>{if(!this._barcode_finder_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(17,n=>{n.type(t),n.bool(e)})},barcode_finder_enabled:t=>{let e=this._barcode_finder_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.enabled},barcode_finder_found_number:t=>{let e=this._barcode_finder_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.number_found},barcode_finder_found_text:(t,e)=>{let n=this._barcode_finder_state_by_instance.get(t);if(!n)throw new Error("This object has been destroyed");return n.found_text[e]},barcode_finder_found_format:(t,e)=>{let n=this._barcode_finder_state_by_instance.get(t);if(!n)throw new Error("This object has been destroyed");return n.found_format[e]},barcode_finder_formats:t=>{let e=this._barcode_finder_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.formats},barcode_finder_formats_set:(t,e)=>{if(!this._barcode_finder_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(18,n=>{n.type(t),n.barcodeFormat(e)})},instant_world_tracker_create:t=>{let e=this._latestId++,n={enabled:!0,pose:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};return this._instant_world_tracker_state_by_instance.set(e,n),this.serializer.sendMessage(5,n=>{n.type(e),n.type(t)}),e},instant_world_tracker_destroy:t=>{if(!this._instant_world_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this._instant_world_tracker_state_by_instance.delete(t),this.serializer.sendMessage(14,e=>{e.type(t)})},instant_world_tracker_enabled_set:(t,e)=>{if(!this._instant_world_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(6,n=>{n.type(t),n.bool(e)})},instant_world_tracker_enabled:t=>{let e=this._instant_world_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.enabled},instant_world_tracker_anchor_pose_raw:t=>{let e=this._instant_world_tracker_state_by_instance.get(t);if(!e)throw new Error("This object has been destroyed");return e.pose},instant_world_tracker_anchor_pose_set_from_camera_offset:(t,e,n,r,a)=>{if(!this._instant_world_tracker_state_by_instance.get(t))throw new Error("This object has been destroyed");this.serializer.sendMessage(7,i=>{i.type(t),i.float(e),i.float(n),i.float(r),i.instantTrackerTransformOrientation(a)})}}}processMessages(t){this.deserializer.setData(t),this.deserializer.forMessages((t,e)=>{switch(t){case 7:{let t=e.type(),n=this._pipeline_state_by_instance.get(t);if(!n)return;n.frame_number=e.int();break}case 6:{let t=e.type(),n=this._pipeline_state_by_instance.get(t);if(!n)return;n.camera_model=e.cameraModel();break}case 5:{let t=e.type(),n=this._pipeline_state_by_instance.get(t);if(!n)return;n.current_frame_user_data=e.int();break}case 11:{let t=e.type(),n=this._pipeline_state_by_instance.get(t);if(!n)return;n.camera_frame_camera_attitude=e.matrix4x4();break}case 18:{let t=e.type(),n=this._image_tracker_state_by_instance.get(t);if(!n)return;n.target_loaded_version=e.int();break}case 1:{let t=e.type(),n=this._image_tracker_state_by_instance.get(t);if(!n)return;n.anchor_count=e.int();break}case 2:{let t=e.type(),n=this._image_tracker_state_by_instance.get(t);if(!n)return;let r=e.int();n.anchor_id[r]=e.string();break}case 3:{let t=e.type(),n=this._image_tracker_state_by_instance.get(t);if(!n)return;let r=e.int();n.anchor_pose[r]=e.matrix4x4();break}case 17:{let t=e.type(),n=this._face_tracker_state_by_instance.get(t);if(!n)return;n.model_loaded=e.int();break}case 12:{let t=e.type(),n=this._face_tracker_state_by_instance.get(t);if(!n)return;n.anchor_count=e.int();break}case 13:{let t=e.type(),n=this._face_tracker_state_by_instance.get(t);if(!n)return;let r=e.int();n.anchor_id[r]=e.string();break}case 14:{let t=e.type(),n=this._face_tracker_state_by_instance.get(t);if(!n)return;let r=e.int();n.anchor_pose[r]=e.matrix4x4();break}case 15:{let t=e.type(),n=this._face_tracker_state_by_instance.get(t);if(!n)return;let r=e.int();n.anchor_identity_coefficients[r]=e.identityCoefficients();break}case 16:{let t=e.type(),n=this._face_tracker_state_by_instance.get(t);if(!n)return;let r=e.int();n.anchor_expression_coefficients[r]=e.expressionCoefficients();break}case 8:{let t=e.type(),n=this._barcode_finder_state_by_instance.get(t);if(!n)return;n.number_found=e.int();break}case 9:{let t=e.type(),n=this._barcode_finder_state_by_instance.get(t);if(!n)return;let r=e.int();n.found_text[r]=e.string();break}case 10:{let t=e.type(),n=this._barcode_finder_state_by_instance.get(t);if(!n)return;let r=e.int();n.found_format[r]=e.barcodeFormat();break}case 4:{let t=e.type(),n=this._instant_world_tracker_state_by_instance.get(t);if(!n)return;n.pose=e.matrix4x4();break}}})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MessageSerializer=class{constructor(t){this._messageSender=t,this._freeBufferPool=[],this._buffer=new ArrayBuffer(16),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1,this._timeoutSet=!1,this._appender={int:t=>this.int(t),bool:t=>this.int(t?1:0),float:t=>this.float(t),string:t=>this.string(t),dataWithLength:t=>this.arrayBuffer(t),type:t=>this.int(t),matrix4x4:t=>this.float32ArrayBuffer(t),identityCoefficients:t=>this.float32ArrayBuffer(t),expressionCoefficients:t=>this.float32ArrayBuffer(t),cameraModel:t=>this.float32ArrayBuffer(t),timestamp:t=>this.double(t),barcodeFormat:t=>this.int(t),instantTrackerTransformOrientation:t=>this.int(t)},this._freeBufferPool.push(new ArrayBuffer(16)),this._freeBufferPool.push(new ArrayBuffer(16))}bufferReturn(t){this._freeBufferPool.push(t)}_ensureArrayBuffer(t){let e=4*(this._offset+t+8);if(this._buffer&&this._buffer.byteLength>=e)return;let n=void 0;if(!n){let t=e;t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,console.log("Creating buffer with size: ",t),n=new ArrayBuffer(t)}let r=this._buffer?this._i32View:void 0;this._buffer=n,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),r&&this._i32View.set(r.subarray(0,this._offset))}sendMessage(t,e){this._ensureArrayBuffer(4),this._startOffset=this._offset,this._i32View[this._offset+1]=t,this._offset+=2,e(this._appender),this._i32View[this._startOffset]=this._offset-this._startOffset,this._startOffset=-1,!1===this._timeoutSet&&(this._timeoutSet=!0,setTimeout(()=>{this._timeoutSet=!1,this._send()},0))}_send(){0!==this._freeBufferPool.length&&(this._i32View[0]=this._offset,this._messageSender(this._buffer),this._buffer=void 0,this._buffer=this._freeBufferPool.pop(),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1)}int(t){this._ensureArrayBuffer(1),this._i32View[this._offset]=t,this._offset++}double(t){this._ensureArrayBuffer(2),this._offset%2==1&&this._offset++,this._f64View[this._offset/2]=t,this._offset+=2}float(t){this._ensureArrayBuffer(1),this._f32View[this._offset]=t,this._offset++}int32Array(t){this._ensureArrayBuffer(t.length);for(let e=0;e<t.length;++e)this._i32View[this._offset+e]=t[e];this._offset+=t.length}float32Array(t){this._ensureArrayBuffer(t.length);for(let e=0;e<t.length;++e)this._f32View[this._offset+e]=t[e];this._offset+=t.length}booleanArray(t){this._ensureArrayBuffer(t.length);for(let e=0;e<t.length;++e)this._i32View[this._offset+e]=t[e]?1:0;this._offset+=t.length}uint8ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.byteLength,this._offset++,this._u8View.set(t,4*this._offset),this._offset+=t.byteLength>>2,0!=(3&t.byteLength)&&this._offset++}arrayBuffer(t){let e=new Uint8Array(t);this.uint8ArrayBuffer(e)}uint8ClampedArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.byteLength,this._offset++,this._u8cView.set(t,4*this._offset),this._offset+=t.byteLength>>2,0!=(3&t.byteLength)&&this._offset++}float32ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.length,this._offset++,this._f32View.set(t,this._offset),this._offset+=t.length}uint16ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.length,this._offset++;let e=2*this._offset;this._u16View.set(t,e),this._offset+=t.length>>1,0!=(1&t.length)&&this._offset++}int32ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.length,this._offset++,this._i32View.set(t,this._offset),this._offset+=t.length}uint32ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.length,this._offset++,this._u32View.set(t,this._offset),this._offset+=t.length}string(t){let e=(new TextEncoder).encode(t);this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.byteLength,this._offset++,this._u8View.set(e,4*this._offset),this._offset+=e.byteLength>>2,0!=(3&e.byteLength)&&this._offset++}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MessageDeserializer=class{constructor(){this._buffer=new ArrayBuffer(0),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,this._startOffset=-1,this._processor={int:()=>this._i32View[this._startOffset++],bool:()=>1===this._i32View[this._startOffset++],type:()=>this._i32View[this._startOffset++],float:()=>this._f32View[this._startOffset++],timestamp:()=>{this._startOffset%2==1&&this._startOffset++;let t=this._f64View[this._startOffset/2];return this._startOffset+=2,t},string:()=>{let t=this._i32View[this._startOffset++],e=(new TextDecoder).decode(new Uint8Array(this._buffer,4*this._startOffset,t));return this._startOffset+=t>>2,0!=(3&t)&&this._startOffset++,e},dataWithLength:()=>{let t=this._i32View[this._startOffset++],e=new Uint8Array(t);return e.set(this._u8View.subarray(4*this._startOffset,4*this._startOffset+t)),this._startOffset+=e.byteLength>>2,0!=(3&e.byteLength)&&this._startOffset++,e.buffer},matrix4x4:()=>{let t=this._i32View[this._startOffset++],e=new Float32Array(t);return e.set(this._f32View.subarray(this._startOffset,this._startOffset+16)),this._startOffset+=t,e},identityCoefficients:()=>{let t=this._i32View[this._startOffset++],e=new Float32Array(t);return e.set(this._f32View.subarray(this._startOffset,this._startOffset+50)),this._startOffset+=t,e},expressionCoefficients:()=>{let t=this._i32View[this._startOffset++],e=new Float32Array(t);return e.set(this._f32View.subarray(this._startOffset,this._startOffset+29)),this._startOffset+=t,e},cameraModel:()=>{let t=this._i32View[this._startOffset++],e=new Float32Array(t);return e.set(this._f32View.subarray(this._startOffset,this._startOffset+6)),this._startOffset+=t,e},barcodeFormat:()=>this._i32View[this._startOffset++],instantTrackerTransformOrientation:()=>this._i32View[this._startOffset++]}}setData(t){this._buffer=t,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,t.byteLength>=4&&(this._offset=1,this._length=this._i32View[0]),this._startOffset=-1}hasMessage(){return this._offset+1<this._length}forMessages(t){for(;this.hasMessage();){let e=this._i32View[this._offset],n=this._i32View[this._offset+1];this._startOffset=this._offset+2,this._offset+=e,t(n,this._processor)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5);let a,i;function o(t){if(i)return i;if(i=t.createBuffer(),!i)throw new Error("Unable to create buffer object");return t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,1,0]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),i}e.drawPlane=function(t,e,n,r,i){let s=u(t),f=function(t){if(a)return a;if(a=t.createBuffer(),!a)throw new Error("Unable to create buffer object");return t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-.5,.125,0,-.5,-.125,0,.5,.125,0,.5,-.125,0]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),a}(t),_=o(t);t.disable(t.DEPTH_TEST),t.useProgram(s.prog),t.uniformMatrix4fv(s.unif_proj,!1,e),t.uniformMatrix4fv(s.unif_camera,!1,n),t.uniformMatrix4fv(s.unif_matrix,!1,r),t.bindBuffer(t.ARRAY_BUFFER,f),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,function(t,e){if(c[e])return c[e];let n=t.createTexture();if(!n)throw new Error("Unable to create texture");c[e]=n,t.bindTexture(t.TEXTURE_2D,n);const r=t.RGBA,a=t.RGBA,i=t.UNSIGNED_BYTE,o=new Uint8Array([0,0,255,255]);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,r,1,1,0,a,i,o);const s=new Image;return s.onload=function(){t.bindTexture(t.TEXTURE_2D,n),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,r,a,i,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR)},s.src=e,n}(t,i)),t.uniform1i(s.unif_skinSampler,0),t.vertexAttribPointer(s.attr_position,3,t.FLOAT,!1,12,0),t.enableVertexAttribArray(s.attr_position),t.bindBuffer(t.ARRAY_BUFFER,_),t.vertexAttribPointer(s.attr_textureCoord,2,t.FLOAT,!1,8,0),t.enableVertexAttribArray(s.attr_textureCoord),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.disableVertexAttribArray(s.attr_position),t.bindBuffer(t.ARRAY_BUFFER,null)};let s;function u(t){if(s)return s;let e=t.createProgram();if(!e)throw new Error("Unable to create program");let n=r.compileShader(t,t.VERTEX_SHADER,"\n#ifndef GL_ES\n#define highp\n#define mediump\n#define lowp\n#endif\n\nuniform mat4 projMatrix;\nuniform mat4 cameraMatrix;\nuniform mat4 modelViewMatrix;\nattribute vec4 position;\nattribute vec2 textureCoord;\n\nvarying highp vec2 vTextureCoord;\n\nvoid main()\n{\n    gl_Position = projMatrix * cameraMatrix * modelViewMatrix * position;\n    vTextureCoord = textureCoord;\n}"),a=r.compileShader(t,t.FRAGMENT_SHADER,"\n#define highp mediump\n#ifdef GL_ES\n    // define default precision for float, vec, mat.\n    precision highp float;\n#else\n#define highp\n#define mediump\n#define lowp\n#endif\n\nvarying highp vec2 vTextureCoord;\nuniform sampler2D skinSampler;\n\nvoid main()\n{\n    gl_FragColor = texture2D(skinSampler, vTextureCoord);\n}");t.attachShader(e,n),t.attachShader(e,a),r.linkProgram(t,e);let i=t.getUniformLocation(e,"projMatrix");if(!i)throw new Error("Unable to get uniform location projMatrix");let o=t.getUniformLocation(e,"modelViewMatrix");if(!o)throw new Error("Unable to get uniform location modelViewMatrix");let u=t.getUniformLocation(e,"cameraMatrix");if(!u)throw new Error("Unable to get uniform location cameraMatrix");let c=t.getUniformLocation(e,"skinSampler");if(!c)throw new Error("Unable to get uniform location skinSampler");return s={prog:e,unif_matrix:o,unif_proj:i,unif_camera:u,unif_skinSampler:c,attr_position:t.getAttribLocation(e,"position"),attr_textureCoord:t.getAttribLocation(e,"textureCoord")},s}let c={}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(24);let i;e.messageManager=new a.MsgManager,i=n(26),e.launchWorker=function(){return r(this,void 0,void 0,(function*(){let t=new i;var r;function a(){let n=e.messageManager.getOutgoingMessages();for(let e of n)t.postMessage(e.msg,e.transferables)}t.postMessage({t:"wasm",url:n(28).default}),yield(r=t,new Promise(t=>{let e=n=>{"loaded"===n.data&&(r.removeEventListener("message",e),t())};r.addEventListener("message",e)})),e.messageManager.onOutgoingMessage.bind(a),a(),t.addEventListener("message",t=>{e.messageManager.postIncomingMessage(t.data)})}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(25);e.MsgManager=class{constructor(){this.onOutgoingMessage=new r.Event,this.onIncomingMessage=new r.Event1,this._outgoingMessages=[]}postIncomingMessage(t){this.onIncomingMessage.emit(t)}postOutgoingMessage(t,e){this._outgoingMessages.push({msg:t,transferables:e}),this.onOutgoingMessage.emit()}getOutgoingMessages(){let t=this._outgoingMessages;return this._outgoingMessages=[],t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Event=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(){for(var t=0,e=this._funcs.length;t<e;t++)this._funcs[t]()}};e.Event1=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t){for(var e=0,n=this._funcs.length;e<n;e++)this._funcs[e](t)}};e.Event2=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e){for(var n=0,r=this._funcs.length;n<r;n++)this._funcs[n](t,e)}};e.Event3=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e,n){for(var r=0,a=this._funcs.length;r<a;r++)this._funcs[r](t,e,n)}};e.Event5=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e,n,r,a){for(var i=0,o=this._funcs.length;i<o;i++)this._funcs[i](t,e,n,r,a)}}},function(t,e,n){t.exports=function(){return n(27)('!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=self;r.messageManager.onOutgoingMessage.bind(()=>{let t=r.messageManager.getOutgoingMessages();for(let e of t)a.postMessage(e.msg,e.transferables)});let i=t=>{if(t&&t.data&&"wasm"===t.data.t){let e=location.href.startsWith("blob")?t.data.url:n(9).default;r.launchWorkerServer(e),a.removeEventListener("message",i)}};a.addEventListener("message",i),a.addEventListener("message",t=>{r.messageManager.postIncomingMessage(t.data)})},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,o)}s((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(2),i=n(3),u=n(4),o=n(7),s=n(10);e.messageManager=new o.MsgManager,e.launchWorkerServer=function(t){return r(this,void 0,void 0,(function*(){console.log("Constructing ZNM");let n=a.default({locateFile:(e,n)=>e.endsWith("zcv.wasm")?t:n+e,onRuntimeInitialized:()=>{let t=i.getRuntimeObject(n),r=new u.zappar_server(t,(t,n)=>{e.messageManager.postOutgoingMessage({p:t,t:"zappar",d:n},[n])});e.messageManager.postOutgoingMessage("loaded",[]),e.messageManager.onIncomingMessage.bind(n=>{var a;switch(n.t){case"zappar":r.processBuffer(n.d),e.messageManager.postOutgoingMessage({t:"buf",d:n.d},[n.d]);break;case"buf":null===(a=r.serializersByPipelineId.get(n.p))||void 0===a||a.bufferReturn(n.d);break;case"cameraFrameC2S":let i=n,u=s.mat4.create();i.userFacing&&s.mat4.fromScaling(u,[-1,1,-1]);let o=r._pipeline_by_instance.get(i.p);o&&(t.pipeline_camera_frame_submit(o,i.d,i.width,i.height,i.token,u),t.pipeline_frame_update(o),r.exploreState());let c={token:i.token,d:i.d,p:i.p,t:"cameraFrameRecycleS2C"};e.messageManager.postOutgoingMessage(c,[i.d])}})}})}))}},function(t,e,n){"use strict";n.r(e);var r,a=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){var e;t=t||{},e||(e=void 0!==t?t:{});var n,a={};for(n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);e.arguments=[],e.thisProgram="./this.program",e.quit=function(t,e){throw e},e.preRun=[],e.postRun=[];var i="";function u(t){return e.locateFile?e.locateFile(t,i):i+t}i=self.location.href,r&&(i=r),i=0!==i.indexOf("blob:")?i.substr(0,i.lastIndexOf("/")+1):"",e.read=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},e.readBinary=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},e.readAsync=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},e.setWindowTitle=function(t){document.title=t};var o=e.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),s=e.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||o);for(n in a)a.hasOwnProperty(n)&&(e[n]=a[n]);function c(t){var e=L;return L=L+t+15&-16,e}function f(t){var e=A[B>>2];return t=e+t+15&-16,A[B>>2]=t,t>=U&&!N()?(A[B>>2]=e,0):e}function _(t){var e;return e||(e=16),Math.ceil(t/e)*e}a=void 0;var l={"f64-rem":function(t,e){return t%e},debugger:function(){}},p=!1;function d(t,e){t||An("Assertion failed: "+e)}function h(t){var n=e["_"+t];return d(n,"Cannot call unknown function "+t+", make sure it is exported"),n}var m={stackSave:function(){Mn()},stackRestore:function(){gn()},arrayToC:function(t){var e=wn(t.length);return w.set(t,e),e},stringToC:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2);e=wn(n),R(t,g,e,n)}return e}},b={string:m.stringToC,array:m.arrayToC};function y(t){var e;if(0===e||!t)return"";for(var n,r=0,a=0;r|=n=g[t+a>>0],(0!=n||e)&&(a++,!e||a!=e););if(e||(e=a),n="",128>r){for(;0<e;)r=String.fromCharCode.apply(String,g.subarray(t,t+Math.min(e,1024))),n=n?n+r:r,t+=1024,e-=1024;return n}return F(t)}var v,w,g,M,k,A,z,x,O,L,C,T,I,S,P,B,E="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(t,e){for(var n=e;t[n];)++n;if(16<n-e&&t.subarray&&E)return E.decode(t.subarray(e,n));for(n="";;){var r=t[e++];if(!r)return n;if(128&r){var a=63&t[e++];if(192==(224&r))n+=String.fromCharCode((31&r)<<6|a);else{var i=63&t[e++];if(224==(240&r))r=(15&r)<<12|a<<6|i;else{var u=63&t[e++];if(240==(248&r))r=(7&r)<<18|a<<12|i<<6|u;else{var o=63&t[e++];r=248==(252&r)?(3&r)<<24|a<<18|i<<12|u<<6|o:(1&r)<<30|a<<24|i<<18|u<<12|o<<6|63&t[e++]}}65536>r?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else n+=String.fromCharCode(r)}}function F(t){return D(g,t)}function R(t,e,n,r){if(!(0<r))return 0;var a=n;r=n+r-1;for(var i=0;i<t.length;++i){var u=t.charCodeAt(i);if(55296<=u&&57343>=u&&(u=65536+((1023&u)<<10)|1023&t.charCodeAt(++i)),127>=u){if(n>=r)break;e[n++]=u}else{if(2047>=u){if(n+1>=r)break;e[n++]=192|u>>6}else{if(65535>=u){if(n+2>=r)break;e[n++]=224|u>>12}else{if(2097151>=u){if(n+3>=r)break;e[n++]=240|u>>18}else{if(67108863>=u){if(n+4>=r)break;e[n++]=248|u>>24}else{if(n+5>=r)break;e[n++]=252|u>>30,e[n++]=128|u>>24&63}e[n++]=128|u>>18&63}e[n++]=128|u>>12&63}e[n++]=128|u>>6&63}e[n++]=128|63&u}}return e[n]=0,n-a}function V(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++n)),127>=r?++e:e=2047>=r?e+2:65535>=r?e+3:2097151>=r?e+4:67108863>=r?e+5:e+6}return e}function j(t,e){return 0<t%e&&(t+=e-t%e),t}function q(){e.HEAP8=w=new Int8Array(v),e.HEAP16=M=new Int16Array(v),e.HEAP32=A=new Int32Array(v),e.HEAPU8=g=new Uint8Array(v),e.HEAPU16=k=new Uint16Array(v),e.HEAPU32=z=new Uint32Array(v),e.HEAPF32=x=new Float32Array(v),e.HEAPF64=O=new Float64Array(v)}function N(){var t=e.usingWasm?65536:16777216,n=2147483648-t;if(A[B>>2]>n)return!1;var r=U;for(U=Math.max(U,16777216);U<A[B>>2];)U=536870912>=U?j(2*U,t):Math.min(j((3*U+2147483648)/4,t),n);return(t=e.reallocBuffer(U))&&t.byteLength==U?(e.buffer=v=t,q(),!0):(U=r,!1)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),L=B=0,C=!1,e.reallocBuffer||(e.reallocBuffer=function(t){try{var e=w,n=new ArrayBuffer(t);new Int8Array(n).set(e)}catch(t){return!1}return!!mn(n)&&n});try{Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get)(new ArrayBuffer(4))}catch(je){}var G=e.TOTAL_STACK||5242880,U=e.TOTAL_MEMORY||16777216;function H(t){for(;0<t.length;){var n=t.shift();if("function"==typeof n)n();else{var r=n.h;"number"==typeof r?void 0===n.W?e.dynCall_v(r):e.dynCall_vi(r,n.W):r(void 0===n.W?null:n.W)}}}U<G&&s("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+U+"! (TOTAL_STACK="+G+")"),e.buffer?v=e.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(e.wasmMemory=new WebAssembly.Memory({initial:U/65536}),v=e.wasmMemory.buffer):v=new ArrayBuffer(U),e.buffer=v),q();var W=[],Z=[],Y=[],K=[],X=[],J=!1;function Q(){var t=e.preRun.shift();W.unshift(t)}var $=Math.abs,tt=Math.ceil,et=Math.floor,nt=Math.min,rt=0,at=null,it=null;function ut(){rt++,e.monitorRunDependencies&&e.monitorRunDependencies(rt)}function ot(){if(rt--,e.monitorRunDependencies&&e.monitorRunDependencies(rt),0==rt&&(null!==at&&(clearInterval(at),at=null),it)){var t=it;it=null,t()}}function st(t){return String.prototype.startsWith?t.startsWith("data:application/octet-stream;base64,"):0===t.indexOf("data:application/octet-stream;base64,")}e.preloadedImages={},e.preloadedAudios={},function(){function t(){try{if(e.wasmBinary)return new Uint8Array(e.wasmBinary);if(e.readBinary)return e.readBinary(i);throw"both async and sync fetching of the wasm failed"}catch(t){An(t)}}function n(){return e.wasmBinary||"function"!=typeof fetch?new Promise((function(e){e(t())})):fetch(i,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+i+"\'";return t.arrayBuffer()})).catch((function(){return t()}))}function r(t){function r(t){if((f=t.exports).memory){t=f.memory;var n=e.buffer;t.byteLength<n.byteLength&&s("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),n=new Int8Array(n),new Int8Array(t).set(n),e.buffer=v=t,q()}e.asm=f,e.usingWasm=!0,ot()}function a(t){r(t.instance)}function u(t){n().then((function(t){return WebAssembly.instantiate(t,c)})).then(t,(function(t){s("failed to asynchronously prepare wasm: "+t),An(t)}))}if("object"!=typeof WebAssembly)return s("no native wasm support detected"),!1;if(!(e.wasmMemory instanceof WebAssembly.Memory))return s("no native wasm Memory in use"),!1;if(t.memory=e.wasmMemory,c.global={NaN:NaN,Infinity:1/0},c["global.Math"]=Math,c.env=t,ut(),e.instantiateWasm)try{return e.instantiateWasm(c,r)}catch(t){return s("Module.instantiateWasm callback failed with error: "+t),!1}return e.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||st(i)||"function"!=typeof fetch?u(a):WebAssembly.instantiateStreaming(fetch(i,{credentials:"same-origin"}),c).then(a,(function(t){s("wasm streaming compile failed: "+t),s("falling back to ArrayBuffer instantiation"),u(a)})),{}}var a="zcv.wast",i="zcv.wasm",o="zcv.temp.asm.js";st(a)||(a=u(a)),st(i)||(i=u(i)),st(o)||(o=u(o));var c={global:null,env:null,asm2wasm:l,parent:e},f=null;e.asmPreload=e.asm;var _=e.reallocBuffer;e.reallocBuffer=function(t){if("asmjs"===p)var n=_(t);else t:{t=j(t,e.usingWasm?65536:16777216);var r=e.buffer.byteLength;if(e.usingWasm)try{n=-1!==e.wasmMemory.grow((t-r)/65536)?e.buffer=e.wasmMemory.buffer:null;break t}catch(t){n=null;break t}n=void 0}return n};var p="";e.asm=function(t,n){if(!n.table){void 0===(t=e.wasmTableSize)&&(t=1024);var a=e.wasmMaxTableSize;n.table="object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?void 0!==a?new WebAssembly.Table({initial:t,maximum:a,element:"anyfunc"}):new WebAssembly.Table({initial:t,element:"anyfunc"}):Array(t),e.wasmTable=n.table}return n.__memory_base||(n.__memory_base=e.STATIC_BASE),n.__table_base||(n.__table_base=0),d(n=r(n),"no binaryen method succeeded."),n}}(),L=407488,Z.push({h:function(){Ye()}},{h:function(){$e()}},{h:function(){_n()}},{h:function(){hn()}},{h:function(){pn()}},{h:function(){cn()}},{h:function(){tn()}},{h:function(){nn()}},{h:function(){en()}},{h:function(){Je()}},{h:function(){ln()}},{h:function(){Qe()}},{h:function(){rn()}},{h:function(){Ke()}},{h:function(){Xe()}},{h:function(){un()}},{h:function(){an()}},{h:function(){on()}},{h:function(){sn()}},{h:function(){fn()}}),e.STATIC_BASE=1024,e.STATIC_BUMP=406464;var ct=L;L+=16;var ft={};function _t(){An()}function lt(){return"undefined"!=typeof dateNow||self.performance&&self.performance.now}var pt={I:1,u:2,xc:3,tb:4,J:5,ga:6,Ma:7,Rb:8,B:9,$a:10,ba:11,Hc:11,sa:12,S:13,mb:14,cc:15,da:16,ea:17,Ic:18,U:19,V:20,K:21,i:22,Mb:23,ra:24,D:25,Ec:26,nb:27,Zb:28,L:29,uc:30,Fb:31,nc:32,jb:33,rc:34,Vb:42,qb:43,ab:44,wb:45,xb:46,yb:47,Eb:48,Fc:49,Pb:50,vb:51,gb:35,Sb:37,Sa:52,Va:53,Jc:54,Nb:55,Wa:56,Xa:57,hb:35,Ya:59,ac:60,Qb:61,Bc:62,$b:63,Wb:64,Xb:65,tc:66,Tb:67,Pa:68,yc:69,bb:70,oc:71,Hb:72,kb:73,Ua:74,ic:76,Ta:77,sc:78,zb:79,Ab:80,Db:81,Cb:82,Bb:83,bc:38,fa:39,Ib:36,T:40,jc:95,mc:96,fb:104,Ob:105,Qa:97,qc:91,fc:88,Yb:92,vc:108,eb:111,Na:98,cb:103,Lb:101,Jb:100,Cc:110,ob:112,pb:113,sb:115,Ra:114,ib:89,Gb:90,pc:93,wc:94,Oa:99,Kb:102,ub:106,dc:107,Dc:109,Gc:87,lb:122,zc:116,hc:95,Ub:123,rb:84,kc:75,Za:125,ec:131,lc:130,Ac:86};function dt(t){return e.___errno_location&&(A[e.___errno_location()>>2]=t),t}function ht(t,e){if(0===t)t=Date.now();else{if(1!==t||!lt())return dt(pt.i),-1;t=_t()}return A[e>>2]=t/1e3|0,A[e+4>>2]=t%1e3*1e6|0,0}var mt=0,bt=[],yt={},vt={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can\'t send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"};function wt(t,e){for(var n=0,r=t.length-1;0<=r;r--){var a=t[r];"."===a?t.splice(r,1):".."===a?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n;n--)t.unshift("..");return t}function gt(t){var e="/"===t.charAt(0),n="/"===t.substr(-1);return(t=wt(t.split("/").filter((function(t){return!!t})),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function Mt(t){var e=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."}function kt(t){if("/"===t)return"/";var e=t.lastIndexOf("/");return-1===e?t:t.substr(e+1)}function At(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){if("string"!=typeof(e=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=wt(t.split("/").filter((function(t){return!!t})),!e).join("/"))||"."}var zt=[];function xt(t,e){zt[t]={input:[],output:[],G:e},Qt(t,Ot)}var Ot={open:function(t){var e=zt[t.node.rdev];if(!e)throw new Rt(pt.U);t.tty=e,t.seekable=!1},close:function(t){t.tty.G.flush(t.tty)},flush:function(t){t.tty.G.flush(t.tty)},read:function(t,e,n,r){if(!t.tty||!t.tty.G.na)throw new Rt(pt.ga);for(var a=0,i=0;i<r;i++){try{var u=t.tty.G.na(t.tty)}catch(t){throw new Rt(pt.J)}if(void 0===u&&0===a)throw new Rt(pt.ba);if(null==u)break;a++,e[n+i]=u}return a&&(t.node.timestamp=Date.now()),a},write:function(t,e,n,r){if(!t.tty||!t.tty.G.$)throw new Rt(pt.ga);var a=0;try{if(0===n&&0===r)t.tty.G.flush(t.tty);else for(;a<r;)t.tty.G.$(t.tty,e[n+a]),a++}catch(t){throw new Rt(pt.J)}return r&&(t.node.timestamp=Date.now()),a}},Lt={na:function(t){if(!t.input.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\\n"),!e)return null;t.input=We(e,!0)}return t.input.shift()},$:function(t,e){null===e||10===e?(o(D(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(o(D(t.output,0)),t.output=[])}},Ct={$:function(t,e){null===e||10===e?(s(D(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(s(D(t.output,0)),t.output=[])}},Tt={o:null,A:function(){return Tt.createNode(null,"/",16895,0)},createNode:function(t,e,n,r){if(24576==(61440&n)||4096==(61440&n))throw new Rt(pt.I);return Tt.o||(Tt.o={dir:{node:{m:Tt.c.m,s:Tt.c.s,lookup:Tt.c.lookup,M:Tt.c.M,rename:Tt.c.rename,unlink:Tt.c.unlink,rmdir:Tt.c.rmdir,readdir:Tt.c.readdir,symlink:Tt.c.symlink},stream:{F:Tt.f.F}},file:{node:{m:Tt.c.m,s:Tt.c.s},stream:{F:Tt.f.F,read:Tt.f.read,write:Tt.f.write,ia:Tt.f.ia,oa:Tt.f.oa,O:Tt.f.O}},link:{node:{m:Tt.c.m,s:Tt.c.s,readlink:Tt.c.readlink},stream:{}},ka:{node:{m:Tt.c.m,s:Tt.c.s},stream:Jt}}),16384==(61440&(n=Ut(t,e,n,r)).mode)?(n.c=Tt.o.dir.node,n.f=Tt.o.dir.stream,n.b={}):32768==(61440&n.mode)?(n.c=Tt.o.file.node,n.f=Tt.o.file.stream,n.g=0,n.b=null):40960==(61440&n.mode)?(n.c=Tt.o.link.node,n.f=Tt.o.link.stream):8192==(61440&n.mode)&&(n.c=Tt.o.ka.node,n.f=Tt.o.ka.stream),n.timestamp=Date.now(),t&&(t.b[e]=n),n},ya:function(t){if(t.b&&t.b.subarray){for(var e=[],n=0;n<t.g;++n)e.push(t.b[n]);return e}return t.b},Lc:function(t){return t.b?t.b.subarray?t.b.subarray(0,t.g):new Uint8Array(t.b):new Uint8Array},la:function(t,e){if(t.b&&t.b.subarray&&e>t.b.length&&(t.b=Tt.ya(t),t.g=t.b.length),!t.b||t.b.subarray){var n=t.b?t.b.length:0;n>=e||(e=Math.max(e,n*(1048576>n?2:1.125)|0),0!=n&&(e=Math.max(e,256)),n=t.b,t.b=new Uint8Array(e),0<t.g&&t.b.set(n.subarray(0,t.g),0))}else for(!t.b&&0<e&&(t.b=[]);t.b.length<e;)t.b.push(0)},Ea:function(t,e){if(t.g!=e)if(0==e)t.b=null,t.g=0;else{if(!t.b||t.b.subarray){var n=t.b;t.b=new Uint8Array(new ArrayBuffer(e)),n&&t.b.set(n.subarray(0,Math.min(e,t.g)))}else if(t.b||(t.b=[]),t.b.length>e)t.b.length=e;else for(;t.b.length<e;)t.b.push(0);t.g=e}},c:{m:function(t){var e={};return e.dev=8192==(61440&t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,16384==(61440&t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.g:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.wa=4096,e.blocks=Math.ceil(e.size/e.wa),e},s:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&Tt.Ea(t,e.size)},lookup:function(){throw Vt[pt.u]},M:function(t,e,n,r){return Tt.createNode(t,e,n,r)},rename:function(t,e,n){if(16384==(61440&t.mode)){try{var r=Gt(e,n)}catch(t){}if(r)for(var a in r.b)throw new Rt(pt.fa)}delete t.parent.b[t.name],t.name=n,e.b[n]=t,t.parent=e},unlink:function(t,e){delete t.b[e]},rmdir:function(t,e){var n,r=Gt(t,e);for(n in r.b)throw new Rt(pt.fa);delete t.b[e]},readdir:function(t){var e,n=[".",".."];for(e in t.b)t.b.hasOwnProperty(e)&&n.push(e);return n},symlink:function(t,e,n){return(t=Tt.createNode(t,e,41471,0)).link=n,t},readlink:function(t){if(40960!=(61440&t.mode))throw new Rt(pt.i);return t.link}},f:{read:function(t,e,n,r,a){var i=t.node.b;if(a>=t.node.g)return 0;if(d(0<=(t=Math.min(t.node.g-a,r))),8<t&&i.subarray)e.set(i.subarray(a,a+t),n);else for(r=0;r<t;r++)e[n+r]=i[a+r];return t},write:function(t,e,n,r,a,i){if(i=!1,!r)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.b||t.b.subarray)){if(i)return t.b=e.subarray(n,n+r),t.g=r;if(0===t.g&&0===a)return t.b=new Uint8Array(e.subarray(n,n+r)),t.g=r;if(a+r<=t.g)return t.b.set(e.subarray(n,n+r),a),r}if(Tt.la(t,a+r),t.b.subarray&&e.subarray)t.b.set(e.subarray(n,n+r),a);else for(i=0;i<r;i++)t.b[a+i]=e[n+i];return t.g=Math.max(t.g,a+r),r},F:function(t,e,n){if(1===n?e+=t.position:2===n&&32768==(61440&t.node.mode)&&(e+=t.node.g),0>e)throw new Rt(pt.i);return e},ia:function(t,e,n){Tt.la(t.node,e+n),t.node.g=Math.max(t.node.g,e+n)},oa:function(t,e,n,r,a,i,u){if(32768!=(61440&t.node.mode))throw new Rt(pt.U);if(n=t.node.b,2&u||n.buffer!==e&&n.buffer!==e.buffer){if((0<a||a+r<t.node.g)&&(n=n.subarray?n.subarray(a,a+r):Array.prototype.slice.call(n,a,a+r)),t=!0,!(r=yn(r)))throw new Rt(pt.sa);e.set(n,r)}else t=!1,r=n.byteOffset;return{Ca:r,ta:t}},O:function(t,e,n,r,a){if(32768!=(61440&t.node.mode))throw new Rt(pt.U);return 2&a||Tt.f.write(t,e,0,r,n,!1),0}}};L+=16,L+=16,L+=16;var It=null,St={},Pt=[],Bt=1,Et=null,Dt=!0,Ft={},Rt=null,Vt={};function jt(t,e){if(e=e||{},!(t=At("/",t)))return{path:"",node:null};var n,r={ma:!0,aa:0};for(n in r)void 0===e[n]&&(e[n]=r[n]);if(8<e.aa)throw new Rt(pt.T);t=wt(t.split("/").filter((function(t){return!!t})),!1);var a=It;for(r="/",n=0;n<t.length;n++){var i=n===t.length-1;if(i&&e.parent)break;if(a=Gt(a,t[n]),r=gt(r+"/"+t[n]),a.N&&(!i||i&&e.ma)&&(a=a.N.root),!i||e.Y)for(i=0;40960==(61440&a.mode);)if(a=ae(r),a=jt(r=At(Mt(r),a),{aa:e.aa}).node,40<i++)throw new Rt(pt.T)}return{path:r,node:a}}function qt(t){for(var e;;){if(t===t.parent)return t=t.A.pa,e?"/"!==t[t.length-1]?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}}function Nt(t,e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r)|0;return(t+n>>>0)%Et.length}function Gt(t,e){var n;if(n=(n=Zt(t,"x"))?n:t.c.lookup?0:pt.S)throw new Rt(n,t);for(n=Et[Nt(t.id,e)];n;n=n.Ba){var r=n.name;if(n.parent.id===t.id&&r===e)return n}return t.c.lookup(t,e)}function Ut(t,e,n,r){return _e||((_e=function(t,e,n,r){t||(t=this),this.parent=t,this.A=t.A,this.N=null,this.id=Bt++,this.name=e,this.mode=n,this.c={},this.f={},this.rdev=r}).prototype={},Object.defineProperties(_e.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}})),function(t){var e=Nt(t.parent.id,t.name);t.Ba=Et[e],Et[e]=t}(t=new _e(t,e,n,r)),t}var Ht={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function Wt(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e}function Zt(t,e){return Dt||(-1===e.indexOf("r")||292&t.mode)&&(-1===e.indexOf("w")||146&t.mode)&&(-1===e.indexOf("x")||73&t.mode)?0:pt.S}function Yt(t,e){try{return Gt(t,e),pt.ea}catch(t){}return Zt(t,"wx")}function Kt(t,e){le||((le=function(){}).prototype={},Object.defineProperties(le.prototype,{object:{get:function(){return this.node},set:function(t){this.node=t}}}));var n,r=new le;for(n in t)r[n]=t[n];return t=r,e=function(t){for(t=t||0;t<=4096;t++)if(!Pt[t])return t;throw new Rt(pt.ra)}(e),t.fd=e,Pt[e]=t}var Xt,Jt={open:function(t){t.f=St[t.node.rdev].f,t.f.open&&t.f.open(t)},F:function(){throw new Rt(pt.L)}};function Qt(t,e){St[t]={f:e}}function $t(t,e){var n="/"===e,r=!e;if(n&&It)throw new Rt(pt.da);if(!n&&!r){var a=jt(e,{ma:!1});if(e=a.path,(a=a.node).N)throw new Rt(pt.da);if(16384!=(61440&a.mode))throw new Rt(pt.V)}e={type:t,Oc:{},pa:e,Aa:[]},(t=t.A(e)).A=e,e.root=t,n?It=t:a&&(a.N=e,a.A&&a.A.Aa.push(e))}function te(t,e,n){var r=jt(t,{parent:!0}).node;if(!(t=kt(t))||"."===t||".."===t)throw new Rt(pt.i);var a=Yt(r,t);if(a)throw new Rt(a);if(!r.c.M)throw new Rt(pt.I);return r.c.M(r,t,e,n)}function ee(t){te(t,16895,0)}function ne(t,e,n){void 0===n&&(n=e,e=438),te(t,8192|e,n)}function re(t,e){if(!At(t))throw new Rt(pt.u);var n=jt(e,{parent:!0}).node;if(!n)throw new Rt(pt.u);var r=Yt(n,e=kt(e));if(r)throw new Rt(r);if(!n.c.symlink)throw new Rt(pt.I);n.c.symlink(n,e,t)}function ae(t){if(!(t=jt(t).node))throw new Rt(pt.u);if(!t.c.readlink)throw new Rt(pt.i);return At(qt(t.parent),t.c.readlink(t))}function ie(t,n,r,a){if(""===t)throw new Rt(pt.u);if("string"==typeof n){var i=Ht[n];if(void 0===i)throw Error("Unknown file open mode: "+n);n=i}if(r=64&n?4095&(void 0===r?438:r)|32768:0,"object"==typeof t)var u=t;else{t=gt(t);try{u=jt(t,{Y:!(131072&n)}).node}catch(t){}}if(i=!1,64&n)if(u){if(128&n)throw new Rt(pt.ea)}else u=te(t,r,0),i=!0;if(!u)throw new Rt(pt.u);if(8192==(61440&u.mode)&&(n&=-513),65536&n&&16384!=(61440&u.mode))throw new Rt(pt.V);if(!i&&(r=u?40960==(61440&u.mode)?pt.T:16384==(61440&u.mode)&&("r"!==Wt(n)||512&n)?pt.K:Zt(u,Wt(n)):pt.u))throw new Rt(r);if(512&n){var o;if(!(o="string"==typeof(r=u)?jt(r,{Y:!0}).node:r).c.s)throw new Rt(pt.I);if(16384==(61440&o.mode))throw new Rt(pt.K);if(32768!=(61440&o.mode))throw new Rt(pt.i);if(r=Zt(o,"w"))throw new Rt(r);o.c.s(o,{size:0,timestamp:Date.now()})}n&=-641,(a=Kt({node:u,path:qt(u),flags:n,seekable:!0,position:0,f:u.f,La:[],error:!1},a)).f.open&&a.f.open(a),!e.logReadFiles||1&n||(pe||(pe={}),t in pe||(pe[t]=1,console.log("FS.trackingDelegate error on read file: "+t)));try{Ft.onOpenFile&&(u=0,1!=(2097155&n)&&(u|=1),0!=(2097155&n)&&(u|=2),Ft.onOpenFile(t,u))}catch(e){console.log("FS.trackingDelegate[\'onOpenFile\'](\'"+t+"\', flags) threw an exception: "+e.message)}return a}function ue(t){if(null===t.fd)throw new Rt(pt.B);t.Z&&(t.Z=null);try{t.f.close&&t.f.close(t)}catch(t){throw t}finally{Pt[t.fd]=null}t.fd=null}function oe(t,e,n){if(null===t.fd)throw new Rt(pt.B);if(!t.seekable||!t.f.F)throw new Rt(pt.L);t.position=t.f.F(t,e,n),t.La=[]}function se(){Rt||((Rt=function(t,e){this.node=e,this.Ga=function(t){for(var e in this.v=t,pt)if(pt[e]===t){this.code=e;break}},this.Ga(t),this.message=vt[t],this.stack&&Object.defineProperty(this,"stack",{value:Error().stack,writable:!0})}).prototype=Error(),Rt.prototype.constructor=Rt,[pt.u].forEach((function(t){Vt[t]=new Rt(t),Vt[t].stack="<generic error, no stack>"})))}function ce(t,e,n){t=gt("/dev/"+t);var r=function(t,e){var n=0;return t&&(n|=365),e&&(n|=146),n}(!!e,!!n);fe||(fe=64);var a=fe++<<8|0;Qt(a,{open:function(t){t.seekable=!1},close:function(){n&&n.buffer&&n.buffer.length&&n(10)},read:function(t,n,r,a){for(var i=0,u=0;u<a;u++){try{var o=e()}catch(t){throw new Rt(pt.J)}if(void 0===o&&0===i)throw new Rt(pt.ba);if(null==o)break;i++,n[r+u]=o}return i&&(t.node.timestamp=Date.now()),i},write:function(t,e,r,a){for(var i=0;i<a;i++)try{n(e[r+i])}catch(t){throw new Rt(pt.J)}return a&&(t.node.timestamp=Date.now()),i}}),ne(t,r,a)}var fe,_e,le,pe,de={},he={},me=0;function be(){return A[(me+=4)-4>>2]}function ye(){var t=Pt[be()];if(!t)throw new Rt(pt.B);return t}var ve=[],we=void 0;function ge(t,e){z[t>>2]=e,z[t+4>>2]=e/4294967296|0}function Me(t,e,n,r){var a=z[t+8>>2];if(a){var i=y(a),u=t+112,o=y(u);o||(o="GET");var s=z[u+48>>2],c=z[u+52>>2],f=!!z[u+56>>2],_=z[u+64>>2],l=z[u+68>>2];a=z[u+72>>2];var p=z[u+76>>2],d=z[u+80>>2];u=z[u+84>>2];var h=!!(1&s),m=!!(2&s);s=!!(64&s),_=_?y(_):void 0,l=l?y(l):void 0;var b=p?y(p):void 0,v=new XMLHttpRequest;if(v.withCredentials=f,v.open(o,i,!s,_,l),s||(v.timeout=c),v.j=i,v.responseType=m?"moz-chunked-arraybuffer":"arraybuffer",p&&v.overrideMimeType(b),a)for(;(o=z[a>>2])&&(i=z[a+4>>2]);)a+=8,o=y(o),i=y(i),v.setRequestHeader(o,i);ve.push(v),z[t+0>>2]=ve.length,a=d&&u?g.slice(d,d+u):null,v.onload=function(r){var a=v.response?v.response.byteLength:0,i=0,u=0;h&&!m&&(i=yn(u=a),g.set(new Uint8Array(v.response),i)),z[t+12>>2]=i,ge(t+16,u),ge(t+24,0),a&&ge(t+32,a),k[t+40>>1]=v.readyState,4===v.readyState&&0===v.status&&(v.status=0<a?200:404),k[t+42>>1]=v.status,v.statusText&&R(v.statusText,g,t+44,64),200==v.status?e&&e(t,v,r):n&&n(t,v,r)},v.onerror=function(e){var r=v.status;4==v.readyState&&0==r&&(r=404),z[t+12>>2]=0,ge(t+16,0),ge(t+24,0),ge(t+32,0),k[t+40>>1]=v.readyState,k[t+42>>1]=r,n&&n(t,v,e)},v.ontimeout=function(e){n&&n(t,v,e)},v.onprogress=function(e){var n=h&&m&&v.response?v.response.byteLength:0,a=0;h&&m&&(a=yn(n),g.set(new Uint8Array(v.response),a)),z[t+12>>2]=a,ge(t+16,n),ge(t+24,e.loaded-n),ge(t+32,e.total),k[t+40>>1]=v.readyState,3<=v.readyState&&0===v.status&&0<e.loaded&&(v.status=200),k[t+42>>1]=v.status,v.statusText&&R(v.statusText,g,t+44,64),r&&r(t,v,e)};try{v.send(a)}catch(e){n&&n(t,v,e)}}else n(t,0,"no url specified!")}function ke(t,e,n,r,a){if(t){var i=z[e+112+60>>2];i||(i=z[e+8>>2]);var u=y(i);try{var o=t.transaction(["FILES"],"readwrite").objectStore("FILES").put(n,u);o.onsuccess=function(){k[e+40>>1]=4,k[e+42>>1]=200,R("OK",g,e+44,64),r(e,0,u)},o.onerror=function(t){k[e+40>>1]=4,k[e+42>>1]=413,R("Payload Too Large",g,e+44,64),a(e,0,t)}}catch(t){a(e,0,t)}}else a(e,0,"IndexedDB not available!")}function Ae(t,e,n,r){if(t){var a=z[e+112+60>>2];a||(a=z[e+8>>2]),a=y(a);try{var i=t.transaction(["FILES"],"readonly").objectStore("FILES").get(a);i.onsuccess=function(t){if(t.target.result){var a=(t=t.target.result).byteLength||t.length,i=yn(a);g.set(new Uint8Array(t),i),z[e+12>>2]=i,ge(e+16,a),ge(e+24,0),ge(e+32,a),k[e+40>>1]=4,k[e+42>>1]=200,R("OK",g,e+44,64),n(e,0,t)}else k[e+40>>1]=4,k[e+42>>1]=404,R("Not Found",g,e+44,64),r(e,0,"no data")},i.onerror=function(t){k[e+40>>1]=4,k[e+42>>1]=404,R("Not Found",g,e+44,64),r(e,0,t)}}catch(t){r(e,0,t)}}else r(e,0,"IndexedDB not available!")}function ze(t,e,n,r){if(t){var a=z[e+112+60>>2];a||(a=z[e+8>>2]),a=y(a);try{var i=t.transaction(["FILES"],"readwrite").objectStore("FILES").delete(a);i.onsuccess=function(t){t=t.target.result,z[e+12>>2]=0,ge(e+16,0),ge(e+24,0),ge(e+24,0),k[e+40>>1]=4,k[e+42>>1]=200,R("OK",g,e+44,64),n(e,0,t)},i.onerror=function(t){k[e+40>>1]=4,k[e+42>>1]=404,R("Not Found",g,e+44,64),r(e,0,t)}}catch(t){r(e,0,t)}}else r(e,0,"IndexedDB not available!")}var xe,Oe,Le=void 0;for(Le=xe=c(Math.max(12,1)),d(0==(3&xe)),Oe=xe+12;Le<Oe;Le+=4)A[Le>>2]=0;for(Oe=xe+12;Le<Oe;)w[Le++>>0]=0;var Ce=1,Te=0,Ie=[],Se=[];function Pe(t,e,n,r){return t*=n,r*=Math.floor((t+r-1)/r),0>=e?0:(e-1)*r+t}function Be(t,e,n,r,a){switch(e){case 6406:case 6409:case 6402:e=1;break;case 6410:e=2;break;case 6407:case 35904:e=3;break;case 6408:case 35906:e=4;break;default:return Te||(Te=1280),null}switch(t){case 5121:e*=1;break;case 5123:case 36193:e*=2;break;case 5125:case 5126:e*=4;break;case 34042:e=4;break;case 33635:case 32819:case 32820:e=2;break;default:return Te||(Te=1280),null}switch(n=Pe(n,r,e,4),t){case 5121:return g.subarray(a,a+n);case 5126:return x.subarray(a>>2,a+n>>2);case 5125:case 34042:return z.subarray(a>>2,a+n>>2);case 5123:case 33635:case 32819:case 32820:case 36193:return k.subarray(a>>1,a+n>>1);default:return Te||(Te=1280),null}}function Ee(){return Ee.j||(Ee.j=[]),Ee.j.push(Mn()),Ee.j.length-1}var De={},Fe=1;function Re(t){return 0==t%4&&(0!=t%100||0==t%400)}function Ve(t,e){for(var n=0,r=0;r<=e;n+=t[r++]);return n}var je,qe=[31,29,31,30,31,30,31,31,30,31,30,31],Ne=[31,28,31,30,31,30,31,31,30,31,30,31];function Ge(t,e){for(t=new Date(t.getTime());0<e;){var n=t.getMonth(),r=(Re(t.getFullYear())?qe:Ne)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return t}function Ue(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function u(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function o(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function s(t){t=Ge(new Date(t.l+1900,0,1),t.R);var e=o(new Date(t.getFullYear()+1,0,4));return 0>=u(o(new Date(t.getFullYear(),0,4)),t)?0>=u(e,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=A[r+40>>2];for(var f in r={Ja:A[r>>2],Ia:A[r+4>>2],P:A[r+8>>2],H:A[r+12>>2],C:A[r+16>>2],l:A[r+20>>2],qa:A[r+24>>2],R:A[r+28>>2],Pc:A[r+32>>2],Ha:A[r+36>>2],Ka:c?y(c):""},n=y(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S"})n=n.replace(new RegExp(f,"g"),c[f]);var _="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),l="January February March April May June July August September October November December".split(" ");for(f in c={"%a":function(t){return _[t.qa].substring(0,3)},"%A":function(t){return _[t.qa]},"%b":function(t){return l[t.C].substring(0,3)},"%B":function(t){return l[t.C]},"%C":function(t){return i((t.l+1900)/100|0,2)},"%d":function(t){return i(t.H,2)},"%e":function(t){return a(t.H,2," ")},"%g":function(t){return s(t).toString().substring(2)},"%G":function(t){return s(t)},"%H":function(t){return i(t.P,2)},"%I":function(t){return 0==(t=t.P)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){return i(t.H+Ve(Re(t.l+1900)?qe:Ne,t.C-1),3)},"%m":function(t){return i(t.C+1,2)},"%M":function(t){return i(t.Ia,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.P&&12>t.P?"AM":"PM"},"%S":function(t){return i(t.Ja,2)},"%t":function(){return"\\t"},"%u":function(t){return new Date(t.l+1900,t.C+1,t.H,0,0,0,0).getDay()||7},"%U":function(t){var e=new Date(t.l+1900,0,1),n=0===e.getDay()?e:Ge(e,7-e.getDay());return 0>u(n,t=new Date(t.l+1900,t.C,t.H))?i(Math.ceil((31-n.getDate()+(Ve(Re(t.getFullYear())?qe:Ne,t.getMonth()-1)-31)+t.getDate())/7),2):0===u(n,e)?"01":"00"},"%V":function(t){var e=o(new Date(t.l+1900,0,4)),n=o(new Date(t.l+1901,0,4)),r=Ge(new Date(t.l+1900,0,1),t.R);return 0>u(r,e)?"53":0>=u(n,r)?"01":i(Math.ceil((e.getFullYear()<t.l+1900?t.R+32-e.getDate():t.R+1-e.getDate())/7),2)},"%w":function(t){return new Date(t.l+1900,t.C+1,t.H,0,0,0,0).getDay()},"%W":function(t){var e=new Date(t.l,0,1),n=1===e.getDay()?e:Ge(e,0===e.getDay()?1:7-e.getDay()+1);return 0>u(n,t=new Date(t.l+1900,t.C,t.H))?i(Math.ceil((31-n.getDate()+(Ve(Re(t.getFullYear())?qe:Ne,t.getMonth()-1)-31)+t.getDate())/7),2):0===u(n,e)?"01":"00"},"%y":function(t){return(t.l+1900).toString().substring(2)},"%Y":function(t){return t.l+1900},"%z":function(t){var e=0<=(t=t.Ha);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Ka},"%%":function(){return"%"}})0<=n.indexOf(f)&&(n=n.replace(new RegExp(f,"g"),c[f](r)));return(f=We(n,!1)).length>e?0:(w.set(f,t),f.length-1)}_t="undefined"!=typeof dateNow?dateNow:"object"==typeof self&&self.performance&&"function"==typeof self.performance.now?function(){return self.performance.now()}:"object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now,se(),Et=Array(4096),$t(Tt,"/"),ee("/tmp"),ee("/home"),ee("/home/web_user"),function(){if(ee("/dev"),Qt(259,{read:function(){return 0},write:function(t,e,n,r){return r}}),ne("/dev/null",259),xt(1280,Lt),xt(1536,Ct),ne("/dev/tty",1280),ne("/dev/tty1",1536),"undefined"!=typeof crypto)var t=new Uint8Array(1),e=function(){return crypto.getRandomValues(t),t[0]};else e=function(){An("random_device")};ce("random",e),ce("urandom",e),ee("/dev/shm"),ee("/dev/shm/tmp")}(),ee("/proc"),ee("/proc/self"),ee("/proc/self/fd"),$t({A:function(){var t=Ut("/proc/self","fd",16895,73);return t.c={lookup:function(t,e){var n=Pt[+e];if(!n)throw new Rt(pt.B);return(t={parent:null,A:{pa:"fake"},c:{readlink:function(){return n.path}}}).parent=t}},t}},"/proc/self/fd"),Z.unshift((function(){if(!e.noFSInit&&!Xt){d(!Xt,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Xt=!0,se(),e.stdin=e.stdin,e.stdout=e.stdout,e.stderr=e.stderr,e.stdin?ce("stdin",e.stdin):re("/dev/tty","/dev/stdin"),e.stdout?ce("stdout",null,e.stdout):re("/dev/tty","/dev/stdout"),e.stderr?ce("stderr",null,e.stderr):re("/dev/tty1","/dev/stderr");var t=ie("/dev/stdin","r");d(0===t.fd,"invalid handle for stdin ("+t.fd+")"),d(1===(t=ie("/dev/stdout","w")).fd,"invalid handle for stdout ("+t.fd+")"),d(2===(t=ie("/dev/stderr","w")).fd,"invalid handle for stderr ("+t.fd+")")}})),Y.push((function(){Dt=!1})),K.push((function(){Xt=!1;var t=e._fflush;for(t&&t(0),t=0;t<Pt.length;t++){var n=Pt[t];n&&ue(n)}})),Z.unshift((function(){})),K.push((function(){})),je="undefined"==typeof ENVIRONMENT_IS_FETCH_WORKER,function(t,e){try{var n=indexedDB.open("emscripten_filesystem",1)}catch(t){return void e(t)}n.onupgradeneeded=function(t){(t=t.target.result).objectStoreNames.contains("FILES")&&t.deleteObjectStore("FILES"),t.createObjectStore("FILES")},n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){e(t)}}((function(t){we=t,je&&ot()}),(function(){we=!1,je&&ot()})),"undefined"!=typeof ENVIRONMENT_IS_FETCH_WORKER&&ENVIRONMENT_IS_FETCH_WORKER||ut();for(var He=0;256>He;He++);for(He=0;32>He;He++)Se.push(Array(He));function We(t,e){var n=Array(V(t)+1);return t=R(t,n,0,n.length),e&&(n.length=t),n}B=c(4),T=I=_(L),P=_(S=T+G),A[B>>2]=P,C=!0,e.wasmTableSize=2396,e.wasmMaxTableSize=2396,e.ua={},e.va={abort:An,assert:d,enlargeMemory:N,getTotalMemory:function(){return U},abortOnCannotGrowMemory:function(){An("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+U+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},invoke_i:function(t){var n=Mn();try{return e.dynCall_i(t)}catch(t){if(gn(n),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_ii:function(t,n){var r=Mn();try{return e.dynCall_ii(t,n)}catch(t){if(gn(r),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iii:function(t,n,r){var a=Mn();try{return e.dynCall_iii(t,n,r)}catch(t){if(gn(a),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiii:function(t,n,r,a){var i=Mn();try{return e.dynCall_iiii(t,n,r,a)}catch(t){if(gn(i),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiiii:function(t,n,r,a,i){var u=Mn();try{return e.dynCall_iiiii(t,n,r,a,i)}catch(t){if(gn(u),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiiiid:function(t,n,r,a,i,u){var o=Mn();try{return e.dynCall_iiiiid(t,n,r,a,i,u)}catch(t){if(gn(o),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiiiii:function(t,n,r,a,i,u){var o=Mn();try{return e.dynCall_iiiiii(t,n,r,a,i,u)}catch(t){if(gn(o),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiiiiid:function(t,n,r,a,i,u,o){var s=Mn();try{return e.dynCall_iiiiiid(t,n,r,a,i,u,o)}catch(t){if(gn(s),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiiiiii:function(t,n,r,a,i,u,o){var s=Mn();try{return e.dynCall_iiiiiii(t,n,r,a,i,u,o)}catch(t){if(gn(s),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiiiiiii:function(t,n,r,a,i,u,o,s){var c=Mn();try{return e.dynCall_iiiiiiii(t,n,r,a,i,u,o,s)}catch(t){if(gn(c),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiiiiiiii:function(t,n,r,a,i,u,o,s,c){var f=Mn();try{return e.dynCall_iiiiiiiii(t,n,r,a,i,u,o,s,c)}catch(t){if(gn(f),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiiiij:function(t,n,r,a,i,u,o){var s=Mn();try{return e.dynCall_iiiiij(t,n,r,a,i,u,o)}catch(t){if(gn(s),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_v:function(t){var n=Mn();try{e.dynCall_v(t)}catch(t){if(gn(n),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_vi:function(t,n){var r=Mn();try{e.dynCall_vi(t,n)}catch(t){if(gn(r),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_vii:function(t,n,r){var a=Mn();try{e.dynCall_vii(t,n,r)}catch(t){if(gn(a),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiffii:function(t,n,r,a,i,u,o){var s=Mn();try{e.dynCall_viiffii(t,n,r,a,i,u,o)}catch(t){if(gn(s),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viii:function(t,n,r,a){var i=Mn();try{e.dynCall_viii(t,n,r,a)}catch(t){if(gn(i),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiif:function(t,n,r,a,i){var u=Mn();try{e.dynCall_viiif(t,n,r,a,i)}catch(t){if(gn(u),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiifffii:function(t,n,r,a,i,u,o,s,c){var f=Mn();try{e.dynCall_viiifffii(t,n,r,a,i,u,o,s,c)}catch(t){if(gn(f),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiiffii:function(t,n,r,a,i,u,o,s){var c=Mn();try{e.dynCall_viiiffii(t,n,r,a,i,u,o,s)}catch(t){if(gn(c),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiii:function(t,n,r,a,i){var u=Mn();try{e.dynCall_viiii(t,n,r,a,i)}catch(t){if(gn(u),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiiii:function(t,n,r,a,i,u){var o=Mn();try{e.dynCall_viiiii(t,n,r,a,i,u)}catch(t){if(gn(o),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiiiiffffffffffffffff:function(t,n,r,a,i,u,o,s,c,f,_,l,p,d,h,m,b,y,v,w,g,M){var k=Mn();try{e.dynCall_viiiiiffffffffffffffff(t,n,r,a,i,u,o,s,c,f,_,l,p,d,h,m,b,y,v,w,g,M)}catch(t){if(gn(k),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiiiii:function(t,n,r,a,i,u,o){var s=Mn();try{e.dynCall_viiiiii(t,n,r,a,i,u,o)}catch(t){if(gn(s),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viijii:function(t,n,r,a,i,u,o){var s=Mn();try{e.dynCall_viijii(t,n,r,a,i,u,o)}catch(t){if(gn(s),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},___buildEnvironment:function t(n){if(t.j)var r=A[n>>2],a=A[r>>2];else t.j=!0,ft.USER=ft.LOGNAME="web_user",ft.PATH="/",ft.PWD="/",ft.HOME="/home/web_user",ft.LANG="C.UTF-8",ft._=e.thisProgram,a=C?J?yn(1024):f(1024):c(1024),r=C?J?yn(256):f(256):c(256),A[r>>2]=a,A[n>>2]=r;n=[];var i,u=0;for(i in ft)if("string"==typeof ft[i]){var o=i+"="+ft[i];n.push(o),u+=o.length}if(1024<u)throw Error("Environment size exceeded TOTAL_ENV_SIZE!");for(i=0;i<n.length;i++){u=o=n[i];for(var s=a,_=0;_<u.length;++_)w[s++>>0]=u.charCodeAt(_);w[s>>0]=0,A[r+4*i>>2]=a,a+=o.length+1}A[r+4*n.length>>2]=0},___clock_gettime:function(){return ht.apply(null,arguments)},___cxa_allocate_exception:function(t){return yn(t)},___cxa_begin_catch:function(t){var e=yt[t];e&&!e.ja&&(e.ja=!0,dn.X--),e&&(e.Fa=!1),bt.push(t);t:{if(t&&!yt[t])for(n in yt)if(yt[e=+n].ha===t){var n=e;break t}n=t}return n&&yt[n].Da++,t},___cxa_find_matching_catch:function t(){var n=mt;if(!n)return 0|(vn(0),0);var r=yt[n],a=r.type;if(!a)return 0|(vn(0),n);var i=Array.prototype.slice.call(arguments);e.___cxa_is_pointer_type(a),t.buffer||(t.buffer=yn(4)),A[t.buffer>>2]=n,n=t.buffer;for(var u=0;u<i.length;u++)if(i[u]&&e.___cxa_can_catch(i[u],a,n))return n=A[n>>2],r.ha=n,0|(vn(i[u]),n);return n=A[n>>2],0|(vn(a),n)},___cxa_pure_virtual:function(){throw p=!0,"Pure virtual function called!"},___cxa_throw:function(t,e,n){throw yt[t]={Ca:t,ha:t,type:e,Kc:n,Da:0,ja:!1,Fa:!1},mt=t,"uncaught_exception"in dn?dn.X++:dn.X=1,t+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."},___cxa_uncaught_exception:function(){return!!dn.X},___gxx_personality_v0:function(){},___lock:function(){},___map_file:function(){return dt(pt.I),-1},___resumeException:function(t){throw mt||(mt=t),t+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."},___setErrNo:dt,___syscall140:function(t,e){me=e;try{var n=ye();be();var r=be(),a=be(),i=be();return oe(n,r,i),A[a>>2]=n.position,n.Z&&0===r&&0===i&&(n.Z=null),0}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___syscall145:function(t,e){me=e;try{var n=ye(),r=be();t:{var a=be();for(e=t=0;e<a;e++){var i=A[r+(8*e+4)>>2],u=n,o=A[r+8*e>>2],s=i,c=void 0,f=w;if(0>s||0>c)throw new Rt(pt.i);if(null===u.fd)throw new Rt(pt.B);if(1==(2097155&u.flags))throw new Rt(pt.B);if(16384==(61440&u.node.mode))throw new Rt(pt.K);if(!u.f.read)throw new Rt(pt.i);var _=void 0!==c;if(_){if(!u.seekable)throw new Rt(pt.L)}else c=u.position;var l=u.f.read(u,f,o,s,c);_||(u.position+=l);var p=l;if(0>p){var d=-1;break t}if(t+=p,p<i)break}d=t}return d}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___syscall146:function(t,e){me=e;try{var n=ye(),r=be();t:{var a=be();for(e=t=0;e<a;e++){var i=n,u=A[r+8*e>>2],o=A[r+(8*e+4)>>2],s=w,c=void 0;if(0>o||0>c)throw new Rt(pt.i);if(null===i.fd)throw new Rt(pt.B);if(0==(2097155&i.flags))throw new Rt(pt.B);if(16384==(61440&i.node.mode))throw new Rt(pt.K);if(!i.f.write)throw new Rt(pt.i);1024&i.flags&&oe(i,0,2);var f=void 0!==c;if(f){if(!i.seekable)throw new Rt(pt.L)}else c=i.position;var _=i.f.write(i,s,u,o,c,void 0);f||(i.position+=_);try{i.path&&Ft.onWriteToFile&&Ft.onWriteToFile(i.path)}catch(t){console.log("FS.trackingDelegate[\'onWriteToFile\'](\'"+path+"\') threw an exception: "+t.message)}var l=_;if(0>l){var p=-1;break t}t+=l}p=t}return p}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___syscall196:function(t,e){me=e;try{var n=y(be());t:{var r=be();try{var a=jt(n,{Y:!1}).node;if(!a)throw new Rt(pt.u);if(!a.c.m)throw new Rt(pt.I);var i=a.c.m(a)}catch(t){if(t&&t.node&&gt(n)!==gt(qt(t.node))){var u=-pt.V;break t}throw t}A[r>>2]=i.dev,A[r+4>>2]=0,A[r+8>>2]=i.ino,A[r+12>>2]=i.mode,A[r+16>>2]=i.nlink,A[r+20>>2]=i.uid,A[r+24>>2]=i.gid,A[r+28>>2]=i.rdev,A[r+32>>2]=0,A[r+36>>2]=i.size,A[r+40>>2]=4096,A[r+44>>2]=i.blocks,A[r+48>>2]=i.atime.getTime()/1e3|0,A[r+52>>2]=0,A[r+56>>2]=i.mtime.getTime()/1e3|0,A[r+60>>2]=0,A[r+64>>2]=i.ctime.getTime()/1e3|0,A[r+68>>2]=0,A[r+72>>2]=i.ino,u=0}return u}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___syscall221:function(t,e){me=e;try{var n=ye();switch(be()){case 0:var r=be();return 0>r?-pt.i:ie(n.path,n.flags,0,r).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return r=be(),n.flags|=r,0;case 12:case 12:return r=be(),M[r+0>>1]=2,0;case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-pt.i;case 9:return dt(pt.i),-1;default:return-pt.i}}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___syscall5:function(t,e){me=e;try{return ie(y(be()),be(),be()).fd}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___syscall54:function(t,e){me=e;try{var n=ye(),r=be();switch(r){case 21509:case 21505:return n.tty?0:-pt.D;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-pt.D;case 21519:if(!n.tty)return-pt.D;var a=be();return A[a>>2]=0;case 21520:return n.tty?-pt.i:-pt.D;case 21531:if(t=a=be(),!n.f.za)throw new Rt(pt.D);return n.f.za(n,r,t);case 21523:case 21524:return n.tty?0:-pt.D;default:An("bad ioctl syscall "+r)}}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___syscall6:function(t,e){me=e;try{return ue(ye()),0}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___syscall91:function(t,e){me=e;try{var n=be(),r=be(),a=he[n];if(!a)return 0;if(r===a.Mc){var i=Pt[a.fd],u=a.flags,o=new Uint8Array(g.subarray(n,n+r));i&&i.f.O&&i.f.O(i,o,0,r,u),he[n]=null,a.ta&&bn(a.Nc)}return 0}catch(t){return void 0!==de&&t instanceof Rt||An(t),-t.v}},___unlock:function(){},__addDays:Ge,__arraySum:Ve,__emscripten_fetch_cache_data:ke,__emscripten_fetch_delete_cached_data:ze,__emscripten_fetch_load_cached_data:Ae,__emscripten_fetch_xhr:Me,__emscripten_get_fetch_work_queue:function(){return xe},__isLeapYear:Re,_abort:function(){e.abort()},_clock_gettime:ht,_emidentity:function(){var t=new URL(location.origin).hostname;0===t.length&&(t=new URL(location.href.replace("blob:","")).hostname),/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)&&(0===t.indexOf("10.")&&(t="10.*"),0===t.indexOf("192.168.")&&(t="192.168.*"),0===t.indexOf("127.")&&(t="127.*"));var e=V(t)+1,n=yn(e);return R(t,g,n,e+1),n},_emscripten_get_now:_t,_emscripten_get_now_is_monotonic:lt,_emscripten_is_main_browser_thread:function(){return!1},_emscripten_is_main_runtime_thread:function(){return 1},_emscripten_memcpy_big:function(t,e,n){return g.set(g.subarray(e,e+n),t),t},_emscripten_start_fetch:function(t,n,r,a){function i(t){l?e.dynCall_vi(l,t):r&&r(t)}function u(t){p?e.dynCall_vi(p,t):a&&a(t)}function o(t,r){ke(we,t,r.response,(function(t){_?e.dynCall_vi(_,t):n&&n(t)}),(function(t){_?e.dynCall_vi(_,t):n&&n(t)}))}function s(t){_?e.dynCall_vi(_,t):n&&n(t)}void 0!==e&&(e.noExitRuntime=!0);var c=t+112,f=y(c),_=z[c+36>>2],l=z[c+40>>2],p=z[c+44>>2],d=z[c+48>>2],h=!!(4&d),m=!!(32&d);if(16&d&&"EM_IDB_STORE"!==f&&"EM_IDB_DELETE"!==f){if(m)return 0;Me(t,h?o:s,i,u)}else{if(!we)return i(t),0;"EM_IDB_STORE"===f?(f=z[c+80>>2],c=g.slice(f,f+z[c+84>>2]),ke(we,t,c,s,i)):"EM_IDB_DELETE"===f?ze(we,t,s,i):Ae(we,t,s,m?i:h?function(t){Me(t,o,i,u)}:function(t){Me(t,s,i,u)})}return t},_getenv:function t(e){if(0===e)return 0;if(e=y(e),!ft.hasOwnProperty(e))return 0;t.j&&bn(t.j);var n=V(e=ft[e])+1,r=yn(n);return r&&R(e,w,r,n),t.j=r},_glBindTexture:function(t,e){(void 0).bindTexture(t,e?Ie[e]:null)},_glGenTextures:function(t,e){for(var n=0;n<t;n++){var r=(void 0).createTexture();if(!r){for(Te||(Te=1282);n<t;)A[e+4*n++>>2]=0;break}for(var a=Ie,i=Ce++,u=a.length;u<i;u++)a[u]=null;a=i,r.name=a,Ie[a]=r,A[e+4*n>>2]=a}},_glTexImage2D:function(t,e,n,r,a,i,u,o,s){var c=null;s&&(c=Be(o,u,r,a,s)),(void 0).texImage2D(t,e,n,r,a,i,u,o,c)},_glTexParameteri:function(t,e,n){(void 0).texParameteri(t,e,n)},_llvm_exp2_f32:function(t){return Math.pow(2,t)},_llvm_stackrestore:function(t){var e=Ee.j[t];Ee.j.splice(t,1),gn(e)},_llvm_stacksave:Ee,_llvm_trap:function(){An("trap!")},_pthread_cond_wait:function(){return 0},_pthread_getspecific:function(t){return De[t]||0},_pthread_key_create:function(t){return 0==t?pt.i:(A[t>>2]=Fe,De[Fe]=0,Fe++,0)},_pthread_mutex_destroy:function(){},_pthread_mutex_init:function(){},_pthread_once:function t(n,r){t.j||(t.j={}),n in t.j||(e.dynCall_v(r),t.j[n]=1)},_pthread_setspecific:function(t,e){return t in De?(De[t]=e,0):pt.i},_strftime:Ue,_strftime_l:function(t,e,n,r){return Ue(t,e,n,r)},emscriptenWebGLComputeImageSize:Pe,emscriptenWebGLGetTexPixelData:Be,DYNAMICTOP_PTR:B,tempDoublePtr:ct,STACKTOP:I,STACK_MAX:S};var Ze=e.asm(e.ua,e.va,v);e.asm=Ze;var Ye=e.__GLOBAL__I_000101=function(){return e.asm.__GLOBAL__I_000101.apply(null,arguments)},Ke=e.__GLOBAL__sub_I_AZHighLevelEncoder_cpp=function(){return e.asm.__GLOBAL__sub_I_AZHighLevelEncoder_cpp.apply(null,arguments)},Xe=e.__GLOBAL__sub_I_CameraSource_cpp=function(){return e.asm.__GLOBAL__sub_I_CameraSource_cpp.apply(null,arguments)},Je=e.__GLOBAL__sub_I_CharacterSetECI_cpp=function(){return e.asm.__GLOBAL__sub_I_CharacterSetECI_cpp.apply(null,arguments)},Qe=e.__GLOBAL__sub_I_DMECEncoder_cpp=function(){return e.asm.__GLOBAL__sub_I_DMECEncoder_cpp.apply(null,arguments)},$e=e.__GLOBAL__sub_I_DMHighLevelEncoder_cpp=function(){return e.asm.__GLOBAL__sub_I_DMHighLevelEncoder_cpp.apply(null,arguments)},tn=e.__GLOBAL__sub_I_GridSampler_cpp=function(){return e.asm.__GLOBAL__sub_I_GridSampler_cpp.apply(null,arguments)},en=e.__GLOBAL__sub_I_ODCode128Patterns_cpp=function(){return e.asm.__GLOBAL__sub_I_ODCode128Patterns_cpp.apply(null,arguments)},nn=e.__GLOBAL__sub_I_ODRSSExpandedReader_cpp=function(){return e.asm.__GLOBAL__sub_I_ODRSSExpandedReader_cpp.apply(null,arguments)},rn=e.__GLOBAL__sub_I_PDFDetector_cpp=function(){return e.asm.__GLOBAL__sub_I_PDFDetector_cpp.apply(null,arguments)},an=e.__GLOBAL__sub_I_barcode_finder_cpp=function(){return e.asm.__GLOBAL__sub_I_barcode_finder_cpp.apply(null,arguments)},un=e.__GLOBAL__sub_I_face_mesh_cpp=function(){return e.asm.__GLOBAL__sub_I_face_mesh_cpp.apply(null,arguments)},on=e.__GLOBAL__sub_I_face_tracker_cpp=function(){return e.asm.__GLOBAL__sub_I_face_tracker_cpp.apply(null,arguments)},sn=e.__GLOBAL__sub_I_image_tracker_cpp=function(){return e.asm.__GLOBAL__sub_I_image_tracker_cpp.apply(null,arguments)},cn=e.__GLOBAL__sub_I_inference_cc=function(){return e.asm.__GLOBAL__sub_I_inference_cc.apply(null,arguments)},fn=e.__GLOBAL__sub_I_instant_tracker_cpp=function(){return e.asm.__GLOBAL__sub_I_instant_tracker_cpp.apply(null,arguments)},_n=e.__GLOBAL__sub_I_iostream_cpp=function(){return e.asm.__GLOBAL__sub_I_iostream_cpp.apply(null,arguments)},ln=e.__GLOBAL__sub_I_pipeline_cpp=function(){return e.asm.__GLOBAL__sub_I_pipeline_cpp.apply(null,arguments)},pn=e.__GLOBAL__sub_I_zappar_face_tracker_cpp=function(){return e.asm.__GLOBAL__sub_I_zappar_face_tracker_cpp.apply(null,arguments)};e.__Z20zappar_face_mesh_uvsP19zappar_face_mesh_ti=function(){return e.asm.__Z20zappar_face_mesh_uvsP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z23zappar_face_mesh_updateP19zappar_face_mesh_tiPKfS2_i=function(){return e.asm.__Z23zappar_face_mesh_updateP19zappar_face_mesh_tiPKfS2_i.apply(null,arguments)},e.__Z24zappar_face_mesh_indicesP19zappar_face_mesh_ti=function(){return e.asm.__Z24zappar_face_mesh_indicesP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z24zappar_face_mesh_normalsP19zappar_face_mesh_ti=function(){return e.asm.__Z24zappar_face_mesh_normalsP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z25zappar_face_mesh_uvs_sizeP19zappar_face_mesh_ti=function(){return e.asm.__Z25zappar_face_mesh_uvs_sizeP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z25zappar_face_mesh_verticesP19zappar_face_mesh_ti=function(){return e.asm.__Z25zappar_face_mesh_verticesP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z29zappar_face_mesh_indices_sizeP19zappar_face_mesh_ti=function(){return e.asm.__Z29zappar_face_mesh_indices_sizeP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z29zappar_face_mesh_normals_sizeP19zappar_face_mesh_ti=function(){return e.asm.__Z29zappar_face_mesh_normals_sizeP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z30zappar_face_mesh_vertices_sizeP19zappar_face_mesh_ti=function(){return e.asm.__Z30zappar_face_mesh_vertices_sizeP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z31zappar_face_mesh_loaded_versionP19zappar_face_mesh_ti=function(){return e.asm.__Z31zappar_face_mesh_loaded_versionP19zappar_face_mesh_ti.apply(null,arguments)},e.__Z33zappar_face_mesh_load_from_memoryP19zappar_face_mesh_tiPKci=function(){return e.asm.__Z33zappar_face_mesh_load_from_memoryP19zappar_face_mesh_tiPKci.apply(null,arguments)},e.__Z42zappar_image_tracker_target_load_from_fileP23zappar_image_tracker_tiPKc=function(){return e.asm.__Z42zappar_image_tracker_target_load_from_fileP23zappar_image_tracker_tiPKc.apply(null,arguments)};var dn=e.__ZSt18uncaught_exceptionv=function(){return e.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)};e.___cxa_can_catch=function(){return e.asm.___cxa_can_catch.apply(null,arguments)},e.___cxa_is_pointer_type=function(){return e.asm.___cxa_is_pointer_type.apply(null,arguments)},e.___em_js__emidentity=function(){return e.asm.___em_js__emidentity.apply(null,arguments)};var hn=e.___emscripten_environ_constructor=function(){return e.asm.___emscripten_environ_constructor.apply(null,arguments)};e.___errno_location=function(){return e.asm.___errno_location.apply(null,arguments)},e.__get_environ=function(){return e.asm.__get_environ.apply(null,arguments)};var mn=e._emscripten_replace_memory=function(){return e.asm._emscripten_replace_memory.apply(null,arguments)},bn=e._free=function(){return e.asm._free.apply(null,arguments)};e._llvm_bswap_i32=function(){return e.asm._llvm_bswap_i32.apply(null,arguments)},e._llvm_round_f32=function(){return e.asm._llvm_round_f32.apply(null,arguments)};var yn=e._malloc=function(){return e.asm._malloc.apply(null,arguments)};e._memcpy=function(){return e.asm._memcpy.apply(null,arguments)},e._memmove=function(){return e.asm._memmove.apply(null,arguments)},e._memset=function(){return e.asm._memset.apply(null,arguments)},e._pthread_cond_broadcast=function(){return e.asm._pthread_cond_broadcast.apply(null,arguments)},e._pthread_mutex_lock=function(){return e.asm._pthread_mutex_lock.apply(null,arguments)},e._pthread_mutex_unlock=function(){return e.asm._pthread_mutex_unlock.apply(null,arguments)},e._round=function(){return e.asm._round.apply(null,arguments)},e._sbrk=function(){return e.asm._sbrk.apply(null,arguments)},e._zappar_barcode_finder_create=function(){return e.asm._zappar_barcode_finder_create.apply(null,arguments)},e._zappar_barcode_finder_destroy=function(){return e.asm._zappar_barcode_finder_destroy.apply(null,arguments)},e._zappar_barcode_finder_enabled=function(){return e.asm._zappar_barcode_finder_enabled.apply(null,arguments)},e._zappar_barcode_finder_enabled_set=function(){return e.asm._zappar_barcode_finder_enabled_set.apply(null,arguments)},e._zappar_barcode_finder_formats=function(){return e.asm._zappar_barcode_finder_formats.apply(null,arguments)},e._zappar_barcode_finder_formats_set=function(){return e.asm._zappar_barcode_finder_formats_set.apply(null,arguments)},e._zappar_barcode_finder_found_format=function(){return e.asm._zappar_barcode_finder_found_format.apply(null,arguments)},e._zappar_barcode_finder_found_number=function(){return e.asm._zappar_barcode_finder_found_number.apply(null,arguments)},e._zappar_barcode_finder_found_text=function(){return e.asm._zappar_barcode_finder_found_text.apply(null,arguments)},e._zappar_camera_default_device_id=function(){return e.asm._zappar_camera_default_device_id.apply(null,arguments)},e._zappar_camera_source_create=function(){return e.asm._zappar_camera_source_create.apply(null,arguments)},e._zappar_camera_source_destroy=function(){return e.asm._zappar_camera_source_destroy.apply(null,arguments)},e._zappar_camera_source_pause=function(){return e.asm._zappar_camera_source_pause.apply(null,arguments)},e._zappar_camera_source_start=function(){return e.asm._zappar_camera_source_start.apply(null,arguments)},e._zappar_face_mesh_create=function(){return e.asm._zappar_face_mesh_create.apply(null,arguments)},e._zappar_face_mesh_destroy=function(){return e.asm._zappar_face_mesh_destroy.apply(null,arguments)},e._zappar_face_tracker_anchor_count=function(){return e.asm._zappar_face_tracker_anchor_count.apply(null,arguments)},e._zappar_face_tracker_anchor_expression_coefficients=function(){return e.asm._zappar_face_tracker_anchor_expression_coefficients.apply(null,arguments)},e._zappar_face_tracker_anchor_id=function(){return e.asm._zappar_face_tracker_anchor_id.apply(null,arguments)},e._zappar_face_tracker_anchor_identity_coefficients=function(){return e.asm._zappar_face_tracker_anchor_identity_coefficients.apply(null,arguments)},e._zappar_face_tracker_anchor_pose_raw=function(){return e.asm._zappar_face_tracker_anchor_pose_raw.apply(null,arguments)},e._zappar_face_tracker_create=function(){return e.asm._zappar_face_tracker_create.apply(null,arguments)},e._zappar_face_tracker_destroy=function(){return e.asm._zappar_face_tracker_destroy.apply(null,arguments)},e._zappar_face_tracker_enabled=function(){return e.asm._zappar_face_tracker_enabled.apply(null,arguments)},e._zappar_face_tracker_enabled_set=function(){return e.asm._zappar_face_tracker_enabled_set.apply(null,arguments)},e._zappar_face_tracker_max_faces=function(){return e.asm._zappar_face_tracker_max_faces.apply(null,arguments)},e._zappar_face_tracker_max_faces_set=function(){return e.asm._zappar_face_tracker_max_faces_set.apply(null,arguments)},e._zappar_face_tracker_model_load_from_memory=function(){return e.asm._zappar_face_tracker_model_load_from_memory.apply(null,arguments)},e._zappar_face_tracker_model_loaded_version=function(){return e.asm._zappar_face_tracker_model_loaded_version.apply(null,arguments)},e._zappar_has_initialized=function(){return e.asm._zappar_has_initialized.apply(null,arguments)},e._zappar_image_tracker_anchor_count=function(){return e.asm._zappar_image_tracker_anchor_count.apply(null,arguments)},e._zappar_image_tracker_anchor_id=function(){return e.asm._zappar_image_tracker_anchor_id.apply(null,arguments)},e._zappar_image_tracker_anchor_pose_raw=function(){return e.asm._zappar_image_tracker_anchor_pose_raw.apply(null,arguments)},e._zappar_image_tracker_create=function(){return e.asm._zappar_image_tracker_create.apply(null,arguments)},e._zappar_image_tracker_destroy=function(){return e.asm._zappar_image_tracker_destroy.apply(null,arguments)},e._zappar_image_tracker_enabled=function(){return e.asm._zappar_image_tracker_enabled.apply(null,arguments)},e._zappar_image_tracker_enabled_set=function(){return e.asm._zappar_image_tracker_enabled_set.apply(null,arguments)},e._zappar_image_tracker_target_load_from_memory=function(){return e.asm._zappar_image_tracker_target_load_from_memory.apply(null,arguments)},e._zappar_image_tracker_target_loaded_version=function(){return e.asm._zappar_image_tracker_target_loaded_version.apply(null,arguments)},e._zappar_instant_world_tracker_anchor_pose_raw=function(){return e.asm._zappar_instant_world_tracker_anchor_pose_raw.apply(null,arguments)},e._zappar_instant_world_tracker_anchor_pose_set_from_camera_offset=function(){return e.asm._zappar_instant_world_tracker_anchor_pose_set_from_camera_offset.apply(null,arguments)},e._zappar_instant_world_tracker_create=function(){return e.asm._zappar_instant_world_tracker_create.apply(null,arguments)},e._zappar_instant_world_tracker_destroy=function(){return e.asm._zappar_instant_world_tracker_destroy.apply(null,arguments)},e._zappar_instant_world_tracker_enabled=function(){return e.asm._zappar_instant_world_tracker_enabled.apply(null,arguments)},e._zappar_instant_world_tracker_enabled_set=function(){return e.asm._zappar_instant_world_tracker_enabled_set.apply(null,arguments)},e._zappar_invert=function(){return e.asm._zappar_invert.apply(null,arguments)},e._zappar_pipeline_camera_frame_camera_attitude=function(){return e.asm._zappar_pipeline_camera_frame_camera_attitude.apply(null,arguments)},e._zappar_pipeline_camera_frame_submit=function(){return e.asm._zappar_pipeline_camera_frame_submit.apply(null,arguments)},e._zappar_pipeline_camera_frame_texture_gl=function(){return e.asm._zappar_pipeline_camera_frame_texture_gl.apply(null,arguments)},e._zappar_pipeline_camera_frame_texture_matrix=function(){return e.asm._zappar_pipeline_camera_frame_texture_matrix.apply(null,arguments)},e._zappar_pipeline_camera_frame_upload_gl=function(){return e.asm._zappar_pipeline_camera_frame_upload_gl.apply(null,arguments)},e._zappar_pipeline_camera_frame_user_data=function(){return e.asm._zappar_pipeline_camera_frame_user_data.apply(null,arguments)},e._zappar_pipeline_camera_frame_user_facing=function(){return e.asm._zappar_pipeline_camera_frame_user_facing.apply(null,arguments)},e._zappar_pipeline_camera_model=function(){return e.asm._zappar_pipeline_camera_model.apply(null,arguments)},e._zappar_pipeline_camera_pose_default=function(){return e.asm._zappar_pipeline_camera_pose_default.apply(null,arguments)},e._zappar_pipeline_camera_pose_with_attitude=function(){return e.asm._zappar_pipeline_camera_pose_with_attitude.apply(null,arguments)},e._zappar_pipeline_camera_pose_with_origin=function(){return e.asm._zappar_pipeline_camera_pose_with_origin.apply(null,arguments)},e._zappar_pipeline_create=function(){return e.asm._zappar_pipeline_create.apply(null,arguments)},e._zappar_pipeline_destroy=function(){return e.asm._zappar_pipeline_destroy.apply(null,arguments)},e._zappar_pipeline_frame_number=function(){return e.asm._zappar_pipeline_frame_number.apply(null,arguments)},e._zappar_pipeline_frame_update=function(){return e.asm._zappar_pipeline_frame_update.apply(null,arguments)},e._zappar_pipeline_motion_accelerometer_submit=function(){return e.asm._zappar_pipeline_motion_accelerometer_submit.apply(null,arguments)},e._zappar_pipeline_motion_attitude_submit=function(){return e.asm._zappar_pipeline_motion_attitude_submit.apply(null,arguments)},e._zappar_pipeline_motion_rotation_rate_submit=function(){return e.asm._zappar_pipeline_motion_rotation_rate_submit.apply(null,arguments)},e._zappar_pipeline_process_gl=function(){return e.asm._zappar_pipeline_process_gl.apply(null,arguments)},e.establishStackSpace=function(){return e.asm.establishStackSpace.apply(null,arguments)},e.getTempRet0=function(){return e.asm.getTempRet0.apply(null,arguments)},e.runPostSets=function(){return e.asm.runPostSets.apply(null,arguments)};var vn=e.setTempRet0=function(){return e.asm.setTempRet0.apply(null,arguments)};e.setThrew=function(){return e.asm.setThrew.apply(null,arguments)};var wn=e.stackAlloc=function(){return e.asm.stackAlloc.apply(null,arguments)},gn=e.stackRestore=function(){return e.asm.stackRestore.apply(null,arguments)},Mn=e.stackSave=function(){return e.asm.stackSave.apply(null,arguments)};function kn(){function t(){if(!e.calledRun&&(e.calledRun=!0,!p)){if(J||(J=!0,H(Z)),H(Y),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();X.unshift(t)}H(X)}}if(!(0<rt)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)Q();H(W),0<rt||e.calledRun||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}function An(t){throw e.onAbort&&e.onAbort(t),void 0!==t?(o(t),s(t),t=JSON.stringify(t)):t="",p=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(e.dynCall_i=function(){return e.asm.dynCall_i.apply(null,arguments)},e.dynCall_ii=function(){return e.asm.dynCall_ii.apply(null,arguments)},e.dynCall_iii=function(){return e.asm.dynCall_iii.apply(null,arguments)},e.dynCall_iiii=function(){return e.asm.dynCall_iiii.apply(null,arguments)},e.dynCall_iiiii=function(){return e.asm.dynCall_iiiii.apply(null,arguments)},e.dynCall_iiiiid=function(){return e.asm.dynCall_iiiiid.apply(null,arguments)},e.dynCall_iiiiii=function(){return e.asm.dynCall_iiiiii.apply(null,arguments)},e.dynCall_iiiiiid=function(){return e.asm.dynCall_iiiiiid.apply(null,arguments)},e.dynCall_iiiiiii=function(){return e.asm.dynCall_iiiiiii.apply(null,arguments)},e.dynCall_iiiiiiii=function(){return e.asm.dynCall_iiiiiiii.apply(null,arguments)},e.dynCall_iiiiiiiii=function(){return e.asm.dynCall_iiiiiiiii.apply(null,arguments)},e.dynCall_iiiiij=function(){return e.asm.dynCall_iiiiij.apply(null,arguments)},e.dynCall_v=function(){return e.asm.dynCall_v.apply(null,arguments)},e.dynCall_vi=function(){return e.asm.dynCall_vi.apply(null,arguments)},e.dynCall_vii=function(){return e.asm.dynCall_vii.apply(null,arguments)},e.dynCall_viiffii=function(){return e.asm.dynCall_viiffii.apply(null,arguments)},e.dynCall_viii=function(){return e.asm.dynCall_viii.apply(null,arguments)},e.dynCall_viiif=function(){return e.asm.dynCall_viiif.apply(null,arguments)},e.dynCall_viiifffii=function(){return e.asm.dynCall_viiifffii.apply(null,arguments)},e.dynCall_viiiffii=function(){return e.asm.dynCall_viiiffii.apply(null,arguments)},e.dynCall_viiii=function(){return e.asm.dynCall_viiii.apply(null,arguments)},e.dynCall_viiiii=function(){return e.asm.dynCall_viiiii.apply(null,arguments)},e.dynCall_viiiiiffffffffffffffff=function(){return e.asm.dynCall_viiiiiffffffffffffffff.apply(null,arguments)},e.dynCall_viiiiii=function(){return e.asm.dynCall_viiiiii.apply(null,arguments)},e.dynCall_viijii=function(){return e.asm.dynCall_viijii.apply(null,arguments)},e.asm=Ze,e.cwrap=function(t,e,n,r){var a=(n=n||[]).every((function(t){return"number"===t}));return"string"!==e&&a&&!r?h(t):function(){var r=n,a=arguments,i=h(t),u=[],o=0;if(a)for(var s=0;s<a.length;s++){var c=b[r[s]];c?(0===o&&(o=Mn()),u[s]=c(a[s])):u[s]=a[s]}return r=i.apply(null,u),r="string"===e?y(r):"boolean"===e?!!r:r,0!==o&&gn(o),r}},e.setValue=function(t,e,n){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":w[t>>0]=e;break;case"i16":M[t>>1]=e;break;case"i32":A[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,1<=+$(tempDouble)?0<tempDouble?(0|nt(+et(tempDouble/4294967296),4294967295))>>>0:~~+tt((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],A[t>>2]=tempI64[0],A[t+4>>2]=tempI64[1];break;case"float":x[t>>2]=e;break;case"double":O[t>>3]=e;break;default:An("invalid type for setValue: "+n)}},e.getValue=function(t,e){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return w[t>>0];case"i16":return M[t>>1];case"i32":case"i64":return A[t>>2];case"float":return x[t>>2];case"double":return O[t>>3];default:An("invalid type for getValue: "+e)}return null},e.UTF8ToString=F,e.then=function(t){if(e.calledRun)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},it=function t(){e.calledRun||kn(),e.calledRun||(it=t)},e.run=kn,e.abort=An,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return e.noExitRuntime=!0,kn(),t});e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRuntimeObject=function(t){let e=t.cwrap("zappar_pipeline_create","number",[]),n=t.cwrap("zappar_pipeline_destroy",null,["number"]),r=t.cwrap("zappar_pipeline_frame_update",null,["number"]),a=t.cwrap("zappar_pipeline_frame_number","number",["number"]),i=t.cwrap("zappar_pipeline_camera_model","number",["number"]),u=t.cwrap("zappar_pipeline_camera_frame_user_data","number",["number"]),o=t.cwrap("zappar_pipeline_camera_frame_submit",null,["number","number","number","number","number","number","number"]),s=t.cwrap("zappar_pipeline_camera_frame_camera_attitude","number",["number"]),c=t.cwrap("zappar_pipeline_motion_accelerometer_submit",null,["number","number","number","number","number"]),f=t.cwrap("zappar_pipeline_motion_rotation_rate_submit",null,["number","number","number","number","number"]),_=t.cwrap("zappar_pipeline_motion_attitude_submit",null,["number","number","number","number","number"]),l=t.cwrap("zappar_camera_source_create","number",["number","string"]),p=t.cwrap("zappar_camera_source_destroy",null,["number"]),d=t.cwrap("zappar_image_tracker_create","number",["number"]),h=t.cwrap("zappar_image_tracker_destroy",null,["number"]),m=t.cwrap("zappar_image_tracker_target_load_from_memory",null,["number","number","number"]),b=t.cwrap("zappar_image_tracker_target_loaded_version","number",["number"]),y=t.cwrap("zappar_image_tracker_enabled","number",["number"]),v=t.cwrap("zappar_image_tracker_enabled_set",null,["number","number"]),w=t.cwrap("zappar_image_tracker_anchor_count","number",["number"]),g=t.cwrap("zappar_image_tracker_anchor_id","string",["number","number"]),M=t.cwrap("zappar_image_tracker_anchor_pose_raw","number",["number","number"]),k=t.cwrap("zappar_face_tracker_create","number",["number"]),A=t.cwrap("zappar_face_tracker_destroy",null,["number"]),z=t.cwrap("zappar_face_tracker_model_load_from_memory",null,["number","number","number"]),x=t.cwrap("zappar_face_tracker_model_loaded_version","number",["number"]),O=t.cwrap("zappar_face_tracker_enabled_set",null,["number","number"]),L=t.cwrap("zappar_face_tracker_enabled","number",["number"]),C=t.cwrap("zappar_face_tracker_max_faces_set",null,["number","number"]),T=t.cwrap("zappar_face_tracker_max_faces","number",["number"]),I=t.cwrap("zappar_face_tracker_anchor_count","number",["number"]),S=t.cwrap("zappar_face_tracker_anchor_id","string",["number","number"]),P=t.cwrap("zappar_face_tracker_anchor_pose_raw","number",["number","number"]),B=t.cwrap("zappar_face_tracker_anchor_identity_coefficients","number",["number","number"]),E=t.cwrap("zappar_face_tracker_anchor_expression_coefficients","number",["number","number"]),D=t.cwrap("zappar_face_mesh_create","number",[]),F=t.cwrap("zappar_face_mesh_destroy",null,["number"]),R=t.cwrap("zappar_barcode_finder_create","number",["number"]),V=t.cwrap("zappar_barcode_finder_destroy",null,["number"]),j=t.cwrap("zappar_barcode_finder_enabled_set",null,["number","number"]),q=t.cwrap("zappar_barcode_finder_enabled","number",["number"]),N=t.cwrap("zappar_barcode_finder_found_number","number",["number"]),G=t.cwrap("zappar_barcode_finder_found_text","string",["number","number"]),U=t.cwrap("zappar_barcode_finder_found_format","number",["number","number"]),H=t.cwrap("zappar_barcode_finder_formats","number",["number"]),W=t.cwrap("zappar_barcode_finder_formats_set",null,["number","number"]),Z=t.cwrap("zappar_instant_world_tracker_create","number",["number"]),Y=t.cwrap("zappar_instant_world_tracker_destroy",null,["number"]),K=t.cwrap("zappar_instant_world_tracker_enabled_set",null,["number","number"]),X=t.cwrap("zappar_instant_world_tracker_enabled","number",["number"]),J=t.cwrap("zappar_instant_world_tracker_anchor_pose_raw","number",["number"]),Q=t.cwrap("zappar_instant_world_tracker_anchor_pose_set_from_camera_offset",null,["number","number","number","number","number"]),$=32,tt=t._malloc($),et=64,nt=t._malloc(et);return{pipeline_create:()=>e(),pipeline_destroy:()=>{n()},pipeline_frame_update:t=>r(t),pipeline_frame_number:t=>a(t),pipeline_camera_model:e=>{let n=i(e),r=new Float32Array(6);return r.set(t.HEAPF32.subarray(n/4,6+n/4)),n=r,n},pipeline_camera_frame_user_data:t=>u(t),pipeline_camera_frame_submit:(e,n,r,a,i,u)=>{$<n.byteLength&&(t._free(tt),$=n.byteLength,tt=t._malloc($));let s=tt,c=n.byteLength;t.HEAPU8.set(new Uint8Array(n),tt);let f=r,_=a,l=i;et<u.byteLength&&(t._free(et),et=u.byteLength,nt=t._malloc(et));let p=nt;return t.HEAPF32.set(u,nt/4),o(e,s,c,f,_,l,p)},pipeline_camera_frame_camera_attitude:e=>{let n=s(e),r=new Float32Array(16);return r.set(t.HEAPF32.subarray(n/4,16+n/4)),n=r,n},pipeline_motion_accelerometer_submit:(t,e,n,r,a)=>c(t,e,n,r,a),pipeline_motion_rotation_rate_submit:(t,e,n,r,a)=>f(t,e,n,r,a),pipeline_motion_attitude_submit:(t,e,n,r,a)=>_(t,e,n,r,a),camera_source_create:(t,e)=>l(t,e),camera_source_destroy:()=>{p()},image_tracker_create:t=>d(t),image_tracker_destroy:()=>{h()},image_tracker_target_load_from_memory:(e,n)=>{$<n.byteLength&&(t._free(tt),$=n.byteLength,tt=t._malloc($));let r=tt,a=n.byteLength;return t.HEAPU8.set(new Uint8Array(n),tt),m(e,r,a)},image_tracker_target_loaded_version:t=>b(t),image_tracker_enabled:t=>{let e=y(t);return e=1===e,e},image_tracker_enabled_set:(t,e)=>v(t,e?1:0),image_tracker_anchor_count:t=>w(t),image_tracker_anchor_id:(t,e)=>g(t,e),image_tracker_anchor_pose_raw:(e,n)=>{let r=M(e,n),a=new Float32Array(16);return a.set(t.HEAPF32.subarray(r/4,16+r/4)),r=a,r},face_tracker_create:t=>k(t),face_tracker_destroy:()=>{A()},face_tracker_model_load_from_memory:(e,n)=>{$<n.byteLength&&(t._free(tt),$=n.byteLength,tt=t._malloc($));let r=tt,a=n.byteLength;return t.HEAPU8.set(new Uint8Array(n),tt),z(e,r,a)},face_tracker_model_loaded_version:t=>x(t),face_tracker_enabled_set:(t,e)=>O(t,e?1:0),face_tracker_enabled:t=>{let e=L(t);return e=1===e,e},face_tracker_max_faces_set:(t,e)=>C(t,e),face_tracker_max_faces:t=>T(t),face_tracker_anchor_count:t=>I(t),face_tracker_anchor_id:(t,e)=>S(t,e),face_tracker_anchor_pose_raw:(e,n)=>{let r=P(e,n),a=new Float32Array(16);return a.set(t.HEAPF32.subarray(r/4,16+r/4)),r=a,r},face_tracker_anchor_identity_coefficients:(e,n)=>{let r=B(e,n),a=new Float32Array(50);return a.set(t.HEAPF32.subarray(r/4,50+r/4)),r=a,r},face_tracker_anchor_expression_coefficients:(e,n)=>{let r=E(e,n),a=new Float32Array(29);return a.set(t.HEAPF32.subarray(r/4,29+r/4)),r=a,r},face_mesh_create:()=>D(),face_mesh_destroy:()=>{F()},barcode_finder_create:t=>R(t),barcode_finder_destroy:()=>{V()},barcode_finder_enabled_set:(t,e)=>j(t,e?1:0),barcode_finder_enabled:t=>{let e=q(t);return e=1===e,e},barcode_finder_found_number:t=>N(t),barcode_finder_found_text:(t,e)=>G(t,e),barcode_finder_found_format:(t,e)=>U(t,e),barcode_finder_formats:t=>H(t),barcode_finder_formats_set:(t,e)=>W(t,e),instant_world_tracker_create:t=>Z(t),instant_world_tracker_destroy:()=>{Y()},instant_world_tracker_enabled_set:(t,e)=>K(t,e?1:0),instant_world_tracker_enabled:t=>{let e=X(t);return e=1===e,e},instant_world_tracker_anchor_pose_raw:e=>{let n=J(e),r=new Float32Array(16);return r.set(t.HEAPF32.subarray(n/4,16+n/4)),n=r,n},instant_world_tracker_anchor_pose_set_from_camera_offset:(t,e,n,r,a)=>Q(t,e,n,r,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5),a=n(6);e.zappar_server=class{constructor(t,e){this._impl=t,this._sender=e,this._deserializer=new a.MessageDeserializer,this.serializersByPipelineId=new Map,this._pipeline_id_by_pipeline_id=new Map,this._pipeline_by_instance=new Map,this._pipeline_id_by_camera_source_id=new Map,this._camera_source_by_instance=new Map,this._pipeline_id_by_image_tracker_id=new Map,this._image_tracker_by_instance=new Map,this._pipeline_id_by_face_tracker_id=new Map,this._face_tracker_by_instance=new Map,this._pipeline_id_by_face_mesh_id=new Map,this._face_mesh_by_instance=new Map,this._pipeline_id_by_barcode_finder_id=new Map,this._barcode_finder_by_instance=new Map,this._pipeline_id_by_instant_world_tracker_id=new Map,this._instant_world_tracker_by_instance=new Map}processBuffer(t){this._deserializer.setData(t),this._deserializer.forMessages((t,e)=>{switch(t){case 26:{let t=e.type(),n=this._impl.pipeline_create();this._pipeline_by_instance.set(t,n),this._pipeline_id_by_pipeline_id.set(t,t),this.serializersByPipelineId.set(t,new r.MessageSerializer(e=>{this._sender(t,e)}));break}case 27:{let t=e.type(),n=this._pipeline_by_instance.get(t);if(void 0===n)return;this._impl.pipeline_destroy(n),this._pipeline_by_instance.delete(t);break}case 9:{let t=e.type(),n=this._pipeline_by_instance.get(t);if(void 0===n)return;this._impl.pipeline_frame_update(n);break}case 8:{let t=e.type(),n=this._pipeline_by_instance.get(t);if(void 0===n)return;this._impl.pipeline_camera_frame_submit(n,e.dataWithLength(),e.int(),e.int(),e.int(),e.matrix4x4());break}case 10:{let t=e.type(),n=this._pipeline_by_instance.get(t);if(void 0===n)return;this._impl.pipeline_motion_accelerometer_submit(n,e.timestamp(),e.float(),e.float(),e.float());break}case 11:{let t=e.type(),n=this._pipeline_by_instance.get(t);if(void 0===n)return;this._impl.pipeline_motion_rotation_rate_submit(n,e.timestamp(),e.float(),e.float(),e.float());break}case 12:{let t=e.type(),n=this._pipeline_by_instance.get(t);if(void 0===n)return;this._impl.pipeline_motion_attitude_submit(n,e.timestamp(),e.float(),e.float(),e.float());break}case 28:{let t=e.type(),n=e.type(),r=this._pipeline_by_instance.get(n),a=e.string(),i=this._impl.camera_source_create(r,a);this._camera_source_by_instance.set(t,i),this._pipeline_id_by_camera_source_id.set(t,n);break}case 29:{let t=e.type(),n=this._camera_source_by_instance.get(t);if(void 0===n)return;this._impl.camera_source_destroy(n),this._camera_source_by_instance.delete(t);break}case 2:{let t=e.type(),n=e.type(),r=this._pipeline_by_instance.get(n),a=this._impl.image_tracker_create(r);this._image_tracker_by_instance.set(t,a),this._pipeline_id_by_image_tracker_id.set(t,n);break}case 13:{let t=e.type(),n=this._image_tracker_by_instance.get(t);if(void 0===n)return;this._impl.image_tracker_destroy(n),this._image_tracker_by_instance.delete(t);break}case 4:{let t=e.type(),n=this._image_tracker_by_instance.get(t);if(void 0===n)return;this._impl.image_tracker_target_load_from_memory(n,e.dataWithLength());break}case 3:{let t=e.type(),n=this._image_tracker_by_instance.get(t);if(void 0===n)return;this._impl.image_tracker_enabled_set(n,e.bool());break}case 19:{let t=e.type(),n=e.type(),r=this._pipeline_by_instance.get(n),a=this._impl.face_tracker_create(r);this._face_tracker_by_instance.set(t,a),this._pipeline_id_by_face_tracker_id.set(t,n);break}case 20:{let t=e.type(),n=this._face_tracker_by_instance.get(t);if(void 0===n)return;this._impl.face_tracker_destroy(n),this._face_tracker_by_instance.delete(t);break}case 21:{let t=e.type(),n=this._face_tracker_by_instance.get(t);if(void 0===n)return;this._impl.face_tracker_model_load_from_memory(n,e.dataWithLength());break}case 22:{let t=e.type(),n=this._face_tracker_by_instance.get(t);if(void 0===n)return;this._impl.face_tracker_enabled_set(n,e.bool());break}case 23:{let t=e.type(),n=this._face_tracker_by_instance.get(t);if(void 0===n)return;this._impl.face_tracker_max_faces_set(n,e.int());break}case 24:{let t=e.type(),n=this._impl.face_mesh_create();this._face_mesh_by_instance.set(t,n);break}case 25:{let t=e.type(),n=this._face_mesh_by_instance.get(t);if(void 0===n)return;this._impl.face_mesh_destroy(n),this._face_mesh_by_instance.delete(t);break}case 15:{let t=e.type(),n=e.type(),r=this._pipeline_by_instance.get(n),a=this._impl.barcode_finder_create(r);this._barcode_finder_by_instance.set(t,a),this._pipeline_id_by_barcode_finder_id.set(t,n);break}case 16:{let t=e.type(),n=this._barcode_finder_by_instance.get(t);if(void 0===n)return;this._impl.barcode_finder_destroy(n),this._barcode_finder_by_instance.delete(t);break}case 17:{let t=e.type(),n=this._barcode_finder_by_instance.get(t);if(void 0===n)return;this._impl.barcode_finder_enabled_set(n,e.bool());break}case 18:{let t=e.type(),n=this._barcode_finder_by_instance.get(t);if(void 0===n)return;this._impl.barcode_finder_formats_set(n,e.barcodeFormat());break}case 5:{let t=e.type(),n=e.type(),r=this._pipeline_by_instance.get(n),a=this._impl.instant_world_tracker_create(r);this._instant_world_tracker_by_instance.set(t,a),this._pipeline_id_by_instant_world_tracker_id.set(t,n);break}case 14:{let t=e.type(),n=this._instant_world_tracker_by_instance.get(t);if(void 0===n)return;this._impl.instant_world_tracker_destroy(n),this._instant_world_tracker_by_instance.delete(t);break}case 6:{let t=e.type(),n=this._instant_world_tracker_by_instance.get(t);if(void 0===n)return;this._impl.instant_world_tracker_enabled_set(n,e.bool());break}case 7:{let t=e.type(),n=this._instant_world_tracker_by_instance.get(t);if(void 0===n)return;this._impl.instant_world_tracker_anchor_pose_set_from_camera_offset(n,e.float(),e.float(),e.float(),e.instantTrackerTransformOrientation());break}}})}exploreState(){for(let[t,e]of this._pipeline_by_instance){let n=this._pipeline_id_by_pipeline_id.get(t);if(!n)continue;let r=this.serializersByPipelineId.get(n);r&&(r.sendMessage(7,n=>{n.type(t),n.int(this._impl.pipeline_frame_number(e))}),r.sendMessage(6,n=>{n.type(t),n.cameraModel(this._impl.pipeline_camera_model(e))}),r.sendMessage(5,n=>{n.type(t),n.int(this._impl.pipeline_camera_frame_user_data(e))}),r.sendMessage(11,n=>{n.type(t),n.matrix4x4(this._impl.pipeline_camera_frame_camera_attitude(e))}))}for(let[t,e]of this._camera_source_by_instance){let e=this._pipeline_id_by_camera_source_id.get(t);if(!e)continue;this.serializersByPipelineId.get(e)}for(let[t,e]of this._image_tracker_by_instance){let n=this._pipeline_id_by_image_tracker_id.get(t);if(!n)continue;let r=this.serializersByPipelineId.get(n);if(r){r.sendMessage(18,n=>{n.type(t),n.int(this._impl.image_tracker_target_loaded_version(e))}),r.sendMessage(1,n=>{n.type(t),n.int(this._impl.image_tracker_anchor_count(e))});for(let n=0;n<this._impl.image_tracker_anchor_count(e);n++)r.sendMessage(2,r=>{r.type(t),r.int(n),r.string(this._impl.image_tracker_anchor_id(e,n))});for(let n=0;n<this._impl.image_tracker_anchor_count(e);n++)r.sendMessage(3,r=>{r.type(t),r.int(n),r.matrix4x4(this._impl.image_tracker_anchor_pose_raw(e,n))})}}for(let[t,e]of this._face_tracker_by_instance){let n=this._pipeline_id_by_face_tracker_id.get(t);if(!n)continue;let r=this.serializersByPipelineId.get(n);if(r){r.sendMessage(17,n=>{n.type(t),n.int(this._impl.face_tracker_model_loaded_version(e))}),r.sendMessage(12,n=>{n.type(t),n.int(this._impl.face_tracker_anchor_count(e))});for(let n=0;n<this._impl.face_tracker_anchor_count(e);n++)r.sendMessage(13,r=>{r.type(t),r.int(n),r.string(this._impl.face_tracker_anchor_id(e,n))});for(let n=0;n<this._impl.face_tracker_anchor_count(e);n++)r.sendMessage(14,r=>{r.type(t),r.int(n),r.matrix4x4(this._impl.face_tracker_anchor_pose_raw(e,n))});for(let n=0;n<this._impl.face_tracker_anchor_count(e);n++)r.sendMessage(15,r=>{r.type(t),r.int(n),r.identityCoefficients(this._impl.face_tracker_anchor_identity_coefficients(e,n))});for(let n=0;n<this._impl.face_tracker_anchor_count(e);n++)r.sendMessage(16,r=>{r.type(t),r.int(n),r.expressionCoefficients(this._impl.face_tracker_anchor_expression_coefficients(e,n))})}}for(let[t,e]of this._face_mesh_by_instance){let e=this._pipeline_id_by_face_mesh_id.get(t);if(!e)continue;this.serializersByPipelineId.get(e)}for(let[t,e]of this._barcode_finder_by_instance){let n=this._pipeline_id_by_barcode_finder_id.get(t);if(!n)continue;let r=this.serializersByPipelineId.get(n);if(r){r.sendMessage(8,n=>{n.type(t),n.int(this._impl.barcode_finder_found_number(e))});for(let n=0;n<this._impl.barcode_finder_found_number(e);n++)r.sendMessage(9,r=>{r.type(t),r.int(n),r.string(this._impl.barcode_finder_found_text(e,n))});for(let n=0;n<this._impl.barcode_finder_found_number(e);n++)r.sendMessage(10,r=>{r.type(t),r.int(n),r.barcodeFormat(this._impl.barcode_finder_found_format(e,n))})}}for(let[t,e]of this._instant_world_tracker_by_instance){let n=this._pipeline_id_by_instant_world_tracker_id.get(t);if(!n)continue;let r=this.serializersByPipelineId.get(n);r&&r.sendMessage(4,n=>{n.type(t),n.matrix4x4(this._impl.instant_world_tracker_anchor_pose_raw(e))})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MessageSerializer=class{constructor(t){this._messageSender=t,this._freeBufferPool=[],this._buffer=new ArrayBuffer(16),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1,this._timeoutSet=!1,this._appender={int:t=>this.int(t),bool:t=>this.int(t?1:0),float:t=>this.float(t),string:t=>this.string(t),dataWithLength:t=>this.arrayBuffer(t),type:t=>this.int(t),matrix4x4:t=>this.float32ArrayBuffer(t),identityCoefficients:t=>this.float32ArrayBuffer(t),expressionCoefficients:t=>this.float32ArrayBuffer(t),cameraModel:t=>this.float32ArrayBuffer(t),timestamp:t=>this.double(t),barcodeFormat:t=>this.int(t),instantTrackerTransformOrientation:t=>this.int(t)},this._freeBufferPool.push(new ArrayBuffer(16)),this._freeBufferPool.push(new ArrayBuffer(16))}bufferReturn(t){this._freeBufferPool.push(t)}_ensureArrayBuffer(t){let e=4*(this._offset+t+8);if(this._buffer&&this._buffer.byteLength>=e)return;let n=void 0;if(!n){let t=e;t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,console.log("Creating buffer with size: ",t),n=new ArrayBuffer(t)}let r=this._buffer?this._i32View:void 0;this._buffer=n,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),r&&this._i32View.set(r.subarray(0,this._offset))}sendMessage(t,e){this._ensureArrayBuffer(4),this._startOffset=this._offset,this._i32View[this._offset+1]=t,this._offset+=2,e(this._appender),this._i32View[this._startOffset]=this._offset-this._startOffset,this._startOffset=-1,!1===this._timeoutSet&&(this._timeoutSet=!0,setTimeout(()=>{this._timeoutSet=!1,this._send()},0))}_send(){0!==this._freeBufferPool.length&&(this._i32View[0]=this._offset,this._messageSender(this._buffer),this._buffer=void 0,this._buffer=this._freeBufferPool.pop(),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1)}int(t){this._ensureArrayBuffer(1),this._i32View[this._offset]=t,this._offset++}double(t){this._ensureArrayBuffer(2),this._offset%2==1&&this._offset++,this._f64View[this._offset/2]=t,this._offset+=2}float(t){this._ensureArrayBuffer(1),this._f32View[this._offset]=t,this._offset++}int32Array(t){this._ensureArrayBuffer(t.length);for(let e=0;e<t.length;++e)this._i32View[this._offset+e]=t[e];this._offset+=t.length}float32Array(t){this._ensureArrayBuffer(t.length);for(let e=0;e<t.length;++e)this._f32View[this._offset+e]=t[e];this._offset+=t.length}booleanArray(t){this._ensureArrayBuffer(t.length);for(let e=0;e<t.length;++e)this._i32View[this._offset+e]=t[e]?1:0;this._offset+=t.length}uint8ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.byteLength,this._offset++,this._u8View.set(t,4*this._offset),this._offset+=t.byteLength>>2,0!=(3&t.byteLength)&&this._offset++}arrayBuffer(t){let e=new Uint8Array(t);this.uint8ArrayBuffer(e)}uint8ClampedArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.byteLength,this._offset++,this._u8cView.set(t,4*this._offset),this._offset+=t.byteLength>>2,0!=(3&t.byteLength)&&this._offset++}float32ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.length,this._offset++,this._f32View.set(t,this._offset),this._offset+=t.length}uint16ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.length,this._offset++;let e=2*this._offset;this._u16View.set(t,e),this._offset+=t.length>>1,0!=(1&t.length)&&this._offset++}int32ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.length,this._offset++,this._i32View.set(t,this._offset),this._offset+=t.length}uint32ArrayBuffer(t){this._ensureArrayBuffer(t.byteLength/4),this._i32View[this._offset]=t.length,this._offset++,this._u32View.set(t,this._offset),this._offset+=t.length}string(t){let e=(new TextEncoder).encode(t);this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.byteLength,this._offset++,this._u8View.set(e,4*this._offset),this._offset+=e.byteLength>>2,0!=(3&e.byteLength)&&this._offset++}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MessageDeserializer=class{constructor(){this._buffer=new ArrayBuffer(0),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,this._startOffset=-1,this._processor={int:()=>this._i32View[this._startOffset++],bool:()=>1===this._i32View[this._startOffset++],type:()=>this._i32View[this._startOffset++],float:()=>this._f32View[this._startOffset++],timestamp:()=>{this._startOffset%2==1&&this._startOffset++;let t=this._f64View[this._startOffset/2];return this._startOffset+=2,t},string:()=>{let t=this._i32View[this._startOffset++],e=(new TextDecoder).decode(new Uint8Array(this._buffer,4*this._startOffset,t));return this._startOffset+=t>>2,0!=(3&t)&&this._startOffset++,e},dataWithLength:()=>{let t=this._i32View[this._startOffset++],e=new Uint8Array(t);return e.set(this._u8View.subarray(4*this._startOffset,4*this._startOffset+t)),this._startOffset+=e.byteLength>>2,0!=(3&e.byteLength)&&this._startOffset++,e.buffer},matrix4x4:()=>{let t=this._i32View[this._startOffset++],e=new Float32Array(t);return e.set(this._f32View.subarray(this._startOffset,this._startOffset+16)),this._startOffset+=t,e},identityCoefficients:()=>{let t=this._i32View[this._startOffset++],e=new Float32Array(t);return e.set(this._f32View.subarray(this._startOffset,this._startOffset+50)),this._startOffset+=t,e},expressionCoefficients:()=>{let t=this._i32View[this._startOffset++],e=new Float32Array(t);return e.set(this._f32View.subarray(this._startOffset,this._startOffset+29)),this._startOffset+=t,e},cameraModel:()=>{let t=this._i32View[this._startOffset++],e=new Float32Array(t);return e.set(this._f32View.subarray(this._startOffset,this._startOffset+6)),this._startOffset+=t,e},barcodeFormat:()=>this._i32View[this._startOffset++],instantTrackerTransformOrientation:()=>this._i32View[this._startOffset++]}}setData(t){this._buffer=t,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,t.byteLength>=4&&(this._offset=1,this._length=this._i32View[0]),this._startOffset=-1}hasMessage(){return this._offset+1<this._length}forMessages(t){for(;this.hasMessage();){let e=this._i32View[this._offset],n=this._i32View[this._offset+1];this._startOffset=this._offset+2,this._offset+=e,t(n,this._processor)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8);e.MsgManager=class{constructor(){this.onOutgoingMessage=new r.Event,this.onIncomingMessage=new r.Event1,this._outgoingMessages=[]}postIncomingMessage(t){this.onIncomingMessage.emit(t)}postOutgoingMessage(t,e){this._outgoingMessages.push({msg:t,transferables:e}),this.onOutgoingMessage.emit()}getOutgoingMessages(){let t=this._outgoingMessages;return this._outgoingMessages=[],t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Event=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(){for(var t=0,e=this._funcs.length;t<e;t++)this._funcs[t]()}};e.Event1=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t){for(var e=0,n=this._funcs.length;e<n;e++)this._funcs[e](t)}};e.Event2=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e){for(var n=0,r=this._funcs.length;n<r;n++)this._funcs[n](t,e)}};e.Event3=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e,n){for(var r=0,a=this._funcs.length;r<a;r++)this._funcs[r](t,e,n)}};e.Event5=class{constructor(){this._funcs=[]}bind(t){this._funcs.push(t)}unbind(t){let e=this._funcs.indexOf(t);e>-1&&this._funcs.splice(e,1)}emit(t,e,n,r,a){for(var i=0,u=this._funcs.length;i<u;i++)this._funcs[i](t,e,n,r,a)}}},function(t,e,n){"use strict";n.r(e),e.default=n.p+"002dc653b6230130bd3e4bd6e74f47da.wasm"},function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return r})),n.d(e,"mat2",(function(){return a})),n.d(e,"mat2d",(function(){return i})),n.d(e,"mat3",(function(){return u})),n.d(e,"mat4",(function(){return o})),n.d(e,"quat",(function(){return f})),n.d(e,"quat2",(function(){return _})),n.d(e,"vec2",(function(){return l})),n.d(e,"vec3",(function(){return s})),n.d(e,"vec4",(function(){return c}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return p})),n.d(r,"ARRAY_TYPE",(function(){return d})),n.d(r,"RANDOM",(function(){return h})),n.d(r,"setMatrixArrayType",(function(){return m})),n.d(r,"toRadian",(function(){return y})),n.d(r,"equals",(function(){return v}));var a={};n.r(a),n.d(a,"create",(function(){return w})),n.d(a,"clone",(function(){return g})),n.d(a,"copy",(function(){return M})),n.d(a,"identity",(function(){return k})),n.d(a,"fromValues",(function(){return A})),n.d(a,"set",(function(){return z})),n.d(a,"transpose",(function(){return x})),n.d(a,"invert",(function(){return O})),n.d(a,"adjoint",(function(){return L})),n.d(a,"determinant",(function(){return C})),n.d(a,"multiply",(function(){return T})),n.d(a,"rotate",(function(){return I})),n.d(a,"scale",(function(){return S})),n.d(a,"fromRotation",(function(){return P})),n.d(a,"fromScaling",(function(){return B})),n.d(a,"str",(function(){return E})),n.d(a,"frob",(function(){return D})),n.d(a,"LDU",(function(){return F})),n.d(a,"add",(function(){return R})),n.d(a,"subtract",(function(){return V})),n.d(a,"exactEquals",(function(){return j})),n.d(a,"equals",(function(){return q})),n.d(a,"multiplyScalar",(function(){return N})),n.d(a,"multiplyScalarAndAdd",(function(){return G})),n.d(a,"mul",(function(){return U})),n.d(a,"sub",(function(){return H}));var i={};n.r(i),n.d(i,"create",(function(){return W})),n.d(i,"clone",(function(){return Z})),n.d(i,"copy",(function(){return Y})),n.d(i,"identity",(function(){return K})),n.d(i,"fromValues",(function(){return X})),n.d(i,"set",(function(){return J})),n.d(i,"invert",(function(){return Q})),n.d(i,"determinant",(function(){return $})),n.d(i,"multiply",(function(){return tt})),n.d(i,"rotate",(function(){return et})),n.d(i,"scale",(function(){return nt})),n.d(i,"translate",(function(){return rt})),n.d(i,"fromRotation",(function(){return at})),n.d(i,"fromScaling",(function(){return it})),n.d(i,"fromTranslation",(function(){return ut})),n.d(i,"str",(function(){return ot})),n.d(i,"frob",(function(){return st})),n.d(i,"add",(function(){return ct})),n.d(i,"subtract",(function(){return ft})),n.d(i,"multiplyScalar",(function(){return _t})),n.d(i,"multiplyScalarAndAdd",(function(){return lt})),n.d(i,"exactEquals",(function(){return pt})),n.d(i,"equals",(function(){return dt})),n.d(i,"mul",(function(){return ht})),n.d(i,"sub",(function(){return mt}));var u={};n.r(u),n.d(u,"create",(function(){return bt})),n.d(u,"fromMat4",(function(){return yt})),n.d(u,"clone",(function(){return vt})),n.d(u,"copy",(function(){return wt})),n.d(u,"fromValues",(function(){return gt})),n.d(u,"set",(function(){return Mt})),n.d(u,"identity",(function(){return kt})),n.d(u,"transpose",(function(){return At})),n.d(u,"invert",(function(){return zt})),n.d(u,"adjoint",(function(){return xt})),n.d(u,"determinant",(function(){return Ot})),n.d(u,"multiply",(function(){return Lt})),n.d(u,"translate",(function(){return Ct})),n.d(u,"rotate",(function(){return Tt})),n.d(u,"scale",(function(){return It})),n.d(u,"fromTranslation",(function(){return St})),n.d(u,"fromRotation",(function(){return Pt})),n.d(u,"fromScaling",(function(){return Bt})),n.d(u,"fromMat2d",(function(){return Et})),n.d(u,"fromQuat",(function(){return Dt})),n.d(u,"normalFromMat4",(function(){return Ft})),n.d(u,"projection",(function(){return Rt})),n.d(u,"str",(function(){return Vt})),n.d(u,"frob",(function(){return jt})),n.d(u,"add",(function(){return qt})),n.d(u,"subtract",(function(){return Nt})),n.d(u,"multiplyScalar",(function(){return Gt})),n.d(u,"multiplyScalarAndAdd",(function(){return Ut})),n.d(u,"exactEquals",(function(){return Ht})),n.d(u,"equals",(function(){return Wt})),n.d(u,"mul",(function(){return Zt})),n.d(u,"sub",(function(){return Yt}));var o={};n.r(o),n.d(o,"create",(function(){return Kt})),n.d(o,"clone",(function(){return Xt})),n.d(o,"copy",(function(){return Jt})),n.d(o,"fromValues",(function(){return Qt})),n.d(o,"set",(function(){return $t})),n.d(o,"identity",(function(){return te})),n.d(o,"transpose",(function(){return ee})),n.d(o,"invert",(function(){return ne})),n.d(o,"adjoint",(function(){return re})),n.d(o,"determinant",(function(){return ae})),n.d(o,"multiply",(function(){return ie})),n.d(o,"translate",(function(){return ue})),n.d(o,"scale",(function(){return oe})),n.d(o,"rotate",(function(){return se})),n.d(o,"rotateX",(function(){return ce})),n.d(o,"rotateY",(function(){return fe})),n.d(o,"rotateZ",(function(){return _e})),n.d(o,"fromTranslation",(function(){return le})),n.d(o,"fromScaling",(function(){return pe})),n.d(o,"fromRotation",(function(){return de})),n.d(o,"fromXRotation",(function(){return he})),n.d(o,"fromYRotation",(function(){return me})),n.d(o,"fromZRotation",(function(){return be})),n.d(o,"fromRotationTranslation",(function(){return ye})),n.d(o,"fromQuat2",(function(){return ve})),n.d(o,"getTranslation",(function(){return we})),n.d(o,"getScaling",(function(){return ge})),n.d(o,"getRotation",(function(){return Me})),n.d(o,"fromRotationTranslationScale",(function(){return ke})),n.d(o,"fromRotationTranslationScaleOrigin",(function(){return Ae})),n.d(o,"fromQuat",(function(){return ze})),n.d(o,"frustum",(function(){return xe})),n.d(o,"perspective",(function(){return Oe})),n.d(o,"perspectiveFromFieldOfView",(function(){return Le})),n.d(o,"ortho",(function(){return Ce})),n.d(o,"lookAt",(function(){return Te})),n.d(o,"targetTo",(function(){return Ie})),n.d(o,"str",(function(){return Se})),n.d(o,"frob",(function(){return Pe})),n.d(o,"add",(function(){return Be})),n.d(o,"subtract",(function(){return Ee})),n.d(o,"multiplyScalar",(function(){return De})),n.d(o,"multiplyScalarAndAdd",(function(){return Fe})),n.d(o,"exactEquals",(function(){return Re})),n.d(o,"equals",(function(){return Ve})),n.d(o,"mul",(function(){return je})),n.d(o,"sub",(function(){return qe}));var s={};n.r(s),n.d(s,"create",(function(){return Ne})),n.d(s,"clone",(function(){return Ge})),n.d(s,"length",(function(){return Ue})),n.d(s,"fromValues",(function(){return He})),n.d(s,"copy",(function(){return We})),n.d(s,"set",(function(){return Ze})),n.d(s,"add",(function(){return Ye})),n.d(s,"subtract",(function(){return Ke})),n.d(s,"multiply",(function(){return Xe})),n.d(s,"divide",(function(){return Je})),n.d(s,"ceil",(function(){return Qe})),n.d(s,"floor",(function(){return $e})),n.d(s,"min",(function(){return tn})),n.d(s,"max",(function(){return en})),n.d(s,"round",(function(){return nn})),n.d(s,"scale",(function(){return rn})),n.d(s,"scaleAndAdd",(function(){return an})),n.d(s,"distance",(function(){return un})),n.d(s,"squaredDistance",(function(){return on})),n.d(s,"squaredLength",(function(){return sn})),n.d(s,"negate",(function(){return cn})),n.d(s,"inverse",(function(){return fn})),n.d(s,"normalize",(function(){return _n})),n.d(s,"dot",(function(){return ln})),n.d(s,"cross",(function(){return pn})),n.d(s,"lerp",(function(){return dn})),n.d(s,"hermite",(function(){return hn})),n.d(s,"bezier",(function(){return mn})),n.d(s,"random",(function(){return bn})),n.d(s,"transformMat4",(function(){return yn})),n.d(s,"transformMat3",(function(){return vn})),n.d(s,"transformQuat",(function(){return wn})),n.d(s,"rotateX",(function(){return gn})),n.d(s,"rotateY",(function(){return Mn})),n.d(s,"rotateZ",(function(){return kn})),n.d(s,"angle",(function(){return An})),n.d(s,"zero",(function(){return zn})),n.d(s,"str",(function(){return xn})),n.d(s,"exactEquals",(function(){return On})),n.d(s,"equals",(function(){return Ln})),n.d(s,"sub",(function(){return Tn})),n.d(s,"mul",(function(){return In})),n.d(s,"div",(function(){return Sn})),n.d(s,"dist",(function(){return Pn})),n.d(s,"sqrDist",(function(){return Bn})),n.d(s,"len",(function(){return En})),n.d(s,"sqrLen",(function(){return Dn})),n.d(s,"forEach",(function(){return Fn}));var c={};n.r(c),n.d(c,"create",(function(){return Rn})),n.d(c,"clone",(function(){return Vn})),n.d(c,"fromValues",(function(){return jn})),n.d(c,"copy",(function(){return qn})),n.d(c,"set",(function(){return Nn})),n.d(c,"add",(function(){return Gn})),n.d(c,"subtract",(function(){return Un})),n.d(c,"multiply",(function(){return Hn})),n.d(c,"divide",(function(){return Wn})),n.d(c,"ceil",(function(){return Zn})),n.d(c,"floor",(function(){return Yn})),n.d(c,"min",(function(){return Kn})),n.d(c,"max",(function(){return Xn})),n.d(c,"round",(function(){return Jn})),n.d(c,"scale",(function(){return Qn})),n.d(c,"scaleAndAdd",(function(){return $n})),n.d(c,"distance",(function(){return tr})),n.d(c,"squaredDistance",(function(){return er})),n.d(c,"length",(function(){return nr})),n.d(c,"squaredLength",(function(){return rr})),n.d(c,"negate",(function(){return ar})),n.d(c,"inverse",(function(){return ir})),n.d(c,"normalize",(function(){return ur})),n.d(c,"dot",(function(){return or})),n.d(c,"cross",(function(){return sr})),n.d(c,"lerp",(function(){return cr})),n.d(c,"random",(function(){return fr})),n.d(c,"transformMat4",(function(){return _r})),n.d(c,"transformQuat",(function(){return lr})),n.d(c,"zero",(function(){return pr})),n.d(c,"str",(function(){return dr})),n.d(c,"exactEquals",(function(){return hr})),n.d(c,"equals",(function(){return mr})),n.d(c,"sub",(function(){return br})),n.d(c,"mul",(function(){return yr})),n.d(c,"div",(function(){return vr})),n.d(c,"dist",(function(){return wr})),n.d(c,"sqrDist",(function(){return gr})),n.d(c,"len",(function(){return Mr})),n.d(c,"sqrLen",(function(){return kr})),n.d(c,"forEach",(function(){return Ar}));var f={};n.r(f),n.d(f,"create",(function(){return zr})),n.d(f,"identity",(function(){return xr})),n.d(f,"setAxisAngle",(function(){return Or})),n.d(f,"getAxisAngle",(function(){return Lr})),n.d(f,"getAngle",(function(){return Cr})),n.d(f,"multiply",(function(){return Tr})),n.d(f,"rotateX",(function(){return Ir})),n.d(f,"rotateY",(function(){return Sr})),n.d(f,"rotateZ",(function(){return Pr})),n.d(f,"calculateW",(function(){return Br})),n.d(f,"exp",(function(){return Er})),n.d(f,"ln",(function(){return Dr})),n.d(f,"pow",(function(){return Fr})),n.d(f,"slerp",(function(){return Rr})),n.d(f,"random",(function(){return Vr})),n.d(f,"invert",(function(){return jr})),n.d(f,"conjugate",(function(){return qr})),n.d(f,"fromMat3",(function(){return Nr})),n.d(f,"fromEuler",(function(){return Gr})),n.d(f,"str",(function(){return Ur})),n.d(f,"clone",(function(){return Jr})),n.d(f,"fromValues",(function(){return Qr})),n.d(f,"copy",(function(){return $r})),n.d(f,"set",(function(){return ta})),n.d(f,"add",(function(){return ea})),n.d(f,"mul",(function(){return na})),n.d(f,"scale",(function(){return ra})),n.d(f,"dot",(function(){return aa})),n.d(f,"lerp",(function(){return ia})),n.d(f,"length",(function(){return ua})),n.d(f,"len",(function(){return oa})),n.d(f,"squaredLength",(function(){return sa})),n.d(f,"sqrLen",(function(){return ca})),n.d(f,"normalize",(function(){return fa})),n.d(f,"exactEquals",(function(){return _a})),n.d(f,"equals",(function(){return la})),n.d(f,"rotationTo",(function(){return pa})),n.d(f,"sqlerp",(function(){return da})),n.d(f,"setAxes",(function(){return ha}));var _={};n.r(_),n.d(_,"create",(function(){return ma})),n.d(_,"clone",(function(){return ba})),n.d(_,"fromValues",(function(){return ya})),n.d(_,"fromRotationTranslationValues",(function(){return va})),n.d(_,"fromRotationTranslation",(function(){return wa})),n.d(_,"fromTranslation",(function(){return ga})),n.d(_,"fromRotation",(function(){return Ma})),n.d(_,"fromMat4",(function(){return ka})),n.d(_,"copy",(function(){return Aa})),n.d(_,"identity",(function(){return za})),n.d(_,"set",(function(){return xa})),n.d(_,"getReal",(function(){return Oa})),n.d(_,"getDual",(function(){return La})),n.d(_,"setReal",(function(){return Ca})),n.d(_,"setDual",(function(){return Ta})),n.d(_,"getTranslation",(function(){return Ia})),n.d(_,"translate",(function(){return Sa})),n.d(_,"rotateX",(function(){return Pa})),n.d(_,"rotateY",(function(){return Ba})),n.d(_,"rotateZ",(function(){return Ea})),n.d(_,"rotateByQuatAppend",(function(){return Da})),n.d(_,"rotateByQuatPrepend",(function(){return Fa})),n.d(_,"rotateAroundAxis",(function(){return Ra})),n.d(_,"add",(function(){return Va})),n.d(_,"multiply",(function(){return ja})),n.d(_,"mul",(function(){return qa})),n.d(_,"scale",(function(){return Na})),n.d(_,"dot",(function(){return Ga})),n.d(_,"lerp",(function(){return Ua})),n.d(_,"invert",(function(){return Ha})),n.d(_,"conjugate",(function(){return Wa})),n.d(_,"length",(function(){return Za})),n.d(_,"len",(function(){return Ya})),n.d(_,"squaredLength",(function(){return Ka})),n.d(_,"sqrLen",(function(){return Xa})),n.d(_,"normalize",(function(){return Ja})),n.d(_,"str",(function(){return Qa})),n.d(_,"exactEquals",(function(){return $a})),n.d(_,"equals",(function(){return ti}));var l={};n.r(l),n.d(l,"create",(function(){return ei})),n.d(l,"clone",(function(){return ni})),n.d(l,"fromValues",(function(){return ri})),n.d(l,"copy",(function(){return ai})),n.d(l,"set",(function(){return ii})),n.d(l,"add",(function(){return ui})),n.d(l,"subtract",(function(){return oi})),n.d(l,"multiply",(function(){return si})),n.d(l,"divide",(function(){return ci})),n.d(l,"ceil",(function(){return fi})),n.d(l,"floor",(function(){return _i})),n.d(l,"min",(function(){return li})),n.d(l,"max",(function(){return pi})),n.d(l,"round",(function(){return di})),n.d(l,"scale",(function(){return hi})),n.d(l,"scaleAndAdd",(function(){return mi})),n.d(l,"distance",(function(){return bi})),n.d(l,"squaredDistance",(function(){return yi})),n.d(l,"length",(function(){return vi})),n.d(l,"squaredLength",(function(){return wi})),n.d(l,"negate",(function(){return gi})),n.d(l,"inverse",(function(){return Mi})),n.d(l,"normalize",(function(){return ki})),n.d(l,"dot",(function(){return Ai})),n.d(l,"cross",(function(){return zi})),n.d(l,"lerp",(function(){return xi})),n.d(l,"random",(function(){return Oi})),n.d(l,"transformMat2",(function(){return Li})),n.d(l,"transformMat2d",(function(){return Ci})),n.d(l,"transformMat3",(function(){return Ti})),n.d(l,"transformMat4",(function(){return Ii})),n.d(l,"rotate",(function(){return Si})),n.d(l,"angle",(function(){return Pi})),n.d(l,"zero",(function(){return Bi})),n.d(l,"str",(function(){return Ei})),n.d(l,"exactEquals",(function(){return Di})),n.d(l,"equals",(function(){return Fi})),n.d(l,"len",(function(){return Ri})),n.d(l,"sub",(function(){return Vi})),n.d(l,"mul",(function(){return ji})),n.d(l,"div",(function(){return qi})),n.d(l,"dist",(function(){return Ni})),n.d(l,"sqrDist",(function(){return Gi})),n.d(l,"sqrLen",(function(){return Ui})),n.d(l,"forEach",(function(){return Hi}));var p=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,h=Math.random;function m(t){d=t}var b=Math.PI/180;function y(t){return t*b}function v(t,e){return Math.abs(t-e)<=p*Math.max(1,Math.abs(t),Math.abs(e))}function w(){var t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function g(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function M(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function k(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,n,r){var a=new d(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function z(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function x(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function O(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n*i-a*r;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-a*u,t[3]=n*u,t):null}function L(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function C(t){return t[0]*t[3]-t[2]*t[1]}function T(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*o+i*s,t[1]=a*o+u*s,t[2]=r*c+i*f,t[3]=a*c+u*f,t}function I(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*o,t[1]=a*s+u*o,t[2]=r*-o+i*s,t[3]=a*-o+u*s,t}function S(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[0],s=n[1];return t[0]=r*o,t[1]=a*o,t[2]=i*s,t[3]=u*s,t}function P(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function B(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function E(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t){return Math.hypot(t[0],t[1],t[2],t[3])}function F(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function R(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function V(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function j(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function q(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=e[0],o=e[1],s=e[2],c=e[3];return Math.abs(n-u)<=p*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-o)<=p*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=p*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=p*Math.max(1,Math.abs(i),Math.abs(c))}function N(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function G(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var U=T,H=V;function W(){var t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Z(t){var e=new d(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function X(t,e,n,r,a,i){var u=new d(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u}function J(t,e,n,r,a,i,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=u,t}function Q(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=n*i-r*a;return s?(s=1/s,t[0]=i*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*o-i*u)*s,t[5]=(r*u-n*o)*s,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=n[0],f=n[1],_=n[2],l=n[3],p=n[4],d=n[5];return t[0]=r*c+i*f,t[1]=a*c+u*f,t[2]=r*_+i*l,t[3]=a*_+u*l,t[4]=r*p+i*d+o,t[5]=a*p+u*d+s,t}function et(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+i*c,t[1]=a*f+u*c,t[2]=r*-c+i*f,t[3]=a*-c+u*f,t[4]=o,t[5]=s,t}function nt(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=a*c,t[2]=i*f,t[3]=u*f,t[4]=o,t[5]=s,t}function rt(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=r*c+i*f+o,t[5]=a*c+u*f+s,t}function at(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function it(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ut(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ot(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function st(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ft(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function _t(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function lt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function pt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function dt(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],o=t[5],s=e[0],c=e[1],f=e[2],_=e[3],l=e[4],d=e[5];return Math.abs(n-s)<=p*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-c)<=p*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-f)<=p*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-_)<=p*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(u-l)<=p*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(o-d)<=p*Math.max(1,Math.abs(o),Math.abs(d))}var ht=tt,mt=ft;function bt(){var t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vt(t){var e=new d(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function wt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function gt(t,e,n,r,a,i,u,o,s){var c=new d(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=a,c[5]=i,c[6]=u,c[7]=o,c[8]=s,c}function Mt(t,e,n,r,a,i,u,o,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t[8]=c,t}function kt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function zt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],f=e[8],_=f*u-o*c,l=-f*i+o*s,p=c*i-u*s,d=n*_+r*l+a*p;return d?(d=1/d,t[0]=_*d,t[1]=(-f*r+a*c)*d,t[2]=(o*r-a*u)*d,t[3]=l*d,t[4]=(f*n-a*s)*d,t[5]=(-o*n+a*i)*d,t[6]=p*d,t[7]=(-c*n+r*s)*d,t[8]=(u*n-r*i)*d,t):null}function xt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],f=e[8];return t[0]=u*f-o*c,t[1]=a*c-r*f,t[2]=r*o-a*u,t[3]=o*s-i*f,t[4]=n*f-a*s,t[5]=a*i-n*o,t[6]=i*c-u*s,t[7]=r*s-n*c,t[8]=n*u-r*i,t}function Ot(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],u=t[5],o=t[6],s=t[7],c=t[8];return e*(c*i-u*s)+n*(-c*a+u*o)+r*(s*a-i*o)}function Lt(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=e[8],l=n[0],p=n[1],d=n[2],h=n[3],m=n[4],b=n[5],y=n[6],v=n[7],w=n[8];return t[0]=l*r+p*u+d*c,t[1]=l*a+p*o+d*f,t[2]=l*i+p*s+d*_,t[3]=h*r+m*u+b*c,t[4]=h*a+m*o+b*f,t[5]=h*i+m*s+b*_,t[6]=y*r+v*u+w*c,t[7]=y*a+v*o+w*f,t[8]=y*i+v*s+w*_,t}function Ct(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=e[8],l=n[0],p=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=s,t[6]=l*r+p*u+c,t[7]=l*a+p*o+f,t[8]=l*i+p*s+_,t}function Tt(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=e[8],l=Math.sin(n),p=Math.cos(n);return t[0]=p*r+l*u,t[1]=p*a+l*o,t[2]=p*i+l*s,t[3]=p*u-l*r,t[4]=p*o-l*a,t[5]=p*s-l*i,t[6]=c,t[7]=f,t[8]=_,t}function It(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function St(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Pt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Bt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Et(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Dt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n+n,o=r+r,s=a+a,c=n*u,f=r*u,_=r*o,l=a*u,p=a*o,d=a*s,h=i*u,m=i*o,b=i*s;return t[0]=1-_-d,t[3]=f-b,t[6]=l+m,t[1]=f+b,t[4]=1-c-d,t[7]=p-h,t[2]=l-m,t[5]=p+h,t[8]=1-c-_,t}function Ft(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],f=e[8],_=e[9],l=e[10],p=e[11],d=e[12],h=e[13],m=e[14],b=e[15],y=n*o-r*u,v=n*s-a*u,w=n*c-i*u,g=r*s-a*o,M=r*c-i*o,k=a*c-i*s,A=f*h-_*d,z=f*m-l*d,x=f*b-p*d,O=_*m-l*h,L=_*b-p*h,C=l*b-p*m,T=y*C-v*L+w*O+g*x-M*z+k*A;return T?(T=1/T,t[0]=(o*C-s*L+c*O)*T,t[1]=(s*x-u*C-c*z)*T,t[2]=(u*L-o*x+c*A)*T,t[3]=(a*L-r*C-i*O)*T,t[4]=(n*C-a*x+i*z)*T,t[5]=(r*x-n*L-i*A)*T,t[6]=(h*k-m*M+b*g)*T,t[7]=(m*w-d*k-b*v)*T,t[8]=(d*M-h*w+b*y)*T,t):null}function Rt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Vt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function jt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function qt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Nt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Gt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Ut(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ht(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Wt(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],o=t[5],s=t[6],c=t[7],f=t[8],_=e[0],l=e[1],d=e[2],h=e[3],m=e[4],b=e[5],y=e[6],v=e[7],w=e[8];return Math.abs(n-_)<=p*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-l)<=p*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-d)<=p*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-h)<=p*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-m)<=p*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(o-b)<=p*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-y)<=p*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-v)<=p*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-w)<=p*Math.max(1,Math.abs(f),Math.abs(w))}var Zt=Lt,Yt=Nt;function Kt(){var t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Xt(t){var e=new d(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Jt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Qt(t,e,n,r,a,i,u,o,s,c,f,_,l,p,h,m){var b=new d(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=a,b[5]=i,b[6]=u,b[7]=o,b[8]=s,b[9]=c,b[10]=f,b[11]=_,b[12]=l,b[13]=p,b[14]=h,b[15]=m,b}function $t(t,e,n,r,a,i,u,o,s,c,f,_,l,p,d,h,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t[8]=c,t[9]=f,t[10]=_,t[11]=l,t[12]=p,t[13]=d,t[14]=h,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],i=e[6],u=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=u,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],f=e[8],_=e[9],l=e[10],p=e[11],d=e[12],h=e[13],m=e[14],b=e[15],y=n*o-r*u,v=n*s-a*u,w=n*c-i*u,g=r*s-a*o,M=r*c-i*o,k=a*c-i*s,A=f*h-_*d,z=f*m-l*d,x=f*b-p*d,O=_*m-l*h,L=_*b-p*h,C=l*b-p*m,T=y*C-v*L+w*O+g*x-M*z+k*A;return T?(T=1/T,t[0]=(o*C-s*L+c*O)*T,t[1]=(a*L-r*C-i*O)*T,t[2]=(h*k-m*M+b*g)*T,t[3]=(l*M-_*k-p*g)*T,t[4]=(s*x-u*C-c*z)*T,t[5]=(n*C-a*x+i*z)*T,t[6]=(m*w-d*k-b*v)*T,t[7]=(f*k-l*w+p*v)*T,t[8]=(u*L-o*x+c*A)*T,t[9]=(r*x-n*L-i*A)*T,t[10]=(d*M-h*w+b*y)*T,t[11]=(_*w-f*M-p*y)*T,t[12]=(o*z-u*O-s*A)*T,t[13]=(n*O-r*z+a*A)*T,t[14]=(h*v-d*g-m*y)*T,t[15]=(f*g-_*v+l*y)*T,t):null}function re(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],f=e[8],_=e[9],l=e[10],p=e[11],d=e[12],h=e[13],m=e[14],b=e[15];return t[0]=o*(l*b-p*m)-_*(s*b-c*m)+h*(s*p-c*l),t[1]=-(r*(l*b-p*m)-_*(a*b-i*m)+h*(a*p-i*l)),t[2]=r*(s*b-c*m)-o*(a*b-i*m)+h*(a*c-i*s),t[3]=-(r*(s*p-c*l)-o*(a*p-i*l)+_*(a*c-i*s)),t[4]=-(u*(l*b-p*m)-f*(s*b-c*m)+d*(s*p-c*l)),t[5]=n*(l*b-p*m)-f*(a*b-i*m)+d*(a*p-i*l),t[6]=-(n*(s*b-c*m)-u*(a*b-i*m)+d*(a*c-i*s)),t[7]=n*(s*p-c*l)-u*(a*p-i*l)+f*(a*c-i*s),t[8]=u*(_*b-p*h)-f*(o*b-c*h)+d*(o*p-c*_),t[9]=-(n*(_*b-p*h)-f*(r*b-i*h)+d*(r*p-i*_)),t[10]=n*(o*b-c*h)-u*(r*b-i*h)+d*(r*c-i*o),t[11]=-(n*(o*p-c*_)-u*(r*p-i*_)+f*(r*c-i*o)),t[12]=-(u*(_*m-l*h)-f*(o*m-s*h)+d*(o*l-s*_)),t[13]=n*(_*m-l*h)-f*(r*m-a*h)+d*(r*l-a*_),t[14]=-(n*(o*m-s*h)-u*(r*m-a*h)+d*(r*s-a*o)),t[15]=n*(o*l-s*_)-u*(r*l-a*_)+f*(r*s-a*o),t}function ae(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],u=t[5],o=t[6],s=t[7],c=t[8],f=t[9],_=t[10],l=t[11],p=t[12],d=t[13],h=t[14],m=t[15];return(e*u-n*i)*(_*m-l*h)-(e*o-r*i)*(f*m-l*d)+(e*s-a*i)*(f*h-_*d)+(n*o-r*u)*(c*m-l*p)-(n*s-a*u)*(c*h-_*p)+(r*s-a*o)*(c*d-f*p)}function ie(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=e[8],l=e[9],p=e[10],d=e[11],h=e[12],m=e[13],b=e[14],y=e[15],v=n[0],w=n[1],g=n[2],M=n[3];return t[0]=v*r+w*o+g*_+M*h,t[1]=v*a+w*s+g*l+M*m,t[2]=v*i+w*c+g*p+M*b,t[3]=v*u+w*f+g*d+M*y,v=n[4],w=n[5],g=n[6],M=n[7],t[4]=v*r+w*o+g*_+M*h,t[5]=v*a+w*s+g*l+M*m,t[6]=v*i+w*c+g*p+M*b,t[7]=v*u+w*f+g*d+M*y,v=n[8],w=n[9],g=n[10],M=n[11],t[8]=v*r+w*o+g*_+M*h,t[9]=v*a+w*s+g*l+M*m,t[10]=v*i+w*c+g*p+M*b,t[11]=v*u+w*f+g*d+M*y,v=n[12],w=n[13],g=n[14],M=n[15],t[12]=v*r+w*o+g*_+M*h,t[13]=v*a+w*s+g*l+M*m,t[14]=v*i+w*c+g*p+M*b,t[15]=v*u+w*f+g*d+M*y,t}function ue(t,e,n){var r,a,i,u,o,s,c,f,_,l,p,d,h=n[0],m=n[1],b=n[2];return e===t?(t[12]=e[0]*h+e[4]*m+e[8]*b+e[12],t[13]=e[1]*h+e[5]*m+e[9]*b+e[13],t[14]=e[2]*h+e[6]*m+e[10]*b+e[14],t[15]=e[3]*h+e[7]*m+e[11]*b+e[15]):(r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=e[8],l=e[9],p=e[10],d=e[11],t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=s,t[6]=c,t[7]=f,t[8]=_,t[9]=l,t[10]=p,t[11]=d,t[12]=r*h+o*m+_*b+e[12],t[13]=a*h+s*m+l*b+e[13],t[14]=i*h+c*m+p*b+e[14],t[15]=u*h+f*m+d*b+e[15]),t}function oe(t,e,n){var r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function se(t,e,n,r){var a,i,u,o,s,c,f,_,l,d,h,m,b,y,v,w,g,M,k,A,z,x,O,L,C=r[0],T=r[1],I=r[2],S=Math.hypot(C,T,I);return S<p?null:(C*=S=1/S,T*=S,I*=S,a=Math.sin(n),u=1-(i=Math.cos(n)),o=e[0],s=e[1],c=e[2],f=e[3],_=e[4],l=e[5],d=e[6],h=e[7],m=e[8],b=e[9],y=e[10],v=e[11],w=C*C*u+i,g=T*C*u+I*a,M=I*C*u-T*a,k=C*T*u-I*a,A=T*T*u+i,z=I*T*u+C*a,x=C*I*u+T*a,O=T*I*u-C*a,L=I*I*u+i,t[0]=o*w+_*g+m*M,t[1]=s*w+l*g+b*M,t[2]=c*w+d*g+y*M,t[3]=f*w+h*g+v*M,t[4]=o*k+_*A+m*z,t[5]=s*k+l*A+b*z,t[6]=c*k+d*A+y*z,t[7]=f*k+h*A+v*z,t[8]=o*x+_*O+m*L,t[9]=s*x+l*O+b*L,t[10]=c*x+d*O+y*L,t[11]=f*x+h*O+v*L,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[4],u=e[5],o=e[6],s=e[7],c=e[8],f=e[9],_=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+c*r,t[5]=u*a+f*r,t[6]=o*a+_*r,t[7]=s*a+l*r,t[8]=c*a-i*r,t[9]=f*a-u*r,t[10]=_*a-o*r,t[11]=l*a-s*r,t}function fe(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],u=e[1],o=e[2],s=e[3],c=e[8],f=e[9],_=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-c*r,t[1]=u*a-f*r,t[2]=o*a-_*r,t[3]=s*a-l*r,t[8]=i*r+c*a,t[9]=u*r+f*a,t[10]=o*r+_*a,t[11]=s*r+l*a,t}function _e(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],u=e[1],o=e[2],s=e[3],c=e[4],f=e[5],_=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+c*r,t[1]=u*a+f*r,t[2]=o*a+_*r,t[3]=s*a+l*r,t[4]=c*a-i*r,t[5]=f*a-u*r,t[6]=_*a-o*r,t[7]=l*a-s*r,t}function le(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function de(t,e,n){var r,a,i,u=n[0],o=n[1],s=n[2],c=Math.hypot(u,o,s);return c<p?null:(u*=c=1/c,o*=c,s*=c,r=Math.sin(e),i=1-(a=Math.cos(e)),t[0]=u*u*i+a,t[1]=o*u*i+s*r,t[2]=s*u*i-o*r,t[3]=0,t[4]=u*o*i-s*r,t[5]=o*o*i+a,t[6]=s*o*i+u*r,t[7]=0,t[8]=u*s*i+o*r,t[9]=o*s*i-u*r,t[10]=s*s*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function he(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function be(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=r+r,s=a+a,c=i+i,f=r*o,_=r*s,l=r*c,p=a*s,d=a*c,h=i*c,m=u*o,b=u*s,y=u*c;return t[0]=1-(p+h),t[1]=_+y,t[2]=l-b,t[3]=0,t[4]=_-y,t[5]=1-(f+h),t[6]=d+m,t[7]=0,t[8]=l+b,t[9]=d-m,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ve(t,e){var n=new d(3),r=-e[0],a=-e[1],i=-e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=r*r+a*a+i*i+u*u;return _>0?(n[0]=2*(o*u+f*r+s*i-c*a)/_,n[1]=2*(s*u+f*a+c*r-o*i)/_,n[2]=2*(c*u+f*i+o*a-s*r)/_):(n[0]=2*(o*u+f*r+s*i-c*a),n[1]=2*(s*u+f*a+c*r-o*i),n[2]=2*(c*u+f*i+o*a-s*r)),ye(t,e,n),t}function we(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ge(t,e){var n=e[0],r=e[1],a=e[2],i=e[4],u=e[5],o=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(i,u,o),t[2]=Math.hypot(s,c,f),t}function Me(t,e){var n=new d(3);ge(n,e);var r=1/n[0],a=1/n[1],i=1/n[2],u=e[0]*r,o=e[1]*a,s=e[2]*i,c=e[4]*r,f=e[5]*a,_=e[6]*i,l=e[8]*r,p=e[9]*a,h=e[10]*i,m=u+f+h,b=0;return m>0?(b=2*Math.sqrt(m+1),t[3]=.25*b,t[0]=(_-p)/b,t[1]=(l-s)/b,t[2]=(o-c)/b):u>f&&u>h?(b=2*Math.sqrt(1+u-f-h),t[3]=(_-p)/b,t[0]=.25*b,t[1]=(o+c)/b,t[2]=(l+s)/b):f>h?(b=2*Math.sqrt(1+f-u-h),t[3]=(l-s)/b,t[0]=(o+c)/b,t[1]=.25*b,t[2]=(_+p)/b):(b=2*Math.sqrt(1+h-u-f),t[3]=(o-c)/b,t[0]=(l+s)/b,t[1]=(_+p)/b,t[2]=.25*b),t}function ke(t,e,n,r){var a=e[0],i=e[1],u=e[2],o=e[3],s=a+a,c=i+i,f=u+u,_=a*s,l=a*c,p=a*f,d=i*c,h=i*f,m=u*f,b=o*s,y=o*c,v=o*f,w=r[0],g=r[1],M=r[2];return t[0]=(1-(d+m))*w,t[1]=(l+v)*w,t[2]=(p-y)*w,t[3]=0,t[4]=(l-v)*g,t[5]=(1-(_+m))*g,t[6]=(h+b)*g,t[7]=0,t[8]=(p+y)*M,t[9]=(h-b)*M,t[10]=(1-(_+d))*M,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ae(t,e,n,r,a){var i=e[0],u=e[1],o=e[2],s=e[3],c=i+i,f=u+u,_=o+o,l=i*c,p=i*f,d=i*_,h=u*f,m=u*_,b=o*_,y=s*c,v=s*f,w=s*_,g=r[0],M=r[1],k=r[2],A=a[0],z=a[1],x=a[2],O=(1-(h+b))*g,L=(p+w)*g,C=(d-v)*g,T=(p-w)*M,I=(1-(l+b))*M,S=(m+y)*M,P=(d+v)*k,B=(m-y)*k,E=(1-(l+h))*k;return t[0]=O,t[1]=L,t[2]=C,t[3]=0,t[4]=T,t[5]=I,t[6]=S,t[7]=0,t[8]=P,t[9]=B,t[10]=E,t[11]=0,t[12]=n[0]+A-(O*A+T*z+P*x),t[13]=n[1]+z-(L*A+I*z+B*x),t[14]=n[2]+x-(C*A+S*z+E*x),t[15]=1,t}function ze(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n+n,o=r+r,s=a+a,c=n*u,f=r*u,_=r*o,l=a*u,p=a*o,d=a*s,h=i*u,m=i*o,b=i*s;return t[0]=1-_-d,t[1]=f+b,t[2]=l-m,t[3]=0,t[4]=f-b,t[5]=1-c-d,t[6]=p+h,t[7]=0,t[8]=l+m,t[9]=p-h,t[10]=1-c-_,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xe(t,e,n,r,a,i,u){var o=1/(n-e),s=1/(a-r),c=1/(i-u);return t[0]=2*i*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(n+e)*o,t[9]=(a+r)*s,t[10]=(u+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*c,t[15]=0,t}function Oe(t,e,n,r,a){var i,u=1/Math.tan(e/2);return t[0]=u/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=(a+r)*i,t[14]=2*a*r*i):(t[10]=-1,t[14]=-2*r),t}function Le(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),s=2/(u+o),c=2/(a+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(u-o)*s*.5,t[9]=(a-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ce(t,e,n,r,a,i,u){var o=1/(e-n),s=1/(r-a),c=1/(i-u);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*o,t[13]=(a+r)*s,t[14]=(u+i)*c,t[15]=1,t}function Te(t,e,n,r){var a,i,u,o,s,c,f,_,l,d,h=e[0],m=e[1],b=e[2],y=r[0],v=r[1],w=r[2],g=n[0],M=n[1],k=n[2];return Math.abs(h-g)<p&&Math.abs(m-M)<p&&Math.abs(b-k)<p?te(t):(f=h-g,_=m-M,l=b-k,a=v*(l*=d=1/Math.hypot(f,_,l))-w*(_*=d),i=w*(f*=d)-y*l,u=y*_-v*f,(d=Math.hypot(a,i,u))?(a*=d=1/d,i*=d,u*=d):(a=0,i=0,u=0),o=_*u-l*i,s=l*a-f*u,c=f*i-_*a,(d=Math.hypot(o,s,c))?(o*=d=1/d,s*=d,c*=d):(o=0,s=0,c=0),t[0]=a,t[1]=o,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=_,t[7]=0,t[8]=u,t[9]=c,t[10]=l,t[11]=0,t[12]=-(a*h+i*m+u*b),t[13]=-(o*h+s*m+c*b),t[14]=-(f*h+_*m+l*b),t[15]=1,t)}function Ie(t,e,n,r){var a=e[0],i=e[1],u=e[2],o=r[0],s=r[1],c=r[2],f=a-n[0],_=i-n[1],l=u-n[2],p=f*f+_*_+l*l;p>0&&(f*=p=1/Math.sqrt(p),_*=p,l*=p);var d=s*l-c*_,h=c*f-o*l,m=o*_-s*f;return(p=d*d+h*h+m*m)>0&&(d*=p=1/Math.sqrt(p),h*=p,m*=p),t[0]=d,t[1]=h,t[2]=m,t[3]=0,t[4]=_*m-l*h,t[5]=l*d-f*m,t[6]=f*h-_*d,t[7]=0,t[8]=f,t[9]=_,t[10]=l,t[11]=0,t[12]=a,t[13]=i,t[14]=u,t[15]=1,t}function Se(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Pe(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Be(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Ee(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function De(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Fe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Re(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ve(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],o=t[5],s=t[6],c=t[7],f=t[8],_=t[9],l=t[10],d=t[11],h=t[12],m=t[13],b=t[14],y=t[15],v=e[0],w=e[1],g=e[2],M=e[3],k=e[4],A=e[5],z=e[6],x=e[7],O=e[8],L=e[9],C=e[10],T=e[11],I=e[12],S=e[13],P=e[14],B=e[15];return Math.abs(n-v)<=p*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-w)<=p*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(a-g)<=p*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(i-M)<=p*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-k)<=p*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(o-A)<=p*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(s-z)<=p*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(c-x)<=p*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(f-O)<=p*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(_-L)<=p*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(l-C)<=p*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(d-T)<=p*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(h-I)<=p*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(m-S)<=p*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(b-P)<=p*Math.max(1,Math.abs(b),Math.abs(P))&&Math.abs(y-B)<=p*Math.max(1,Math.abs(y),Math.abs(B))}var je=ie,qe=Ee;function Ne(){var t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ge(t){var e=new d(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ue(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function He(t,e,n){var r=new d(3);return r[0]=t,r[1]=e,r[2]=n,r}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ze(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ye(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ke(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Xe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Je(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Qe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function an(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function un(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function on(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function sn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function _n(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pn(t,e,n){var r=e[0],a=e[1],i=e[2],u=n[0],o=n[1],s=n[2];return t[0]=a*s-i*o,t[1]=i*u-r*s,t[2]=r*o-a*u,t}function dn(t,e,n,r){var a=e[0],i=e[1],u=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=u+r*(n[2]-u),t}function hn(t,e,n,r,a,i){var u=i*i,o=u*(2*i-3)+1,s=u*(i-2)+i,c=u*(i-1),f=u*(3-2*i);return t[0]=e[0]*o+n[0]*s+r[0]*c+a[0]*f,t[1]=e[1]*o+n[1]*s+r[1]*c+a[1]*f,t[2]=e[2]*o+n[2]*s+r[2]*c+a[2]*f,t}function mn(t,e,n,r,a,i){var u=1-i,o=u*u,s=i*i,c=o*u,f=3*i*o,_=3*s*u,l=s*i;return t[0]=e[0]*c+n[0]*f+r[0]*_+a[0]*l,t[1]=e[1]*c+n[1]*f+r[1]*_+a[1]*l,t[2]=e[2]*c+n[2]*f+r[2]*_+a[2]*l,t}function bn(t,e){e=e||1;var n=2*h()*Math.PI,r=2*h()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function yn(t,e,n){var r=e[0],a=e[1],i=e[2],u=n[3]*r+n[7]*a+n[11]*i+n[15];return u=u||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/u,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/u,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/u,t}function vn(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function wn(t,e,n){var r=n[0],a=n[1],i=n[2],u=n[3],o=e[0],s=e[1],c=e[2],f=a*c-i*s,_=i*o-r*c,l=r*s-a*o,p=a*l-i*_,d=i*f-r*l,h=r*_-a*f,m=2*u;return f*=m,_*=m,l*=m,p*=2,d*=2,h*=2,t[0]=o+f+p,t[1]=s+_+d,t[2]=c+l+h,t}function gn(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Mn(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function kn(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function An(t,e){var n=He(t[0],t[1],t[2]),r=He(e[0],e[1],e[2]);_n(n,n),_n(r,r);var a=ln(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)}function zn(t){return t[0]=0,t[1]=0,t[2]=0,t}function xn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function On(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ln(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],u=e[1],o=e[2];return Math.abs(n-i)<=p*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=p*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-o)<=p*Math.max(1,Math.abs(a),Math.abs(o))}var Cn,Tn=Ke,In=Xe,Sn=Je,Pn=un,Bn=on,En=Ue,Dn=sn,Fn=(Cn=Ne(),function(t,e,n,r,a,i){var u,o;for(e||(e=3),n||(n=0),o=r?Math.min(r*e+n,t.length):t.length,u=n;u<o;u+=e)Cn[0]=t[u],Cn[1]=t[u+1],Cn[2]=t[u+2],a(Cn,Cn,i),t[u]=Cn[0],t[u+1]=Cn[1],t[u+2]=Cn[2];return t});function Rn(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Vn(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function jn(t,e,n,r){var a=new d(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function qn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Nn(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function Gn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Un(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Hn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Wn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Zn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Yn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Kn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Xn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Jn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Qn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $n(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,a,i)}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+a*a+i*i}function nr(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.hypot(e,n,r,a)}function rr(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function ar(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ir(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ur(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n*n+r*r+a*a+i*i;return u>0&&(u=1/Math.sqrt(u)),t[0]=n*u,t[1]=r*u,t[2]=a*u,t[3]=i*u,t}function or(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function sr(t,e,n,r){var a=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],u=n[0]*r[3]-n[3]*r[0],o=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],_=e[1],l=e[2],p=e[3];return t[0]=_*c-l*s+p*o,t[1]=-f*c+l*u-p*i,t[2]=f*s-_*u+p*a,t[3]=-f*o+_*i-l*a,t}function cr(t,e,n,r){var a=e[0],i=e[1],u=e[2],o=e[3];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=u+r*(n[2]-u),t[3]=o+r*(n[3]-o),t}function fr(t,e){var n,r,a,i,u,o;e=e||1;do{u=(n=2*h()-1)*n+(r=2*h()-1)*r}while(u>=1);do{o=(a=2*h()-1)*a+(i=2*h()-1)*i}while(o>=1);var s=Math.sqrt((1-u)/o);return t[0]=e*n,t[1]=e*r,t[2]=e*a*s,t[3]=e*i*s,t}function _r(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*u,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*u,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*u,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*u,t}function lr(t,e,n){var r=e[0],a=e[1],i=e[2],u=n[0],o=n[1],s=n[2],c=n[3],f=c*r+o*i-s*a,_=c*a+s*r-u*i,l=c*i+u*a-o*r,p=-u*r-o*a-s*i;return t[0]=f*c+p*-u+_*-s-l*-o,t[1]=_*c+p*-o+l*-u-f*-s,t[2]=l*c+p*-s+f*-o-_*-u,t[3]=e[3],t}function pr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function dr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function hr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mr(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=e[0],o=e[1],s=e[2],c=e[3];return Math.abs(n-u)<=p*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-o)<=p*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=p*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=p*Math.max(1,Math.abs(i),Math.abs(c))}var br=Un,yr=Hn,vr=Wn,wr=tr,gr=er,Mr=nr,kr=rr,Ar=function(){var t=Rn();return function(e,n,r,a,i,u){var o,s;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,o=r;o<s;o+=n)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],i(t,t,u),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();function zr(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function xr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Or(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Lr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>p?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Cr(t,e){var n=aa(t,e);return Math.acos(2*n*n-1)}function Tr(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+u*o+a*c-i*s,t[1]=a*f+u*s+i*o-r*c,t[2]=i*f+u*c+r*s-a*o,t[3]=u*f-r*o-a*s-i*c,t}function Ir(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s+u*o,t[1]=a*s+i*o,t[2]=i*s-a*o,t[3]=u*s-r*o,t}function Sr(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s-i*o,t[1]=a*s+u*o,t[2]=i*s+r*o,t[3]=u*s-a*o,t}function Pr(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*o,t[1]=a*s-r*o,t[2]=i*s+u*o,t[3]=u*s-i*o,t}function Br(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t}function Er(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=Math.sqrt(n*n+r*r+a*a),o=Math.exp(i),s=u>0?o*Math.sin(u)/u:0;return t[0]=n*s,t[1]=r*s,t[2]=a*s,t[3]=o*Math.cos(u),t}function Dr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=Math.sqrt(n*n+r*r+a*a),o=u>0?Math.atan2(u,i)/u:0;return t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=.5*Math.log(n*n+r*r+a*a+i*i),t}function Fr(t,e,n){return Dr(t,e),ra(t,t,n),Er(t,t),t}function Rr(t,e,n,r){var a,i,u,o,s,c=e[0],f=e[1],_=e[2],l=e[3],d=n[0],h=n[1],m=n[2],b=n[3];return(i=c*d+f*h+_*m+l*b)<0&&(i=-i,d=-d,h=-h,m=-m,b=-b),1-i>p?(a=Math.acos(i),u=Math.sin(a),o=Math.sin((1-r)*a)/u,s=Math.sin(r*a)/u):(o=1-r,s=r),t[0]=o*c+s*d,t[1]=o*f+s*h,t[2]=o*_+s*m,t[3]=o*l+s*b,t}function Vr(t){var e=h(),n=h(),r=h(),a=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*n),t[1]=a*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function jr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n*n+r*r+a*a+i*i,o=u?1/u:0;return t[0]=-n*o,t[1]=-r*o,t[2]=-a*o,t[3]=i*o,t}function qr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Nr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,u=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*u+u]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+u]-e[3*u+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[u]=(e[3*u+a]+e[3*a+u])*n}return t}function Gr(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var i=Math.sin(e),u=Math.cos(e),o=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=i*s*f-u*o*c,t[1]=u*o*f+i*s*c,t[2]=u*s*c-i*o*f,t[3]=u*s*f+i*o*c,t}function Ur(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Hr,Wr,Zr,Yr,Kr,Xr,Jr=Vn,Qr=jn,$r=qn,ta=Nn,ea=Gn,na=Tr,ra=Qn,aa=or,ia=cr,ua=nr,oa=ua,sa=rr,ca=sa,fa=ur,_a=hr,la=mr,pa=(Hr=Ne(),Wr=He(1,0,0),Zr=He(0,1,0),function(t,e,n){var r=ln(e,n);return r<-.999999?(pn(Hr,Wr,e),En(Hr)<1e-6&&pn(Hr,Zr,e),_n(Hr,Hr),Or(t,Hr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pn(Hr,e,n),t[0]=Hr[0],t[1]=Hr[1],t[2]=Hr[2],t[3]=1+r,fa(t,t))}),da=(Yr=zr(),Kr=zr(),function(t,e,n,r,a,i){return Rr(Yr,e,a,i),Rr(Kr,n,r,i),Rr(t,Yr,Kr,2*i*(1-i)),t}),ha=(Xr=bt(),function(t,e,n,r){return Xr[0]=n[0],Xr[3]=n[1],Xr[6]=n[2],Xr[1]=r[0],Xr[4]=r[1],Xr[7]=r[2],Xr[2]=-e[0],Xr[5]=-e[1],Xr[8]=-e[2],fa(t,Nr(t,Xr))});function ma(){var t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function ba(t){var e=new d(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function ya(t,e,n,r,a,i,u,o){var s=new d(8);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=a,s[5]=i,s[6]=u,s[7]=o,s}function va(t,e,n,r,a,i,u){var o=new d(8);o[0]=t,o[1]=e,o[2]=n,o[3]=r;var s=.5*a,c=.5*i,f=.5*u;return o[4]=s*r+c*n-f*e,o[5]=c*r+f*t-s*n,o[6]=f*r+s*e-c*t,o[7]=-s*t-c*e-f*n,o}function wa(t,e,n){var r=.5*n[0],a=.5*n[1],i=.5*n[2],u=e[0],o=e[1],s=e[2],c=e[3];return t[0]=u,t[1]=o,t[2]=s,t[3]=c,t[4]=r*c+a*s-i*o,t[5]=a*c+i*u-r*s,t[6]=i*c+r*o-a*u,t[7]=-r*u-a*o-i*s,t}function ga(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Ma(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function ka(t,e){var n=zr();Me(n,e);var r=new d(3);return we(r,e),wa(t,n,r),t}function Aa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function za(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function xa(t,e,n,r,a,i,u,o,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t}var Oa=$r;function La(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Ca=$r;function Ta(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Ia(t,e){var n=e[4],r=e[5],a=e[6],i=e[7],u=-e[0],o=-e[1],s=-e[2],c=e[3];return t[0]=2*(n*c+i*u+r*s-a*o),t[1]=2*(r*c+i*o+a*u-n*s),t[2]=2*(a*c+i*s+n*o-r*u),t}function Sa(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=.5*n[0],s=.5*n[1],c=.5*n[2],f=e[4],_=e[5],l=e[6],p=e[7];return t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=u*o+a*c-i*s+f,t[5]=u*s+i*o-r*c+_,t[6]=u*c+r*s-a*o+l,t[7]=-r*o-a*s-i*c+p,t}function Pa(t,e,n){var r=-e[0],a=-e[1],i=-e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=o*u+f*r+s*i-c*a,l=s*u+f*a+c*r-o*i,p=c*u+f*i+o*a-s*r,d=f*u-o*r-s*a-c*i;return Ir(t,e,n),r=t[0],a=t[1],i=t[2],u=t[3],t[4]=_*u+d*r+l*i-p*a,t[5]=l*u+d*a+p*r-_*i,t[6]=p*u+d*i+_*a-l*r,t[7]=d*u-_*r-l*a-p*i,t}function Ba(t,e,n){var r=-e[0],a=-e[1],i=-e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=o*u+f*r+s*i-c*a,l=s*u+f*a+c*r-o*i,p=c*u+f*i+o*a-s*r,d=f*u-o*r-s*a-c*i;return Sr(t,e,n),r=t[0],a=t[1],i=t[2],u=t[3],t[4]=_*u+d*r+l*i-p*a,t[5]=l*u+d*a+p*r-_*i,t[6]=p*u+d*i+_*a-l*r,t[7]=d*u-_*r-l*a-p*i,t}function Ea(t,e,n){var r=-e[0],a=-e[1],i=-e[2],u=e[3],o=e[4],s=e[5],c=e[6],f=e[7],_=o*u+f*r+s*i-c*a,l=s*u+f*a+c*r-o*i,p=c*u+f*i+o*a-s*r,d=f*u-o*r-s*a-c*i;return Pr(t,e,n),r=t[0],a=t[1],i=t[2],u=t[3],t[4]=_*u+d*r+l*i-p*a,t[5]=l*u+d*a+p*r-_*i,t[6]=p*u+d*i+_*a-l*r,t[7]=d*u-_*r-l*a-p*i,t}function Da(t,e,n){var r=n[0],a=n[1],i=n[2],u=n[3],o=e[0],s=e[1],c=e[2],f=e[3];return t[0]=o*u+f*r+s*i-c*a,t[1]=s*u+f*a+c*r-o*i,t[2]=c*u+f*i+o*a-s*r,t[3]=f*u-o*r-s*a-c*i,o=e[4],s=e[5],c=e[6],f=e[7],t[4]=o*u+f*r+s*i-c*a,t[5]=s*u+f*a+c*r-o*i,t[6]=c*u+f*i+o*a-s*r,t[7]=f*u-o*r-s*a-c*i,t}function Fa(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+u*o+a*c-i*s,t[1]=a*f+u*s+i*o-r*c,t[2]=i*f+u*c+r*s-a*o,t[3]=u*f-r*o-a*s-i*c,o=n[4],s=n[5],c=n[6],f=n[7],t[4]=r*f+u*o+a*c-i*s,t[5]=a*f+u*s+i*o-r*c,t[6]=i*f+u*c+r*s-a*o,t[7]=u*f-r*o-a*s-i*c,t}function Ra(t,e,n,r){if(Math.abs(r)<p)return Aa(t,e);var a=Math.hypot(n[0],n[1],n[2]);r*=.5;var i=Math.sin(r),u=i*n[0]/a,o=i*n[1]/a,s=i*n[2]/a,c=Math.cos(r),f=e[0],_=e[1],l=e[2],d=e[3];t[0]=f*c+d*u+_*s-l*o,t[1]=_*c+d*o+l*u-f*s,t[2]=l*c+d*s+f*o-_*u,t[3]=d*c-f*u-_*o-l*s;var h=e[4],m=e[5],b=e[6],y=e[7];return t[4]=h*c+y*u+m*s-b*o,t[5]=m*c+y*o+b*u-h*s,t[6]=b*c+y*s+h*o-m*u,t[7]=y*c-h*u-m*o-b*s,t}function Va(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function ja(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[4],s=n[5],c=n[6],f=n[7],_=e[4],l=e[5],p=e[6],d=e[7],h=n[0],m=n[1],b=n[2],y=n[3];return t[0]=r*y+u*h+a*b-i*m,t[1]=a*y+u*m+i*h-r*b,t[2]=i*y+u*b+r*m-a*h,t[3]=u*y-r*h-a*m-i*b,t[4]=r*f+u*o+a*c-i*s+_*y+d*h+l*b-p*m,t[5]=a*f+u*s+i*o-r*c+l*y+d*m+p*h-_*b,t[6]=i*f+u*c+r*s-a*o+p*y+d*b+_*m-l*h,t[7]=u*f-r*o-a*s-i*c+d*y-_*h-l*m-p*b,t}var qa=ja;function Na(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Ga=aa;function Ua(t,e,n,r){var a=1-r;return Ga(e,n)<0&&(r=-r),t[0]=e[0]*a+n[0]*r,t[1]=e[1]*a+n[1]*r,t[2]=e[2]*a+n[2]*r,t[3]=e[3]*a+n[3]*r,t[4]=e[4]*a+n[4]*r,t[5]=e[5]*a+n[5]*r,t[6]=e[6]*a+n[6]*r,t[7]=e[7]*a+n[7]*r,t}function Ha(t,e){var n=Ka(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Wa(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Za=ua,Ya=Za,Ka=sa,Xa=Ka;function Ja(t,e){var n=Ka(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,a=e[1]/n,i=e[2]/n,u=e[3]/n,o=e[4],s=e[5],c=e[6],f=e[7],_=r*o+a*s+i*c+u*f;t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=(o-r*_)/n,t[5]=(s-a*_)/n,t[6]=(c-i*_)/n,t[7]=(f-u*_)/n}return t}function Qa(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function $a(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ti(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],o=t[5],s=t[6],c=t[7],f=e[0],_=e[1],l=e[2],d=e[3],h=e[4],m=e[5],b=e[6],y=e[7];return Math.abs(n-f)<=p*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-_)<=p*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(a-l)<=p*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-d)<=p*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-h)<=p*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(o-m)<=p*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-b)<=p*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-y)<=p*Math.max(1,Math.abs(c),Math.abs(y))}function ei(){var t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function ni(t){var e=new d(2);return e[0]=t[0],e[1]=t[1],e}function ri(t,e){var n=new d(2);return n[0]=t,n[1]=e,n}function ai(t,e){return t[0]=e[0],t[1]=e[1],t}function ii(t,e,n){return t[0]=e,t[1]=n,t}function ui(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function oi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function si(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function ci(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function fi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function _i(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function li(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function pi(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function di(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function hi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function mi(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function bi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function yi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function vi(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function wi(t){var e=t[0],n=t[1];return e*e+n*n}function gi(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Mi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function ki(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function Ai(t,e){return t[0]*e[0]+t[1]*e[1]}function zi(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function xi(t,e,n,r){var a=e[0],i=e[1];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t}function Oi(t,e){e=e||1;var n=2*h()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Li(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t}function Ci(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t}function Ti(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t}function Ii(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t}function Si(t,e,n,r){var a=e[0]-n[0],i=e[1]-n[1],u=Math.sin(r),o=Math.cos(r);return t[0]=a*o-i*u+n[0],t[1]=a*u+i*o+n[1],t}function Pi(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],u=n*n+r*r;u>0&&(u=1/Math.sqrt(u));var o=a*a+i*i;o>0&&(o=1/Math.sqrt(o));var s=(n*a+r*i)*u*o;return s>1?0:s<-1?Math.PI:Math.acos(s)}function Bi(t){return t[0]=0,t[1]=0,t}function Ei(t){return"vec2("+t[0]+", "+t[1]+")"}function Di(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fi(t,e){var n=t[0],r=t[1],a=e[0],i=e[1];return Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=p*Math.max(1,Math.abs(r),Math.abs(i))}var Ri=vi,Vi=oi,ji=si,qi=ci,Ni=bi,Gi=yi,Ui=wi,Hi=function(){var t=ei();return function(e,n,r,a,i,u){var o,s;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,o=r;o<s;o+=n)t[0]=e[o],t[1]=e[o+1],i(t,t,u),e[o]=t[0],e[o+1]=t[1];return e}}()}]);',n.p+"5dec073db17a99905f1c.worker.js")}},function(t,e,n){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(r.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,n){"use strict";n.r(e),e.default=n.p+"002dc653b6230130bd3e4bd6e74f47da.wasm"},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});let a=new(n(11).UAParser),i=!1,o=!1,s=!1,u=!1;function c(){return r(this,void 0,void 0,(function*(){if(navigator.permissions&&navigator.permissions.query){let t=yield navigator.permissions.query({name:"camera"});s="denied"===t.state,i="granted"===t.state}}))}function f(){return s||u}function _(){return i&&o}function l(){return r(this,void 0,void 0,(function*(){yield h(),yield d()}))}function d(){return r(this,void 0,void 0,(function*(){try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(t=>t.stop()),i=!0,s=!1}catch(t){i=!1,s=!0}}))}function h(){return r(this,void 0,void 0,(function*(){if(window.DeviceOrientationEvent&&window.DeviceOrientationEvent.requestPermission){if("granted"!==(yield window.DeviceOrientationEvent.requestPermission()))return o=!1,u=!0,!1}o=!0,u=!1}))}window.DeviceOrientationEvent&&window.DeviceOrientationEvent.requestPermission||(o=!0),c(),e.permissionGrantedCamera=function(){return i},e.permissionGrantedMotion=function(){return o},e.permissionDeniedCamera=function(){return s},e.permissionDeniedMotion=function(){return u},e.permissionDeniedAny=f,e.permissionGrantedAll=_,e.permissionRequestAll=l,e.permissionRequestCamera=d,e.permissionRequestMotion=h,e.permissionRequestUI=function(){return r(this,void 0,void 0,(function*(){if(yield c(),_())return!0;let t=document.createElement("div");t.classList.add("zappar-permission-request"),t.innerHTML='\n    <style>\n        .zappar-permission-request {\n            position: fixed;\n            width: 100%;\n            height: 100%;\n            top: 0px;\n            left: 0px;\n            z-index: 1000;\n            background-color: rgba(0, 0, 0, 0.9);\n            font-family: sans-serif;\n            color: white;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n        }\n        .zappar-inner {\n            max-width: 400px;\n            text-align: center;\n        }\n        .zappar-title {\n            font-size: 20px;\n        }\n        .zappar-text {\n            font-size: 14px;\n            padding: 15px;\n        }\n        .zappar-inner > button {\n            background: none;\n            outline: none;\n            border: 2px solid white;\n            border-radius: 10px;\n            color: white;\n            padding: 10px 40px;\n            text-transform: uppercase;\n        }\n    </style>\n    <div class="zappar-inner">\n        <div class="zappar-title">Almost there...</div>\n        <div class="zappar-text">In order to provide this augmented reality experience, we need access to your device\'s camera and motion sensors.</div>\n        <button id="zappar-permission-request-button">Grant Access</button>\n    </div>\n',document.body.append(t);let e=t.querySelector("#zappar-permission-request-button");return yield new Promise(n=>{var a;null===(a=e)||void 0===a||a.addEventListener("click",()=>r(this,void 0,void 0,(function*(){for(yield l(),t.remove();;){if(yield new Promise(t=>requestAnimationFrame(()=>t())),f())return void n(!1);if(_())return void n(!0)}})))})}))},e.permissionDeniedUI=function(){switch(a.getBrowser().name){case"Chrome":!function(){var t;let e=document.createElement("div");e.classList.add("zappar-permission-request"),e.innerHTML='\n    <style>\n        .zappar-permission-request {\n            position: fixed;\n            width: 100%;\n            height: 100%;\n            top: 0px;\n            left: 0px;\n            z-index: 1000;\n            background-color: rgba(0, 0, 0, 0.9);\n            font-family: sans-serif;\n            color: white;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n        }\n        .zappar-inner {\n            width: 400px;\n            text-align: center;\n        }\n        .zappar-title {\n            font-size: 20px;\n        }\n        .zappar-text {\n            font-size: 14px;\n            padding: 15px;\n        }\n        .zappar-inner > button {\n            background: none;\n            outline: none;\n            border: 2px solid white;\n            border-radius: 10px;\n            color: white;\n            padding: 10px 40px;\n            text-transform: uppercase;\n        }\n    </style>\n    <div class="zappar-inner">\n        <div class="zappar-title">Permission is Needed</div>\n        <div class="zappar-text">Permission to access your device\'s camera and motion sensors is necessary for this experience.<br/><br/>To grant access, please tap the ! button in the address bar of your browser, then "Site settings", and finally "Clear and reset". You can then reload the page to try again.</div>\n        <button id="zappar-permission-reload-button">Reload</button>\n    </div>\n',document.body.append(e);let n=e.querySelector("#zappar-permission-reload-button");null===(t=n)||void 0===t||t.addEventListener("click",()=>window.location.reload())}();default:!function(){var t;let e=document.createElement("div");e.classList.add("zappar-permission-request"),e.innerHTML='\n    <style>\n        .zappar-permission-request {\n            position: fixed;\n            width: 100%;\n            height: 100%;\n            top: 0px;\n            left: 0px;\n            z-index: 1000;\n            background-color: rgba(0, 0, 0, 0.9);\n            font-family: sans-serif;\n            color: white;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n        }\n        .zappar-inner {\n            max-width: 400px;\n            text-align: center;\n        }\n        .zappar-title {\n            font-size: 20px;\n        }\n        .zappar-text {\n            font-size: 14px;\n            padding: 15px;\n        }\n        .zappar-inner > button {\n            background: none;\n            outline: none;\n            border: 2px solid white;\n            border-radius: 10px;\n            color: white;\n            padding: 10px 40px;\n            text-transform: uppercase;\n        }\n    </style>\n    <div class="zappar-inner">\n        <div class="zappar-title">Permission is Needed</div>\n        <div class="zappar-text">Permission to access your device\'s camera and motion sensors is necessary for this experience. Please reload the page to try again.</div>\n        <button id="zappar-permission-reload-button">Reload</button>\n    </div>\n',document.body.append(e);let n=e.querySelector("#zappar-permission-reload-button");null===(t=n)||void 0===t||t.addEventListener("click",()=>window.location.reload())}()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(2);let a=1,i=new Map;e.createFaceMesh=function(){let t=a++;return i.set(t,new o),t},e.destroyFaceMesh=function(t){i.delete(t)},e.getFaceMesh=function(t){return i.get(t)};class o{constructor(){this.render_mean_=new Float32Array,this.render_identity_=new Float32Array(50),this.render_expression_=new Float32Array(29),this.render_uvs_=new Float32Array,this.render_indices_=new Uint16Array,this.vertices_=new Float32Array,this.normals_=new Float32Array,this.normalsCalculated_=!1,this.modelVersion_=-1,this.mirrored_=!1}loadFromMemory(t){let e=0,n=new Uint16Array(t),r=new Int32Array(t),a=new Float32Array(t),i=()=>{let t=r[e++]*r[e++],n=a.subarray(e,e+t);return e+=t,n};this.render_mean_=i(),this.render_identity_=i(),this.render_expression_=i(),this.render_uvs_=i(),this.render_indices_=(()=>{let t=r[e++],a=n.subarray(2*e,2*e+t);return e+=t/2,a})(),this.vertices_=new Float32Array(this.render_mean_),this.normals_=new Float32Array(this.vertices_.length),this.modelVersion_++}getVertices(){return this.vertices_}getUVs(){return this.render_uvs_}getIndices(){if(this.mirrored_){if(!this.render_indices_reversed){this.render_indices_reversed=new Uint16Array(this.render_indices_.length);for(let t=0;t<this.render_indices_.length;t+=3)this.render_indices_reversed[t]=this.render_indices_[t+2],this.render_indices_reversed[t+1]=this.render_indices_[t+1],this.render_indices_reversed[t+2]=this.render_indices_[t]}return this.render_indices_reversed}return this.render_indices_}getNormals(){return this.normalsCalculated_||this.calculateNormals(),this.normals_}getModelVersion(){return this.modelVersion_}update(t,e,n){if(0!==this.render_mean_.length&&0!==this.render_identity_.length&&0!==this.render_expression_.length){this.mirrored_=n,this.vertices_.set(this.render_mean_);for(let e=0;e<t.length;e++)for(let n=0;n<this.vertices_.length;n++)this.vertices_[n]+=t[e]*this.render_identity_[n+t.length+e];for(let t=0;t<e.length;t++)for(let n=0;n<this.vertices_.length;n++)this.vertices_[n]+=e[t]*this.render_expression_[n*e.length+t];if(n)for(let t=0;t<this.vertices_.length;t+=3)this.vertices_[t]*=-1;this.normalsCalculated_=!1}}calculateNormals(){let t=this.getIndices(),e=this.vertices_,n=new Float32Array(t.length);if(!e)return;let a=t.length,i=this.normals_,o=new Float32Array([0,0,0]),s=new Float32Array([0,0,0]),u=new Float32Array([0,0,0]);for(let i=0;i<a;i+=3){let a=3*t[i],c=3*t[i+1],f=3*t[i+2];o[0]=e[c]-e[a],o[1]=e[c+1]-e[a+1],o[2]=e[c+2]-e[a+2],s[0]=e[f]-e[a],s[1]=e[f+1]-e[a+1],s[2]=e[f+2]-e[a+2],r.vec3.cross(u,o,s);let _=r.vec3.length(u);n[i]=u[0]/_,n[i+1]=u[1]/_,n[i+2]=u[2]/_}i.fill(0);for(let e=0;e<a;e+=3){let r=3*t[e],a=3*t[e+1],o=3*t[e+2];i[r]+=n[e],i[r+1]+=n[e+1],i[r+2]+=n[e+2],i[a]+=n[e],i[a+1]+=n[e+1],i[a+2]+=n[e+2],i[o]+=n[e],i[o+1]+=n[e+1],i[o+2]+=n[e+2]}let c=i.length/3;for(let t=0;t<c;t++){let e=3*t;o[0]=i[e],o[1]=i[e+1],o[2]=i[e+2],r.vec3.normalize(s,o),i[e]=s[0],i[e+1]=s[1],i[e+2]=s[2]}this.normalsCalculated_=!0}}e.FaceMesh=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5),a=n(2);e.CameraDraw=class{constructor(t){this._gl=t}_generate(t,e){if(this._vbo)return this._vbo;if(this._vbo||(this._vbo=t.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");let n=new Float32Array([-1,-1,0,0,0,-1,1,0,0,1,1,-1,0,1,0,1,-1,0,1,0,-1,1,0,0,1,1,1,0,1,1]);return t.bindBuffer(t.ARRAY_BUFFER,this._vbo),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this._vbo}drawCameraFrame(t,e,n,r){let a=this._gl;a.disable(a.DEPTH_TEST),a.disable(a.SCISSOR_TEST),a.disable(a.CULL_FACE),a.disable(a.BLEND);let i=this._getCameraShader(a),o=this._generate(a,n);a.useProgram(i.prog),a.uniformMatrix4fv(i.unif_skinTexTransform,!1,s(n.dataWidth,n.dataHeight,t,e,n.uvTransform,r)),a.uniform1i(i.unif_skinSampler,0),a.bindTexture(a.TEXTURE_2D,n.texture),a.bindBuffer(a.ARRAY_BUFFER,o),a.vertexAttribPointer(i.attr_position,3,a.FLOAT,!1,20,0),a.enableVertexAttribArray(i.attr_position),a.vertexAttribPointer(i.attr_texCoord,2,a.FLOAT,!1,20,12),a.enableVertexAttribArray(i.attr_texCoord),a.drawArrays(a.TRIANGLES,0,6),a.disableVertexAttribArray(i.attr_position),a.disableVertexAttribArray(i.attr_texCoord),a.bindTexture(a.TEXTURE_2D,null),a.bindBuffer(a.ARRAY_BUFFER,null),a.useProgram(null)}_getCameraShader(t){if(this._shader)return this._shader;let e=t.createProgram();if(!e)throw new Error("Unable to create program");let n=r.compileShader(t,t.VERTEX_SHADER,i),a=r.compileShader(t,t.FRAGMENT_SHADER,o);t.attachShader(e,n),t.attachShader(e,a),r.linkProgram(t,e);let s=t.getUniformLocation(e,"skinTexTransform");if(!s)throw new Error("Unable to get uniform location skinTexTransform");let u=t.getUniformLocation(e,"skinSampler");if(!u)throw new Error("Unable to get uniform location skinSampler");return this._shader={prog:e,unif_skinTexTransform:s,unif_skinSampler:u,attr_position:t.getAttribLocation(e,"position"),attr_texCoord:t.getAttribLocation(e,"texCoord")},this._shader}};let i="\n#ifndef GL_ES\n#define highp\n#define mediump\n#define lowp\n#endif\n\nattribute vec4 position;\nattribute vec4 texCoord;\nvarying vec4 skinTexVarying;\nuniform mat4 skinTexTransform;\n\nvoid main()\n{\n    gl_Position = position;\n    skinTexVarying = skinTexTransform * texCoord;\n}",o="\n#define highp mediump\n#ifdef GL_ES\n    // define default precision for float, vec, mat.\n    precision highp float;\n#else\n#define highp\n#define mediump\n#define lowp\n#endif\n\nvarying vec4 skinTexVarying;\nuniform lowp sampler2D skinSampler;\n\nvoid main()\n{\n    gl_FragColor = texture2DProj(skinSampler, skinTexVarying);\n}";function s(t,e,n,r,i,o){let s=a.mat4.create(),u=a.mat4.create();a.mat4.fromTranslation(u,[-.5,-.5,0]),a.mat4.multiply(s,u,s),o&&(a.mat4.fromScaling(u,[-1,1,1]),a.mat4.multiply(s,u,s)),a.mat4.fromRotation(u,-1*function(){if(window.screen.orientation)switch(window.screen.orientation.type){case"portrait-primary":return 270;case"landscape-secondary":return 180;case"portrait-secondary":return 90;default:return 0}else if(void 0!==window.orientation)switch(window.orientation){case 0:return 270;case 90:return 0;case 180:return 90;case-90:return 180}return 0}()*Math.PI/180,[0,0,1]),a.mat4.multiply(s,u,s);let c=a.vec3.create();c[0]=n,c[1]=r,c[2]=0,a.vec3.transformMat4(c,c,u);let f=Math.abs(c[0]),_=Math.abs(c[1]);a.mat4.fromScaling(u,[1,-1,1]),a.mat4.multiply(s,u,s);let l=f/_,d=t/e;return l>d?a.mat4.fromScaling(u,[1,d/l,1]):a.mat4.fromScaling(u,[l/d,1,1]),a.mat4.multiply(s,u,s),a.mat4.fromTranslation(u,[.5,.5,0]),a.mat4.multiply(s,u,s),a.mat4.multiply(s,i,s),s}e.cameraFrameTextureMatrix=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5);e.FaceDraw=class{constructor(t){this._gl=t}_generateIBO(t,e){if(this._ibo&&this._lastIndices===t)return this._ibo;if(this._lastIndices=t,this._ibo||(this._ibo=e.createBuffer()),!this._ibo)throw new Error("Unable to create buffer object");return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._ibo),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(t,e){if(this._vbo||(this._vbo=e.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");return e.bindBuffer(e.ARRAY_BUFFER,this._vbo),e.bufferData(e.ARRAY_BUFFER,t,e.STREAM_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._vbo}_generateNormalBO(t,e){if(this._normalbo||(this._normalbo=e.createBuffer()),!this._normalbo)throw new Error("Unable to create buffer object");return e.bindBuffer(e.ARRAY_BUFFER,this._normalbo),e.bufferData(e.ARRAY_BUFFER,t,e.STREAM_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._normalbo}drawFace(t,e){let n=this._gl,r=this._getShader(n),a=this._generateVBO(e.getVertices(),n),i=this._generateNormalBO(e.getNormals(),n),o=this._generateIBO(e.getIndices(),n);n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.useProgram(r.prog),n.uniformMatrix4fv(r.unif_matrix,!1,t),n.bindBuffer(n.ARRAY_BUFFER,a),n.vertexAttribPointer(r.attr_position,3,n.FLOAT,!1,12,0),n.enableVertexAttribArray(r.attr_position),n.bindBuffer(n.ARRAY_BUFFER,i),n.vertexAttribPointer(r.attr_normal,3,n.FLOAT,!1,12,0),n.enableVertexAttribArray(r.attr_normal),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),n.drawElements(n.TRIANGLES,6912,n.UNSIGNED_SHORT,0),n.disableVertexAttribArray(r.attr_position),n.disableVertexAttribArray(r.attr_normal),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}_getShader(t){if(this._shader)return this._shader;let e=t.createProgram();if(!e)throw new Error("Unable to create program");let n=r.compileShader(t,t.VERTEX_SHADER,a),o=r.compileShader(t,t.FRAGMENT_SHADER,i);t.attachShader(e,n),t.attachShader(e,o),r.linkProgram(t,e);let s=t.getUniformLocation(e,"matrix");if(!s)throw new Error("Unable to get uniform location mattrix");return this._shader={prog:e,unif_matrix:s,attr_position:t.getAttribLocation(e,"position"),attr_normal:t.getAttribLocation(e,"normal")},this._shader}};let a="\n#ifndef GL_ES\n#define highp\n#define mediump\n#define lowp\n#endif\n\nuniform mat4 matrix;\nattribute vec4 position;\nattribute vec3 normal;\nvarying highp vec3 vnormal;\n\nvoid main()\n{\n    gl_Position = matrix * position;\n    vnormal = normal;\n}",i="\n#define highp mediump\n#ifdef GL_ES\n    // define default precision for float, vec, mat.\n    precision highp float;\n#else\n#define highp\n#define mediump\n#define lowp\n#endif\n\nvarying vec4 skinTexVarying;\nvarying highp vec3 vnormal;\nuniform lowp sampler2D skinSampler;\n\nvoid main()\n{\n    vec3 normal2 = 0.5 * vnormal + 0.5;\n    gl_FragColor = vec4(normal2.x , normal2.y, normal2.z, 1.0);\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5);e.FaceDrawProject=class{constructor(t){this._gl=t}_generateIBO(t,e){if(this._ibo&&this._lastIndices===t)return this._ibo;if(this._lastIndices=t,this._ibo||(this._ibo=e.createBuffer()),!this._ibo)throw new Error("Unable to create buffer object");return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._ibo),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(t,e){if(this._vbo||(this._vbo=e.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");return e.bindBuffer(e.ARRAY_BUFFER,this._vbo),e.bufferData(e.ARRAY_BUFFER,t,e.STREAM_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._vbo}_generateUVBO(t,e){if(this._uvbo||(this._uvbo=e.createBuffer()),!this._uvbo)throw new Error("Unable to create buffer object");return e.bindBuffer(e.ARRAY_BUFFER,this._uvbo),e.bufferData(e.ARRAY_BUFFER,t,e.STREAM_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._uvbo}drawFace(t,e,n,r,a,i){let o=this._gl,s=this._getShader(o),u=this._generateVBO(e,o),c=this._generateUVBO(r,o),f=this._generateIBO(a,o);o.enable(o.DEPTH_TEST),o.enable(o.CULL_FACE),o.useProgram(s.prog),o.uniformMatrix4fv(s.unif_matrix,!1,t),o.uniformMatrix4fv(s.unif_uvmatrix,!1,n),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,i),o.uniform1i(s.unif_sampler,0),o.bindBuffer(o.ARRAY_BUFFER,u),o.vertexAttribPointer(s.attr_position,3,o.FLOAT,!1,12,0),o.enableVertexAttribArray(s.attr_position),o.bindBuffer(o.ARRAY_BUFFER,c),o.vertexAttribPointer(s.attr_uv,3,o.FLOAT,!1,12,0),o.enableVertexAttribArray(s.attr_uv),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,f),o.drawElements(o.TRIANGLES,6912,o.UNSIGNED_SHORT,0),o.disableVertexAttribArray(s.attr_position),o.disableVertexAttribArray(s.attr_uv),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null)}_getShader(t){if(this._shader)return this._shader;let e=t.createProgram();if(!e)throw new Error("Unable to create program");let n=r.compileShader(t,t.VERTEX_SHADER,a),o=r.compileShader(t,t.FRAGMENT_SHADER,i);t.attachShader(e,n),t.attachShader(e,o),r.linkProgram(t,e);let s=t.getUniformLocation(e,"matrix");if(!s)throw new Error("Unable to get uniform location matrix");let u=t.getUniformLocation(e,"uvmatrix");if(!u)throw new Error("Unable to get uniform location matrix");let c=t.getUniformLocation(e,"uSampler");if(!c)throw new Error("Unable to get uniform location sampler");return this._shader={prog:e,unif_matrix:s,unif_sampler:c,unif_uvmatrix:u,attr_position:t.getAttribLocation(e,"position"),attr_uv:t.getAttribLocation(e,"uv"),attr_texturecoord:t.getAttribLocation(e,"aTextureCoord")},this._shader}};let a="\n#ifndef GL_ES\n#define highp\n#define mediump\n#define lowp\n#endif\n\nuniform mat4 matrix;\nuniform mat4 uvmatrix;\nattribute vec4 position;\nattribute vec3 normal;\nattribute vec3 uv;\n\n// varying highp vec3 vnormal;\n\nvarying highp vec2 vTextureCoord;\nvarying highp float vAlpha;\n\nvoid main()\n{\n    gl_Position = matrix * position;\n    vec4 ret = uvmatrix * vec4(uv.x, uv.y, uv.z, 1.0);\n    ret.x /= ret.w * 2.0;\n    ret.y /= ret.w * 2.0;\n    ret.x += 0.5;\n    ret.y += 0.0;\n    vAlpha = 1.0;\n    vTextureCoord = ret.xy;\n}",i="\n#define highp mediump\n#ifdef GL_ES\n    // define default precision for float, vec, mat.\n    precision highp float;\n#else\n#define highp\n#define mediump\n#define lowp\n#endif\n\nvarying highp vec2 vTextureCoord;\nvarying highp vec3 vnormal;\nvarying highp float vAlpha;\nuniform lowp sampler2D uSampler;\n\nvoid main()\n{\n    // vec3 normal2 = 0.5 * vnormal + 0.5;\n    vec4 p = texture2D(uSampler, vTextureCoord);\n    p.a = vAlpha;\n    gl_FragColor = p; // vec4(normal2.x , normal2.y, normal2.z, 1.0);\n}"},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(12),i=n(13),o=n(10),s=n(9);let u=1,c=new Map,f=document.createElement("video");f.setAttribute("playsinline",""),f.setAttribute("webkit-playsinline",""),i.profile.videoElementInDOM&&(f.style.width="0px",f.style.height="0px",document.body.appendChild(f));class _ extends a.HTMLElementSource{constructor(t,e,n){super(f,e),this._impl=t,this._deviceId=n,this._currentStream=null,this._activeDeviceId=null,this._hasStartedOrientation=!1,this._deviceMotionListener=t=>{let e=o.Pipeline.get(this._pipeline);if(!e)return;let n=void 0!==t.timeStamp&&null!==t.timeStamp?t.timeStamp:performance.now();null!==t.accelerationIncludingGravity&&null!==t.accelerationIncludingGravity.x&&null!==t.accelerationIncludingGravity.y&&null!==t.accelerationIncludingGravity.z&&e.motionAccelerometerSubmit(n,t.accelerationIncludingGravity.x*i.profile.deviceMotionMutliplier,t.accelerationIncludingGravity.y*i.profile.deviceMotionMutliplier,t.accelerationIncludingGravity.z*i.profile.deviceMotionMutliplier),null===t.rotationRate||null===t.rotationRate.alpha||null===t.rotationRate.beta||null===t.rotationRate.gamma||this._hasStartedOrientation?this._hasStartedOrientation||this._startDeviceOrientation():(t.timeStamp,e.motionRotationRateSubmit(n,t.rotationRate.alpha*Math.PI/-180,t.rotationRate.beta*Math.PI/-180,t.rotationRate.gamma*Math.PI/-180))}}static create(t,e){let n=u++;return c.set(n,new _(n,t,e)),n}static get(t){return c.get(t)}destroy(){c.delete(this._impl),super.destroy()}_stop(){if(!this._currentStream)return;this._currentStream.getTracks().forEach(t=>t.stop()),this._currentStream=null}pause(){super.pause(),this._stopDeviceMotion(),this._syncCamera()}start(){super.start(),this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return r(this,void 0,void 0,(function*(){let t,e;this._deviceId!==_.DEFAULT_DEVICE_ID&&this._deviceId!==_.USER_DEFAULT_DEVICE_ID?t=this._deviceId:e=this._deviceId===_.DEFAULT_DEVICE_ID?"environment":"user";let n={audio:!1,video:{facingMode:e,width:i.profile.videoWidth,height:i.profile.videoHeight,frameRate:i.profile.requestHighFrameRate?60:void 0,deviceId:t}};if(t)return n;if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return n;let r=yield navigator.mediaDevices.enumerateDevices(),a=!1;return r=r.filter(t=>{if("videoinput"!==t.kind)return!1;if(t.getCapabilities){a=!0;let n=t.getCapabilities();if(n&&n.facingMode&&n.facingMode.indexOf("user"===e?"user":"environment")<0)return!1}return!0}),a&&0!==r.length?("object"==typeof n.video&&(console.log("Choosing device ID",r[r.length-1].deviceId),n.video.deviceId=r[r.length-1].deviceId),n):(console.log("Falling back to default constraints"),n)}))}getFrame(t){return this._cameraToScreenRotation=s.cameraRotationForScreenOrientation(!1),super.getFrame(t)}_getUserMedia(){return r(this,void 0,void 0,(function*(){let t=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(t):yield new Promise((e,n)=>{navigator.getUserMedia(t,e,n)})}))}_syncCamera(){return r(this,void 0,void 0,(function*(){if(this._currentStream&&this._isPaused)this._stop();else if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused)return void(yield this._syncCamera());if(this._isUserFacing=!1,this._currentStream){let t=this._currentStream.getVideoTracks();t.length>0&&(this._isUserFacing="user"===t[0].getSettings().facingMode)}if(!(this._video instanceof HTMLVideoElement))return;this._video.src="",this._video.loop=!1,this._video.muted=!0,this._video.srcObject=this._currentStream,this._video.play()}}))}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,window.addEventListener("deviceorientation",t=>{let e=o.Pipeline.get(this._pipeline);if(!e)return;let n=void 0!==t.timeStamp&&null!==t.timeStamp?t.timeStamp:performance.now();null!==t.alpha&&null!==t.beta&&null!==t.gamma&&e.motionAttitudeSubmit(n,t.alpha,t.beta,t.gamma)}))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener)}}e.CameraSource=_,_.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b",_.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Source=class{}},function(t,e,n){"use strict";n.r(e),e.default=n.p+"3b1e25184d41adcee05fa2940790aaff.zbin"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"b1e74c5329dbad2db41d8659ccd53879.zbin"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.InstantWorldTracker=class{constructor(t){this._pipeline=t,this.anchor={poseCameraRelative:t=>this._anchorPoseCameraRelative(t),pose:(t,e)=>this._anchorPose(t,e)},this._z=r.z(),this._impl=this._z.instant_world_tracker_create(this._pipeline._getImpl())}destroy(){this._z.instant_world_tracker_destroy(this._impl)}_anchorPoseCameraRelative(t){return this._z.instant_world_tracker_anchor_pose_camera_relative(this._impl,!0===t)}_anchorPose(t,e){return this._z.instant_world_tracker_anchor_pose(this._impl,t,!0===e)}get enabled(){return this._z.instant_world_tracker_enabled(this._impl)}set enabled(t){this._z.instant_world_tracker_enabled_set(this._impl,t)}setAnchorPoseFromCameraOffset(t,e,n,r){this._z.instant_world_tracker_anchor_pose_set_from_camera_offset(this._impl,t,e,n,r||4)}};new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(7),a=n(0);e.BarcodeFinder=class{constructor(t){this._pipeline=t,this.onDetection=new r.Event1,this._lastDetected=[],this._found=[],this._formats=[],this._frameUpdate=()=>{this._found=[];let t=this._z.barcode_finder_found_number(this._impl);for(let e=0;e<t;e++)this._found.push({text:this._z.barcode_finder_found_text(this._impl,e),format:this._z.barcode_finder_found_format(this._impl,e)});if(0!==this._found.length){t:for(let t of this._found){for(let e of this._lastDetected)if(e.text===t.text)continue t;this.onDetection.emit(t)}this._lastDetected=this._found}},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=a.z(),this._impl=this._z.barcode_finder_create(this._pipeline._getImpl()),this._formats.push.apply(this._formats,[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536])}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this._found=[],this._lastDetected=[],this._z.barcode_finder_destroy(this._impl)}get found(){return this._found}get enabled(){return this._z.barcode_finder_enabled(this._impl)}set enabled(t){this._z.barcode_finder_enabled_set(this._impl,t)}get formats(){return this._formats}set formats(t){this._formats=t.slice();let e=0;for(let t of this._formats)e|=t;this._z.barcode_finder_formats_set(this._impl,e)}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(7),i=n(0);e.FaceTracker=class{constructor(t){this._pipeline=t,this.onVisible=new a.Event1,this.onNotVisible=new a.Event1,this.onNewAnchor=new a.Event1,this.visible=new Set,this.anchors=new Map,this._visibleLastFrame=new Set,this._frameUpdate=()=>{let t=new Set,e=this.visible;this.visible=this._visibleLastFrame,this._visibleLastFrame=e,this.visible.clear();let n=this._z.face_tracker_anchor_count(this._impl);for(let e=0;e<n;e++){let n=this._z.face_tracker_anchor_id(this._impl,e),r=this.anchors.get(n),i=!1;r||(r={onVisible:new a.Event,onNotVisible:new a.Event,id:n,poseCameraRelative:t=>this._z.face_tracker_anchor_pose_camera_relative(this._impl,e,!0===t),pose:(t,n)=>this._z.face_tracker_anchor_pose(this._impl,e,t,!0===n),identity:new Float32Array(50),expression:new Float32Array(29),visible:!0},i=!0,this.anchors.set(n,r),t.add(r)),r.visible=!0,r.identity=this._z.face_tracker_anchor_identity_coefficients(this._impl,e),r.expression=this._z.face_tracker_anchor_expression_coefficients(this._impl,e),this.visible.add(r)}for(let e of t)this.onNewAnchor.emit(e);for(let t of this.visible)this._visibleLastFrame.has(t)?this._visibleLastFrame.delete(t):(this.onVisible.emit(t),t.onVisible.emit());for(let t of this._visibleLastFrame)this.onNotVisible.emit(t),t.onNotVisible.emit()},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=i.z(),this._impl=this._z.face_tracker_create(this._pipeline._getImpl())}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this.anchors.clear(),this.visible.clear(),this._z.face_tracker_destroy(this._impl)}loadModel(t){return r(this,void 0,void 0,(function*(){"string"==typeof t&&(t=yield(yield fetch(t)).arrayBuffer()),this._z.face_tracker_model_load_from_memory(this._impl,t)}))}loadDefaultModel(){return r(this,void 0,void 0,(function*(){yield this._z.face_tracker_model_load_default(this._impl)}))}get enabled(){return this._z.face_tracker_enabled(this._impl)}set enabled(t){this._z.face_tracker_enabled_set(this._impl,t)}get maxFaces(){return this._z.face_tracker_max_faces(this._impl)}set maxFaces(t){this._z.face_tracker_max_faces_set(this._impl,t)}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(0);e.FaceMesh=class{constructor(){this._z=a.z(),this._impl=this._z.face_mesh_create()}destroy(){this._z.face_mesh_destroy(this._impl)}load(t){return r(this,void 0,void 0,(function*(){"string"==typeof t&&(t=yield(yield fetch(t)).arrayBuffer()),this._z.face_mesh_load_from_memory(this._impl,t)}))}loadDefault(){return r(this,void 0,void 0,(function*(){yield this._z.face_mesh_load_default(this._impl)}))}updateFromFaceAnchor(t,e){this._z.face_mesh_update(this._impl,t.identity,t.expression,e||!1)}updateFromIdentityExpression(t,e,n){this._z.face_mesh_update(this._impl,t,e,n||!1)}get vertices(){return this._z.face_mesh_vertices(this._impl)}get indices(){return this._z.face_mesh_indices(this._impl)}get uvs(){return this._z.face_mesh_uvs(this._impl)}get normals(){return this._z.face_mesh_normals(this._impl)}_getImpl(){return this._impl}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.CameraSource=class{constructor(t,e){this._z=r.z(),this._impl=this._z.camera_source_create(t._getImpl(),e)}destroy(){this._z.camera_source_destroy(this._impl)}start(){this._z.camera_source_start(this._impl)}pause(){this._z.camera_source_pause(this._impl)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.HTMLElementSource=class{constructor(t,e){this._z=r.z(),this._impl=this._z.html_element_source_create(t._getImpl(),e)}destroy(){this._z.html_element_source_destroy(this._impl)}start(){this._z.html_element_source_start(this._impl)}pause(){this._z.html_element_source_pause(this._impl)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0),a=n(7);e.Pipeline=class{constructor(){this.onFrameUpdate=new a.Event,this._onFrameUpdateInternal=new a.Event,this._lastFrameNumber=-1,this._z=r.z(),this._impl=this._z.pipeline_create()}frameUpdate(){this._z.pipeline_frame_update(this._impl);let t=this._z.pipeline_frame_number(this._impl);t!==this._lastFrameNumber&&(this._lastFrameNumber=t,this._onFrameUpdateInternal.emit(),this.onFrameUpdate.emit())}_getImpl(){return this._impl}glContextSet(t){this._z.pipeline_gl_context_set(this._impl,t)}cameraFrameTextureGL(){return this._z.pipeline_camera_frame_texture_gl(this._impl)}cameraFrameTextureMatrix(t,e,n){return this._z.pipeline_camera_frame_texture_matrix(this._impl,t,e,!0===n)}cameraFrameDrawGL(t,e,n){this._z.pipeline_camera_frame_draw_gl(this._impl,t,e,n)}cameraFrameUploadGL(){this._z.pipeline_camera_frame_upload_gl(this._impl)}processGL(){this._z.pipeline_process_gl(this._impl)}cameraModel(){return this._z.pipeline_camera_model(this._impl)}cameraPoseDefault(){return this._z.pipeline_camera_pose_default(this._impl)}cameraPoseWithAttitude(t){return this._z.pipeline_camera_pose_with_attitude(this._impl,t||!1)}cameraPoseWithOrigin(t){return this._z.pipeline_camera_pose_with_origin(this._impl,t)}cameraFrameUserFacing(){return this._z.pipeline_camera_frame_user_facing(this._impl)}drawFace(t,e,n,r){this._z.pipeline_draw_face(this._impl,t,e,n,r._getImpl())}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(0);var i;!function(t){t[t.CAMERA=0]="CAMERA",t[t.MOTION=1]="MOTION"}(i=e.Permission||(e.Permission={})),e.permissionGranted=function(t){switch(t){case i.CAMERA:return a.z().permission_granted_camera();case i.MOTION:return a.z().permission_granted_motion();default:return a.z().permission_granted_all()}},e.permissionDenied=function(t){switch(t){case i.CAMERA:return a.z().permission_denied_camera();case i.MOTION:return a.z().permission_denied_motion();default:return a.z().permission_denied_any()}},e.permissionRequest=function(t){switch(t){case i.CAMERA:a.z().permission_request_camera();break;case i.MOTION:a.z().permission_request_motion();break;default:a.z().permission_request_all()}return new Promise(e=>r(this,void 0,void 0,(function*(){for(;;)switch(yield new Promise(t=>requestAnimationFrame(()=>t())),t){case i.CAMERA:if(a.z().permission_granted_camera())return void e(!0);if(a.z().permission_denied_camera())return void e(!1);break;case i.MOTION:if(a.z().permission_granted_motion())return void e(!0);if(a.z().permission_denied_motion())return void e(!1);break;default:if(a.z().permission_granted_camera()&&a.z().permission_granted_motion())return void e(!0);if(a.z().permission_denied_camera()||a.z().permission_denied_motion())return void e(!1)}})))},e.permissionRequestUI=function(){return r(this,void 0,void 0,(function*(){return yield a.z().permission_request_ui_promise()}))},e.permissionDeniedUI=function(){return a.z().permission_denied_ui()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=n(6);class i extends r.Group{constructor(t,e,n){super(),this._camera=t,this.imageTracker=e,this.anchorId=n,this.isReady=!1,this.matrixAutoUpdate=!1}updateMatrixWorld(t){this.currentAnchor&&this.imageTracker.visible.has(this.currentAnchor)||(this.anchorId?this.currentAnchor=this.imageTracker.anchors.get(this.anchorId):this.currentAnchor=this.imageTracker.visible.values().next().value),this.currentAnchor&&this.matrix.fromArray(this.currentAnchor.pose(this._camera.rawPose,this._camera.currentMirrorMode===a.CameraMirrorMode.Poses)),super.updateMatrixWorld(t)}}e.ImageAnchorGroup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=n(8);class i extends r.Loader{constructor(t){super(t)}load(t,e,n,r){let i=new a.ImageTracker;return i.loadTarget(t).then(()=>{var t;null===(t=e)||void 0===t||t(i)}).catch(t=>{var e;null===(e=r)||void 0===e||e()}),i}parse(){}}e.ImageTrackerLoader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=n(6);class i extends r.Group{constructor(t,e){super(),this._camera=t,this.instantTracker=e,this.matrixAutoUpdate=!1}setAnchorPoseFromCameraOffset(t,e,n,r){this.instantTracker.setAnchorPoseFromCameraOffset(t,e,n,r)}updateMatrixWorld(t){this.matrix.fromArray(this.instantTracker.anchor.pose(this._camera.rawPose,this._camera.currentMirrorMode===a.CameraMirrorMode.Poses)),super.updateMatrixWorld(t)}}e.InstantWorldAnchorGroup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=n(6);class i extends r.Group{constructor(t,e,n){super(),this._camera=t,this.faceTracker=e,this.anchorId=n,this.isReady=!1,this.matrixAutoUpdate=!1}updateMatrixWorld(t){this.currentAnchor&&this.faceTracker.visible.has(this.currentAnchor)||(this.anchorId?this.currentAnchor=this.faceTracker.anchors.get(this.anchorId):this.currentAnchor=this.faceTracker.visible.values().next().value),this.currentAnchor&&this.matrix.fromArray(this.currentAnchor.pose(this._camera.rawPose,this._camera.currentMirrorMode===a.CameraMirrorMode.Poses)),super.updateMatrixWorld(t)}}e.FaceAnchorGroup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=n(8);class i extends r.Loader{constructor(t){super(t)}load(t,e,n,r){let i=new a.FaceTracker;return(t?i.loadModel(t):i.loadDefaultModel()).then(()=>{var t;null===(t=e)||void 0===t||t(i)}).catch(t=>{var e;null===(e=r)||void 0===e||e()}),i}parse(){}}e.FaceTrackerLoader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=n(4),i=n(1);let o;class s extends r.BufferGeometry{constructor(t){super(),this._hasSetIndices=!1,this._hasSetUVs=!1,this._calculateNormals=!0,t||(o||(o=new a.FaceMesh,o.loadDefault()),t=o),this._faceMesh=t}_updateIndices(){this._hasSetIndices||0!==this._faceMesh.indices.length&&(this.setIndex(new r.Uint16BufferAttribute(this._faceMesh.indices,1)),this._hasSetIndices=!0)}_updateUVs(){this._hasSetUVs||0!==this._faceMesh.uvs.length&&(this.setAttribute("uv",new i.BufferAttribute(this._faceMesh.uvs,2)),this._hasSetUVs=!0)}get calculateNormals(){return this._calculateNormals}set calculateNormals(t){this._calculateNormals=t,this._calculateNormals||(this.removeAttribute("normal"),delete this._normals)}updateFromFaceAnchorGroup(t){0!==this._faceMesh.vertices.length&&t.currentAnchor&&this.updateFromFaceAnchor(t.currentAnchor)}updateFromFaceAnchor(t){this.updateFromIdentityExpression(t.identity,t.expression)}updateFromIdentityExpression(t,e){0!==this._faceMesh.vertices.length&&(this._updateIndices(),this._updateUVs(),this._faceMesh.updateFromIdentityExpression(t,e),this._vertices||(this._vertices=new Float32Array(this._faceMesh.vertices.length),this._verticesAttribute=new i.BufferAttribute(this._vertices,3),this.setAttribute("position",this._verticesAttribute)),this._vertices.set(this._faceMesh.vertices),this._verticesAttribute&&(this._verticesAttribute.needsUpdate=!0),this.calculateNormals&&(this._normals||(this._normals=new Float32Array(this._faceMesh.normals.length),this._normalsAttribute=new i.BufferAttribute(this._normals,3),this.setAttribute("normal",this._normalsAttribute)),this._normals.set(this._faceMesh.normals),this._normalsAttribute&&(this._normalsAttribute.needsUpdate=!0)))}}e.FaceBufferGeometry=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),a=n(4);class i extends r.Loader{constructor(t){super(t)}load(t,e,n,r){let i=new a.FaceMesh;return(t?i.load(t):i.loadDefault()).then(()=>{var t;null===(t=e)||void 0===t||t(i)}).catch(t=>{var e;null===(e=r)||void 0===e||e()}),i}parse(){}}e.FaceMeshLoader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.default=AFRAME.registerComponent("zappar-instant",{schema:{placementMode:{type:"boolean",default:!1}},init:function(){let t=this.el,e=document.querySelector("a-scene").systems["zappar-camera"],n=e.camera,a=document.querySelector("a-scene").object3D,i=new r.InstantWorldTracker;this.trackerGroup=new r.InstantWorldAnchorGroup(n,i),a.add(this.trackerGroup),t.object3D.matrixAutoUpdate=!1,e.registerForCallbacks(this._frameUpdate=()=>{this.data.placementMode&&i.setAnchorPoseFromCameraOffset(0,0,-5),t.object3D.matrix=this.trackerGroup.matrix})},remove:function(){document.querySelector("a-scene").systems["zappar-camera"].unregisterForCallbacks(this._frameUpdate),this.trackerGroup.instantTracker.destroy()}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.default=AFRAME.registerComponent("zappar-image",{schema:{type:"asset",default:""},update:function(t){this.data!==t&&this.trackerGroup.imageTracker.loadTarget(this.data)},init:function(){let t=this.el,e=document.querySelector("a-scene").systems["zappar-camera"],n=e.camera,a=document.querySelector("a-scene").object3D;this.trackerGroup=new r.ImageAnchorGroup(n,new r.ImageTracker),a.add(this.trackerGroup),t.object3D.matrixAutoUpdate=!1,e.registerForCallbacks(this._frameUpdate=()=>{t.object3D.matrix=this.trackerGroup.matrix}),this.trackerGroup.imageTracker.onVisible.bind(e=>t.emit("zappar-visible",e)),this.trackerGroup.imageTracker.onNotVisible.bind(e=>t.emit("zappar-notvisible",e)),this.trackerGroup.imageTracker.onNewAnchor.bind(e=>t.emit("zappar-newanchor",e))},remove:function(){document.querySelector("a-scene").systems["zappar-camera"].unregisterForCallbacks(this._frameUpdate),this.trackerGroup.imageTracker.destroy()}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.default=AFRAME.registerComponent("zappar-face",{init:function(){let t=this.el,e=document.querySelector("a-scene").systems["zappar-camera"],n=e.camera,a=document.querySelector("a-scene").object3D;this.trackerGroup=new r.FaceAnchorGroup(n,(new r.FaceTrackerLoader).load()),a.add(this.trackerGroup),this.trackerGroup.faceTracker.onVisible.bind(e=>t.emit("zappar-visible",e)),this.trackerGroup.faceTracker.onNotVisible.bind(e=>t.emit("zappar-notvisible",e)),this.trackerGroup.faceTracker.onNewAnchor.bind(e=>t.emit("zappar-newanchor",e)),t.object3D.matrixAutoUpdate=!1,e.registerForCallbacks(this._frameUpdate=()=>{t.object3D.matrix=this.trackerGroup.matrix})},remove:function(){document.querySelector("a-scene").systems["zappar-camera"].unregisterForCallbacks(this._frameUpdate),this.trackerGroup.faceTracker.destroy()}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.default=AFRAME.registerGeometry("face-mesh",{schema:{face:{type:"string"}},init:function(t){t.buffer=!1;let e=new r.FaceBufferGeometry;this.geometry=e,document.querySelector("a-scene").systems["zappar-camera"].registerForCallbacks(this._frameUpdate=()=>{let n=document.querySelector(t.face);n&&n.components&&n.components["zappar-face"]&&n.components["zappar-face"].trackerGroup&&e.updateFromFaceAnchorGroup(n.components["zappar-face"].trackerGroup)})}})}])}));